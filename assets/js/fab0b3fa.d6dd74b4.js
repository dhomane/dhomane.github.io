"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[38677],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>h});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=i.createContext({}),c=function(e){var t=i.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},l=function(e){var t=c(e.components);return i.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},g=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,u=e.parentName,l=a(e,["components","mdxType","originalType","parentName"]),g=c(n),h=o,d=g["".concat(u,".").concat(h)]||g[h]||p[h]||s;return n?i.createElement(d,r(r({ref:t},l),{},{components:n})):i.createElement(d,r({ref:t},l))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,r=new Array(s);r[0]=g;var a={};for(var u in t)hasOwnProperty.call(t,u)&&(a[u]=t[u]);a.originalType=e,a.mdxType="string"==typeof e?e:o,r[1]=a;for(var c=2;c<s;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}g.displayName="MDXCreateElement"},89958:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var i=n(87462),o=(n(67294),n(3905));const s={sidebar_position:8080,slug:"2019-06-18",title:"User Login with Google OAuth2 for Discourse",authors:"mpolinowski",tags:["LINUX","Discourse"]},r=void 0,a={unversionedId:"DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/index",id:"DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/index",title:"User Login with Google OAuth2 for Discourse",description:"Katmandu, Nepal",source:"@site/docs/DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/index.mdx",sourceDirName:"DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse",slug:"/DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/2019-06-18",permalink:"/docs/DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/2019-06-18",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Provisioning/2019-06-18--using-oauth2-in-discourse/index.mdx",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Discourse",permalink:"/docs/tags/discourse"}],version:"current",sidebarPosition:8080,frontMatter:{sidebar_position:8080,slug:"2019-06-18",title:"User Login with Google OAuth2 for Discourse",authors:"mpolinowski",tags:["LINUX","Discourse"]},sidebar:"tutorialSidebar",previous:{title:"User Login with Twitter for Discourse",permalink:"/docs/DevOps/Provisioning/2019-06-19--using-twitter-auth-in-discourse/2019-06-20"},next:{title:"Migrating from vBulletin 5 to Discourse on CentOS 8",permalink:"/docs/DevOps/Provisioning/2019-06-16--migrating-from-vbulletin-to-discourse-on-centos8/2019-06-16"}},u={},c=[{value:"Creating a new Google Cloud Platform Project",id:"creating-a-new-google-cloud-platform-project",level:2},{value:"Setup OAuth2",id:"setup-oauth2",level:2},{value:"Verify your Domain",id:"verify-your-domain",level:2}],l={toc:c};function p(e){let{components:t,...s}=e;return(0,o.kt)("wrapper",(0,i.Z)({},l,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Katmandu, Nepal",src:n(64431).Z,width:"1500",height:"618"})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#creating-a-new-google-cloud-platform-project"},"Creating a new Google Cloud Platform Project")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#setup-oauth2"},"Setup OAuth2")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#verify-your-domain"},"Verify your Domain"))),(0,o.kt)("p",null,"Configure Discourse to allow login and registration with Google OAuth2."),(0,o.kt)("h2",{id:"creating-a-new-google-cloud-platform-project"},"Creating a new Google Cloud Platform Project"),(0,o.kt)("p",null,"Open the ",(0,o.kt)("a",{parentName:"p",href:"https://console.developers.google.com"},"Google Developer Console")," and Select to ",(0,o.kt)("strong",{parentName:"p"},"Create a new Project"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(51791).Z,width:"774",height:"179"})),(0,o.kt)("p",null,"Fill in the Project Name field, then click on ",(0,o.kt)("strong",{parentName:"p"},"Create"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(8964).Z,width:"772",height:"394"})),(0,o.kt)("h2",{id:"setup-oauth2"},"Setup OAuth2"),(0,o.kt)("p",null,"Under ",(0,o.kt)("strong",{parentName:"p"},"APIs and Services")," and select the ",(0,o.kt)("strong",{parentName:"p"},"OAuth consent screen"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(54735).Z,width:"962",height:"419"})),(0,o.kt)("p",null,"Select ",(0,o.kt)("strong",{parentName:"p"},"External")," and then click on ",(0,o.kt)("strong",{parentName:"p"},"Create"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(67632).Z,width:"958",height:"390"})),(0,o.kt)("p",null,"Fill out the form then click Save:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(40211).Z,width:"845",height:"945"})),(0,o.kt)("p",null,"Go to the ",(0,o.kt)("strong",{parentName:"p"},"Credentials")," tab on the left, click on ",(0,o.kt)("strong",{parentName:"p"},"+ CREATE CREDENTIALS")," then click on ",(0,o.kt)("strong",{parentName:"p"},"OAuth client ID"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(17135).Z,width:"1000",height:"218"})),(0,o.kt)("p",null,"Choose ",(0,o.kt)("strong",{parentName:"p"},"Web application")," as the Application Type. In the ",(0,o.kt)("strong",{parentName:"p"},"Authorized JavaScript Origins")," section, add your site\u2019s base url, including http:// or https://. In the ",(0,o.kt)("strong",{parentName:"p"},"Authorized Redirect URI")," section, add the base url with ",(0,o.kt)("inlineCode",{parentName:"p"},"/auth/google_oauth2/callback"),". Click the ",(0,o.kt)("strong",{parentName:"p"},"Create")," button:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(36925).Z,width:"1000",height:"669"})),(0,o.kt)("p",null,"The OAuth client dialog will appear with client ID and secret:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(46708).Z,width:"994",height:"471"})),(0,o.kt)("p",null,"In your Discourse site settings, check enable google oauth2 logins, and fill in your google oauth2 client id and google auth2 client secret provided earlier:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(8664).Z,width:"950",height:"348"})),(0,o.kt)("h2",{id:"verify-your-domain"},"Verify your Domain"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(76952).Z,width:"860",height:"383"})),(0,o.kt)("p",null,"Your site must be registered on ",(0,o.kt)("a",{parentName:"p",href:"https://www.google.com/webmasters/tools"},"Search Console"),"  with an ",(0,o.kt)("inlineCode",{parentName:"p"},"https://")," URL or with the domain name provider verification method ",(0,o.kt)("strong",{parentName:"p"},"before you can proceed"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(97039).Z,width:"836",height:"342"})),(0,o.kt)("p",null,"Add your domain to your ",(0,o.kt)("a",{parentName:"p",href:"https://www.google.com/webmasters/tools"},"Search Console")," properties:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(6561).Z,width:"1171",height:"630"})),(0,o.kt)("p",null,"You can now add a HTML Tag to your Discourse page template to verify your ownership over the domain. To do this copy the meta tag Google provides for you:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(87364).Z,width:"1018",height:"422"})),(0,o.kt)("p",null,"Go to the Discourse Admin and go to the following page: ",(0,o.kt)("inlineCode",{parentName:"p"},"Admin>Customize>Themes"),", then select ",(0,o.kt)("strong",{parentName:"p"},"Components"),". Click on ",(0,o.kt)("strong",{parentName:"p"},"Install"),", then ",(0,o.kt)("strong",{parentName:"p"},"+ Create new"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(71407).Z,width:"967",height:"415"})),(0,o.kt)("p",null,"Give it a meaningful name (i.e. ",(0,o.kt)("inlineCode",{parentName:"p"},"GoogleSearchConsoleVerification"),"):"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(58572).Z,width:"941",height:"345"})),(0,o.kt)("p",null,"In your new component, select ",(0,o.kt)("strong",{parentName:"p"},"Edit CSS/HTML"),", under ",(0,o.kt)("strong",{parentName:"p"},"Custom CSS/HTML"),". In the ",(0,o.kt)("inlineCode",{parentName:"p"},"</head>")," section, paste the HTML tag generated by GSC Verification Wizard, then Save this change:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(4103).Z,width:"951",height:"271"})),(0,o.kt)("p",null,"Back in the Theme menu add your new component to your default Discourse theme:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(66928).Z,width:"946",height:"361"})),(0,o.kt)("p",null,"Back in GSC click on ",(0,o.kt)("strong",{parentName:"p"},"Verify")," to add your domain to your properties:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(25645).Z,width:"1154",height:"359"})),(0,o.kt)("p",null,"Back in the OAuth2 configuration you can now add your verified domain without further issues!"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Using OAuth2 with Discourse",src:n(17132).Z,width:"808",height:"303"})))}p.isMDXComponent=!0},51791:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_01-c6d69f9736dec9d1bb88c9480f608efa.png"},8964:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_02-b1d33314cc5d0177ecf1ebc9aac56f9e.png"},54735:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_03-093957f88796a7f74c28842734f39318.png"},67632:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_04-043e7386864b2d72a955b1aef5a368e9.png"},40211:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_05-17f90df083721b64f4e225ea068c733b.png"},17135:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_06-5bbab1b40102a4a9fcc5e39808ad02f1.png"},36925:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_07-d961cef03f81c602c83f072a83445787.png"},46708:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_08-c6d2aa8c9fd1fce6725aa4b156a587e2.png"},8664:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_09-6c1e5775a506a978177fa9b0bf6ea569.png"},76952:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_10-c8c08b16fd03087993117fb285fa2740.png"},97039:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_11-deac2aaae31bae2b06e2181fa1f646de.png"},6561:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_12-2879d5d2c00ba4041e0a1784cffb4757.png"},87364:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_13-a4f909f8d32175c964188952e0480330.png"},71407:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_14-f0552d85b1deac48888e07e9bbca100b.png"},58572:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_15-93be24ff3c4affdfed904e10d4f1036f.png"},4103:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_16-0130eb802ac2a74be0ddd842e11786a0.png"},66928:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_17-0f00da4fe47cc657b4a091ce3dca3ed9.png"},25645:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_18-0f2d2c64f9b14b087c6848e259b96a6b.png"},17132:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/Discourse_OAuth2_Login_19-d1a4bedc1a68e3d574f5ec6054f6c445.png"},64431:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/photo-kt456d_645dhfh6dgjkhg4_d-b84a4567668b053dbbe126779a4caaae.jpg"}}]);