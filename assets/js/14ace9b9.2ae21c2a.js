"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[8608],{3905:(t,e,a)=>{a.d(e,{Zo:()=>p,kt:()=>k});var i=a(67294);function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function r(t,e){if(null==t)return{};var a,i,n=function(t,e){if(null==t)return{};var a,i,n={},o=Object.keys(t);for(i=0;i<o.length;i++)a=o[i],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)a=o[i],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var l=i.createContext({}),c=function(t){var e=i.useContext(l),a=e;return t&&(a="function"==typeof t?t(e):s(s({},e),t)),a},p=function(t){var e=c(t.components);return i.createElement(l.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},b=i.forwardRef((function(t,e){var a=t.components,n=t.mdxType,o=t.originalType,l=t.parentName,p=r(t,["components","mdxType","originalType","parentName"]),b=c(a),k=n,g=b["".concat(l,".").concat(k)]||b[k]||d[k]||o;return a?i.createElement(g,s(s({ref:e},p),{},{components:a})):i.createElement(g,s({ref:e},p))}));function k(t,e){var a=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var o=a.length,s=new Array(o);s[0]=b;var r={};for(var l in e)hasOwnProperty.call(e,l)&&(r[l]=e[l]);r.originalType=t,r.mdxType="string"==typeof t?t:n,s[1]=r;for(var c=2;c<o;c++)s[c]=a[c];return i.createElement.apply(null,s)}return i.createElement.apply(null,a)}b.displayName="MDXCreateElement"},80828:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var i=a(87462),n=(a(67294),a(3905));const o={sidebar_position:9020,slug:"2020-09-05",title:"Slack Notifications in DevOps",authors:"mpolinowski",tags:["LINUX","Slack"]},s=void 0,r={unversionedId:"DevOps/Zabbix/2020-09-05--slack-notifications-in-devops/index",id:"DevOps/Zabbix/2020-09-05--slack-notifications-in-devops/index",title:"Slack Notifications in DevOps",description:"TST, Hong Kong",source:"@site/docs/DevOps/Zabbix/2020-09-05--slack-notifications-in-devops/index.md",sourceDirName:"DevOps/Zabbix/2020-09-05--slack-notifications-in-devops",slug:"/DevOps/Zabbix/2020-09-05--slack-notifications-in-devops/2020-09-05",permalink:"/docs/DevOps/Zabbix/2020-09-05--slack-notifications-in-devops/2020-09-05",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Zabbix/2020-09-05--slack-notifications-in-devops/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Slack",permalink:"/docs/tags/slack"}],version:"current",sidebarPosition:9020,frontMatter:{sidebar_position:9020,slug:"2020-09-05",title:"Slack Notifications in DevOps",authors:"mpolinowski",tags:["LINUX","Slack"]},sidebar:"tutorialSidebar",previous:{title:"Zabbix Apache 2 Monitor",permalink:"/docs/DevOps/Zabbix/2021-01-14--zabbix-apache2-monitor/2021-10-14"},next:{title:"Zabbix Multi-Tenant NGINX Docker Ingress",permalink:"/docs/DevOps/Zabbix/2020-07-20--zabbix-behind-nginx/2020-07-20"}},l={},c=[{value:"Gitlab",id:"gitlab",level:2},{value:"Zabbix",id:"zabbix",level:2},{value:"Preparing Slack",id:"preparing-slack",level:3},{value:"Configure Zabbix",id:"configure-zabbix",level:3}],p={toc:c};function d(t){let{components:e,...o}=t;return(0,n.kt)("wrapper",(0,i.Z)({},p,o,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"TST, Hong Kong",src:a(74889).Z,width:"1500",height:"622"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#gitlab"},"Gitlab")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#zabbix"},"Zabbix"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#preparing-slack"},"Preparing Slack")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#configure-zabbix"},"Configure Zabbix"))))),(0,n.kt)("h2",{id:"gitlab"},"Gitlab"),(0,n.kt)("p",null,"Start by activating ",(0,n.kt)("strong",{parentName:"p"},"Slack Notifications")," in the Gitlab ",(0,n.kt)("strong",{parentName:"p"},"Admin Area")," under ",(0,n.kt)("em",{parentName:"p"},"Settings/Integrations/Slack notifications"),", e.g. ",(0,n.kt)("inlineCode",{parentName:"p"},"https://gitlab.mydomain.com/admin/application_settings/integrations/slack/edit"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(47603).Z,width:"1198",height:"451"})),(0,n.kt)("p",null,"You can activate all triggers that you need in the same menu scrolling down, as well as designating the Slack channel you want the Gitlab bot to post into for each trigger. On the bottom of the menu you will be asked to add the Slack webhook:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(10408).Z,width:"1211",height:"361"})),(0,n.kt)("p",null," This URL is provided by the Slack App ",(0,n.kt)("a",{parentName:"p",href:"https://slack.com/apps/A0F7XDUAZ-incoming-webhooks"},"Incoming WebHooks")," and will can be copied from the configuration page of the web app:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(65559).Z,width:"937",height:"621"})),(0,n.kt)("h2",{id:"zabbix"},"Zabbix"),(0,n.kt)("h3",{id:"preparing-slack"},"Preparing Slack"),(0,n.kt)("p",null,"Start by creating a Channel for the Zabbix bot:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(18268).Z,width:"1011",height:"567"})),(0,n.kt)("p",null,"Now click to add a new app and click on the link in the top right that leads you to the ",(0,n.kt)("strong",{parentName:"p"},"App Directory")," that will open the Slack webpage inside your default browser. In the top right click on the ",(0,n.kt)("strong",{parentName:"p"},"Build")," tab and then on the big ",(0,n.kt)("strong",{parentName:"p"},"Start Building")," button."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(81437).Z,width:"1051",height:"506"})),(0,n.kt)("p",null,"Give your app a name and assign a workspace then click on ",(0,n.kt)("strong",{parentName:"p"},"Create App"),". In the following list select ",(0,n.kt)("strong",{parentName:"p"},"Bots"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(75436).Z,width:"916",height:"431"})),(0,n.kt)("p",null,"There we need to assign a scope to your bot token. Click on ",(0,n.kt)("strong",{parentName:"p"},"Review Scopes to Add"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(34033).Z,width:"1019",height:"909"})),(0,n.kt)("p",null,"Add the ",(0,n.kt)("inlineCode",{parentName:"p"},"chat.write")," scope and click on ",(0,n.kt)("strong",{parentName:"p"},"Install App to Workspace")," and give permission to your bot to access your workspace. You will now be given a token that you have to copy into the Zabbix interface so that Zabbix will be able to use the bot to send messages to your workspace:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(91368).Z,width:"964",height:"421"})),(0,n.kt)("h3",{id:"configure-zabbix"},"Configure Zabbix"),(0,n.kt)("p",null,"Open the Zabbix dashboard, enter the ",(0,n.kt)("strong",{parentName:"p"},"Media types")," configuration and select the ",(0,n.kt)("strong",{parentName:"p"},"Slack")," media type:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(72317).Z,width:"926",height:"566"})),(0,n.kt)("p",null,"Copy your bot token in to the ",(0,n.kt)("inlineCode",{parentName:"p"},"bot_token")," field and click on ",(0,n.kt)("strong",{parentName:"p"},"Update"),". To ",(0,n.kt)("strong",{parentName:"p"},"Test")," the bot we need to set the channel we want to bot to post into. Choose the channel you created in Slack earlier. And add your Zabbix bot to the channel in Slack! And you can copy your Zabbix dashboard URL into the ",(0,n.kt)("inlineCode",{parentName:"p"},"zabbix_url")," or create a global variable for it."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(98887).Z,width:"1245",height:"747"})),(0,n.kt)("p",null,"When you click on ",(0,n.kt)("strong",{parentName:"p"},"Test")," - back in the Zabbix dashboard - you will be asked to fill out a few more of the fields. Just type the number ",(0,n.kt)("inlineCode",{parentName:"p"},"1")," into all of them except the ",(0,n.kt)("inlineCode",{parentName:"p"},"zabbix_url")," that should be the URL to your Zabbix dashboard."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(61788).Z,width:"1079",height:"747"})),(0,n.kt)("p",null,"Great! Now we can add the Slack notification as a ",(0,n.kt)("strong",{parentName:"p"},"Media Type")," inside our user notification settings:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(8285).Z,width:"990",height:"666"})),(0,n.kt)("p",null,"Make sure that reporting problems to Zabbix Administrators is activated:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(71229).Z,width:"1322",height:"424"})))}d.isMDXComponent=!0},47603:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_01-2bd9c4dd6724612a39b5d2eacf9a80f9.png"},10408:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_02-6728fc534b7309a03f8d6e3728ad0900.png"},65559:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_03-e5657bb50cccd0a17aa88d4c251eb818.png"},18268:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_11-33521b9ac5b36bb430b15d1987a31f34.png"},81437:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_12-d92c2c48c30ff2d87853c968a1f974ee.png"},75436:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_13-8d62ed4498e1afe805e5f15ddbb3c1ac.png"},34033:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_14-d98d58514269dccff780811eaaea628b.png"},91368:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_15-0866ef4d7130271be9c4117042ee39f7.png"},72317:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_16-abf3506e81714ca945a24e8678608b86.png"},98887:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_17-2f89e3cb5614b349b99b67fa07fced7f.png"},61788:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_18-2e54a5741a91c746b5f12ef4bb4999b4.png"},8285:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_19-53168caeaf74e24f309ab31eca6716d8.png"},71229:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_20-0e0d53485812b360facf27c890c46277.png"},74889:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-d8b333d1f9ddf34ac7392aef86b14c83.jpg"}}]);