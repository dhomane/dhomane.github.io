"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[59460],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>c});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),d=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=d(n),c=l,k=m["".concat(i,".").concat(c)]||m[c]||u[c]||r;return n?a.createElement(k,s(s({ref:t},p),{},{components:n})):a.createElement(k,s({ref:t},p))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,s=new Array(r);s[0]=m;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:l,s[1]=o;for(var d=2;d<r;d++)s[d]=n[d];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},74972:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var a=n(87462),l=(n(67294),n(3905));const r={sidebar_position:9070,slug:"2020-11-21",title:"Ansible Vault, Modules & Roles",authors:"mpolinowski",tags:["LINUX","Ansible"]},s=void 0,o={unversionedId:"DevOps/Ansible/2020-11-21--ansible-modules-and-roles/index",id:"DevOps/Ansible/2020-11-21--ansible-modules-and-roles/index",title:"Ansible Vault, Modules & Roles",description:"Shenzhen, China",source:"@site/docs/DevOps/Ansible/2020-11-21--ansible-modules-and-roles/index.md",sourceDirName:"DevOps/Ansible/2020-11-21--ansible-modules-and-roles",slug:"/DevOps/Ansible/2020-11-21--ansible-modules-and-roles/2020-11-21",permalink:"/docs/DevOps/Ansible/2020-11-21--ansible-modules-and-roles/2020-11-21",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Ansible/2020-11-21--ansible-modules-and-roles/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Ansible",permalink:"/docs/tags/ansible"}],version:"current",sidebarPosition:9070,frontMatter:{sidebar_position:9070,slug:"2020-11-21",title:"Ansible Vault, Modules & Roles",authors:"mpolinowski",tags:["LINUX","Ansible"]},sidebar:"tutorialSidebar",previous:{title:"Ansible for Docker Deployment",permalink:"/docs/DevOps/Ansible/2020-11-22--ansible-and-docker/2020-11-22"},next:{title:"Ansible Copy Cheat Sheet",permalink:"/docs/DevOps/Ansible/2020-11-20--ansible-copy-cheat-sheet/2020-11-20"}},i={},d=[{value:"Ansible Vault",id:"ansible-vault",level:2},{value:"Ansible Modules",id:"ansible-modules",level:2},{value:"Setup Module",id:"setup-module",level:3},{value:"File Module",id:"file-module",level:3},{value:"Shell Module",id:"shell-module",level:3},{value:"Ansible Galaxy",id:"ansible-galaxy",level:2},{value:"Directory Structure of an Ansible Project",id:"directory-structure-of-an-ansible-project",level:3},{value:"defaults",id:"defaults",level:4},{value:"vars",id:"vars",level:4},{value:"files",id:"files",level:4},{value:"handlers",id:"handlers",level:4},{value:"meta",id:"meta",level:4},{value:"tasks",id:"tasks",level:4},{value:"templates",id:"templates",level:4},{value:"Downloading a Role",id:"downloading-a-role",level:3},{value:"Defaults",id:"defaults-1",level:4},{value:"Handlers",id:"handlers-1",level:4},{value:"Tasks",id:"tasks-1",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Ansible is using the wrong Python interpreter",id:"ansible-is-using-the-wrong-python-interpreter",level:3}],p={toc:d};function u(e){let{components:t,...r}=e;return(0,l.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Shenzhen, China",src:n(32062).Z,width:"1500",height:"520"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#ansible-vault"},"Ansible Vault")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#ansible-modules"},"Ansible Modules"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#setup-module"},"Setup Module")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#file-module"},"File Module")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#shell-module"},"Shell Module")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#ansible-galaxy"},"Ansible Galaxy"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#directory-structure-of-an-ansible-project"},"Directory Structure of an Ansible Project"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#defaults"},"defaults")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#vars"},"vars")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#files"},"files")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#handlers"},"handlers")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#meta"},"meta")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#tasks"},"tasks")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#templates"},"templates")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#downloading-a-role"},"Downloading a Role"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#defaults"},"Defaults")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#handlers"},"Handlers")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#tasks"},"Tasks")))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#troubleshooting"},"Troubleshooting"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#ansible-is-using-the-wrong-python-interpreter"},"Ansible is using the wrong Python interpreter"))))),(0,l.kt)("h2",{id:"ansible-vault"},"Ansible Vault"),(0,l.kt)("p",null,"Store secrets inside an encrypted vault file instead of adding them in clear text inside your playbooks:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ansible-vault create vault.yml\n")),(0,l.kt)("p",null,"This command will create the vault file and ask you for a password. Once the password is assigned you can start adding secrets to the vault in YAML formatting - e.g. ",(0,l.kt)("inlineCode",{parentName:"p"},"password: secretpassword"),". Exit the text editor by pressing escape followed by the three keys ",(0,l.kt)("inlineCode",{parentName:"p"},":wq"),". Once the file is closed it is encrypted and becomes unreadable:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"cat vault.yml\n\n$ANSIBLE_VAULT;1.1;AES256\n34376565356336313537633532346238633365396666616564346638393133323033343830646635\n3066336664366461323832333939303834303435313732650a306430343532343163666131666236\n64383239376532386435303431353862373734363635653030663835383933633638353765646361\n3335373030663461350a633662316437323239636663353136623231636533653038303465633531\n64366139303963393534613639626430663639366165663731353736666363313134\n")),(0,l.kt)("p",null,"To read the content of a vault file type use the view command and type in the password you used when creating the vault file:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ansible-vault view vault.yml\n")),(0,l.kt)("p",null,"To use a playbook that contains a reference to an encrypted secret, you have to execute it with the following flag:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ansible-playbook my-playbook.yml --ask-vault-pass\n")),(0,l.kt)("h2",{id:"ansible-modules"},"Ansible Modules"),(0,l.kt)("p",null,"In the previous step I already used a couple of modules like:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Apt Module"),(0,l.kt)("li",{parentName:"ul"},"Service Module"),(0,l.kt)("li",{parentName:"ul"},"Copy Module"),(0,l.kt)("li",{parentName:"ul"},"User Module"),(0,l.kt)("li",{parentName:"ul"},"Command Module")),(0,l.kt)("h3",{id:"setup-module"},"Setup Module"),(0,l.kt)("p",null,"You can execute the Setup module ad hoc by running the following command on your host:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ansible 192.168.2.111 -m setup\n")),(0,l.kt)("p",null,"It will return an extensive list with system hard- and software information from your host system."),(0,l.kt)("h3",{id:"file-module"},"File Module"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ansible-doc file\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Examples"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"- name: Change file ownership, group and permissions\n  file:\n    path: /etc/foo.conf\n    owner: foo\n    group: foo\n    mode: '0644'\n\n- name: Give insecure permissions to an existing file\n  file:\n    path: /work\n    owner: root\n    group: root\n    mode: '1777'\n\n- name: Create a symbolic link\n  file:\n    src: /file/to/link/to\n    dest: /path/to/symlink\n    owner: foo\n    group: foo\n    state: link\n\n- name: Create two hard links\n  file:\n    src: '/tmp/{{ item.src }}'\n    dest: '{{ item.dest }}'\n    state: hard\n  loop:\n    - { src: x, dest: y }\n    - { src: z, dest: k }\n\n- name: Create a directory if it does not exist\n  file:\n    path: /etc/some_directory\n    state: directory\n    mode: '0755'\n\n- name: Recursively change ownership of a directory\n  file:\n    path: /etc/foo\n    state: directory\n    recurse: yes\n    owner: foo\n    group: foo\n\n- name: Remove file (delete file)\n  file:\n    path: /etc/foo.txt\n    state: absent\n")),(0,l.kt)("h3",{id:"shell-module"},"Shell Module"),(0,l.kt)("p",null,"Execute shell commands on your host system through Ansible playbooks or ad hoc commands:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'ansible 192.168.2.* -m shell -a "tail /var/log/nginx/access.log | grep 192.168.2.21"\n')),(0,l.kt)("h2",{id:"ansible-galaxy"},"Ansible Galaxy"),(0,l.kt)("p",null,"Ansible Galaxy was built as a repository for roles, ",(0,l.kt)("inlineCode",{parentName:"p"},"ansible-galaxy")," exists to aid in installing and creating them."),(0,l.kt)("h3",{id:"directory-structure-of-an-ansible-project"},"Directory Structure of an Ansible Project"),(0,l.kt)("p",null,"We can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"init")," command to initialize a role:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ansible-galaxy init test\n")),(0,l.kt)("p",null,"A role\u2019s directory structure consists of ",(0,l.kt)("inlineCode",{parentName:"p"},"defaults"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"vars"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"files"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"handlers"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"meta"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"tasks"),", and templates:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"/opt/ansible/\n\u2514\u2500\u2500 roles\n    \u2514\u2500\u2500 test\n        \u251c\u2500\u2500 .travis.yml\n        \u251c\u2500\u2500 defaults\n        \u2502  \u2514\u2500\u2500 main.yml\n        \u251c\u2500\u2500 files\n        \u251c\u2500\u2500 handlers\n        \u2502  \u2514\u2500\u2500 main.yml\n        \u251c\u2500\u2500 meta\n        \u2502  \u2514\u2500\u2500 main.yml\n        \u251c\u2500\u2500 README.md\n        \u251c\u2500\u2500 tasks\n        \u2502  \u2514\u2500\u2500 main.yml\n        \u251c\u2500\u2500 templates\n        \u251c\u2500\u2500 tests\n        \u2502  \u251c\u2500\u2500 inventory\n        \u2502  \u2514\u2500\u2500 test.yml\n        \u2514\u2500\u2500 vars\n           \u2514\u2500\u2500 main.yml\n")),(0,l.kt)("h4",{id:"defaults"},"defaults"),(0,l.kt)("p",null,"Within defaults, there is a main.yml file with the default variables used by a role. For example you can set user names, passwords or version numbers:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},"---\nnginx_default_release: '1.18.0-6ubuntu2'\n\nnginx_user: 'nginx'\n")),(0,l.kt)("h4",{id:"vars"},"vars"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"vars")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"defaults")," hold variables - but variables in ",(0,l.kt)("inlineCode",{parentName:"p"},"vars")," have a higher priority. Variables in ",(0,l.kt)("inlineCode",{parentName:"p"},"defaults")," have the lowest priority of any variables available."),(0,l.kt)("h4",{id:"files"},"files"),(0,l.kt)("p",null,"files is where you put files that need to be added to the machine being provisioned, without modification. Most of the time, files in files are referenced by copy tasks."),(0,l.kt)("h4",{id:"handlers"},"handlers"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"handlers")," usually contain targets for ",(0,l.kt)("inlineCode",{parentName:"p"},"notify")," directives, and are almost always associated with services."),(0,l.kt)("h4",{id:"meta"},"meta"),(0,l.kt)("p",null,"Meta data of an Ansible role consists of attributes such as ",(0,l.kt)("inlineCode",{parentName:"p"},"author"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"supported platforms"),", and ",(0,l.kt)("inlineCode",{parentName:"p"},"dependencies"),"."),(0,l.kt)("h4",{id:"tasks"},"tasks"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"tasks")," hold a series of Ansible plays to install, configure, and run software."),(0,l.kt)("h4",{id:"templates"},"templates"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"templates")," is similar to ",(0,l.kt)("inlineCode",{parentName:"p"},"files")," except that templates support modification. Modifications are achieved through the ",(0,l.kt)("a",{parentName:"p",href:"http://jinja.pocoo.org/docs/dev/"},"Jinja2")," templating language."),(0,l.kt)("h3",{id:"downloading-a-role"},"Downloading a Role"),(0,l.kt)("p",null,"We can download ready to use roles for common problems from ",(0,l.kt)("a",{parentName:"p",href:"https://galaxy.ansible.com/geerlingguy/docker"},"Ansible Galaxy"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ansible-galaxy install geerlingguy.docker\nmv /root/.ansible/roles/geerlingguy.docker /opt/ansible/roles/docker\n")),(0,l.kt)("p",null,"This will install the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"}," /opt/ansible/roles/docker\n                    \u251c\u2500\u2500 defaults\n                    \u2502  \u2514\u2500\u2500 main.yml\n                    \u251c\u2500\u2500 handlers\n                    \u2502  \u2514\u2500\u2500 main.yml\n                    \u2514\u2500\u2500 tasks\n                        \u251c\u2500\u2500 docker-compose.yml\n                        \u251c\u2500\u2500 docker-users.yml\n                        \u251c\u2500\u2500 main.yml\n                        \u251c\u2500\u2500 setup-Debian.yml\n                        \u2514\u2500\u2500 setup-RedHat.yml\n")),(0,l.kt)("h4",{id:"defaults-1"},"Defaults"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"cat docker/defaults/main.yml\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},"---\n# Edition can be one of: 'ce' (Community Edition) or 'ee' (Enterprise Edition).\ndocker_edition: 'ce'\ndocker_package: 'docker-{{ docker_edition }}'\ndocker_package_state: present\n\n# Service options.\ndocker_service_state: started\ndocker_service_enabled: true\ndocker_restart_handler_state: restarted\n\n# Docker Compose options.\ndocker_install_compose: true\ndocker_compose_version: '1.26.0'\ndocker_compose_path: /usr/local/bin/docker-compose\n\n# Used only for Debian/Ubuntu. Switch 'stable' to 'edge' if needed.\ndocker_apt_release_channel: stable\ndocker_apt_arch: amd64\ndocker_apt_repository: 'deb [arch={{ docker_apt_arch }}] https://download.docker.com/linux/{{ ansible_distribution | lower }} {{ ansible_distribution_release }} {{ docker_apt_release_channel }}'\ndocker_apt_ignore_key_error: true\ndocker_apt_gpg_key: https://download.docker.com/linux/{{ ansible_distribution | lower }}/gpg\n\n# Used only for RedHat/CentOS/Fedora.\ndocker_yum_repo_url: https://download.docker.com/linux/{{ (ansible_distribution == \"Fedora\") | ternary(\"fedora\",\"centos\") }}/docker-{{ docker_edition }}.repo\ndocker_yum_repo_enable_edge: '0'\ndocker_yum_repo_enable_test: '0'\ndocker_yum_gpg_key: https://download.docker.com/linux/centos/gpg\n\n# A list of users who will be added to the docker group.\ndocker_users: []\n")),(0,l.kt)("h4",{id:"handlers-1"},"Handlers"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"cat docker/handlers/main.yml\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},"---\n- name: restart docker\n  service: 'name=docker state={{ docker_restart_handler_state }}'\n")),(0,l.kt)("h4",{id:"tasks-1"},"Tasks"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"cat docker/tasks/main.yml\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},"---\n# Uninstall old Docker Versions, Install dependencies, Add Docker Repository to APT/YUM\n- include_tasks: setup-RedHat.yml\n  when: ansible_os_family == 'RedHat'\n\n- include_tasks: setup-Debian.yml\n  when: ansible_os_family == 'Debian'\n\n- name: Install Docker.\n  package:\n    name: '{{ docker_package }}'\n    state: '{{ docker_package_state }}'\n  notify: restart docker\n\n- name: Ensure Docker is started and enabled at boot.\n  service:\n    name: docker\n    state: '{{ docker_service_state }}'\n    enabled: '{{ docker_service_enabled }}'\n\n- name: Ensure handlers are notified now to avoid firewall conflicts.\n  meta: flush_handlers\n\n- include_tasks: docker-compose.yml\n  when: docker_install_compose | bool\n\n- include_tasks: docker-users.yml\n  when: docker_users | length > 0\n")),(0,l.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,l.kt)("h3",{id:"ansible-is-using-the-wrong-python-interpreter"},"Ansible is using the wrong Python interpreter"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ImportError: No module named pkg_resources\nfailed: [test_server] (item={\'name\': \'setuptools\'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "setuptools"}, "msg": "Failed to import the required Python library (setuptools) on Tomcat\'s Python /usr/bin/python. Please read module documentation and install in the appropriate location. If the required library is installed, but Ansible is using the wrong Python interpreter, please consult the documentation on ansible_python_interpreter"}\n')),(0,l.kt)("p",null,"Try re-running the command but add the interpreter explicitly:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ansible-playbook install_docker.yml -e 'ansible_python_interpreter=/usr/bin/python3'\n")),(0,l.kt)("p",null,"When this solves your issue, add the information to your inventory:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cfg"},"# Example of setting a group of hosts to use Python3\n[py3-hosts]\ndebian10\ncentos7\n\n[py3-hosts:vars]\nansible_python_interpreter=/usr/bin/python3\n")))}u.isMDXComponent=!0},32062:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-2215e4912b7f3d1beed1d8b83bac94aa.jpg"}}]);