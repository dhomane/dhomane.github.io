"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[37851],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>d});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(t),d=a,h=m["".concat(l,".").concat(d)]||m[d]||u[d]||o;return t?r.createElement(h,i(i({ref:n},p),{},{components:t})):r.createElement(h,i({ref:n},p))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},96671:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=t(87462),a=(t(67294),t(3905));const o={sidebar_position:7020,slug:"2020-10-02",title:"Installing Wazuh with Docker Compose",authors:"mpolinowski",tags:["LINUX","Docker","Wazuh"]},i=void 0,s={unversionedId:"DevOps/Provisioning/2020-10-02--installing-wazuh-in-docker/index",id:"DevOps/Provisioning/2020-10-02--installing-wazuh-in-docker/index",title:"Installing Wazuh with Docker Compose",description:"Victoria Harbour, Hong Kong",source:"@site/docs/DevOps/Provisioning/2020-10-02--installing-wazuh-in-docker/index.md",sourceDirName:"DevOps/Provisioning/2020-10-02--installing-wazuh-in-docker",slug:"/DevOps/Provisioning/2020-10-02--installing-wazuh-in-docker/2020-10-02",permalink:"/docs/DevOps/Provisioning/2020-10-02--installing-wazuh-in-docker/2020-10-02",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Provisioning/2020-10-02--installing-wazuh-in-docker/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Docker",permalink:"/docs/tags/docker"},{label:"Wazuh",permalink:"/docs/tags/wazuh"}],version:"current",sidebarPosition:7020,frontMatter:{sidebar_position:7020,slug:"2020-10-02",title:"Installing Wazuh with Docker Compose",authors:"mpolinowski",tags:["LINUX","Docker","Wazuh"]},sidebar:"tutorialSidebar",previous:{title:"File Transfer Tool in Node.js",permalink:"/docs/DevOps/Provisioning/2021-01-22-file-transfer-tools-in-nodejs/2021-01-22"},next:{title:"Installing OpenProject with Docker Compose",permalink:"/docs/DevOps/Provisioning/2020-10-01--installing-openproject-in-docker/2020-10-01"}},l={},c=[{value:"Docker Compose",id:"docker-compose",level:2},{value:"Docker Compose File",id:"docker-compose-file",level:2}],p={toc:c};function u(e){let{components:n,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Victoria Harbour, Hong Kong",src:t(61612).Z,width:"1500",height:"509"})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#docker-compose"},"Docker Compose")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#docker-compose-file"},"Docker Compose File"))),(0,a.kt)("h2",{id:"docker-compose"},"Docker Compose"),(0,a.kt)("p",null,"First, you must clone the ",(0,a.kt)("a",{parentName:"p",href:"https://wazuh.com/"},"Wazuh")," repository:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/wazuh/wazuh-docker.git -b v3.13.1_7.8.0 --single-branch\n")),(0,a.kt)("p",null,"Start ",(0,a.kt)("strong",{parentName:"p"},"Wazuh"),", ",(0,a.kt)("strong",{parentName:"p"},"Elastic Stack")," and ",(0,a.kt)("strong",{parentName:"p"},"Nginx")," using ",(0,a.kt)("inlineCode",{parentName:"p"},"docker-compose"),". From the directory where you have the ",(0,a.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Wazuh-kibana container will run multiple queries to Elasticsearch API using curl, to learn when Elasticsearch is up. It is expected to see several Failed to connect to elasticsearch port 9200 log messages, until Elasticsearch is started. Then the set up process will continue normally.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Kibana container can take a few minutes to install Wazuh plugin, this takes place after Optimizing and caching browser bundles... is printed out.")),(0,a.kt)("p",null,"The default login is username ",(0,a.kt)("strong",{parentName:"p"},"foo")," and password ",(0,a.kt)("strong",{parentName:"p"},"bar"),"."),(0,a.kt)("h2",{id:"docker-compose-file"},"Docker Compose File"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},'# Wazuh App Copyright (C) 2020 Wazuh Inc. (License GPLv2)\nversion: \'2\'\n\nservices:\n  wazuh:\n    image: wazuh/wazuh:3.13.1_7.8.0\n    hostname: wazuh-manager\n    restart: always\n    ports:\n      - "1514:1514/udp"\n      - "1515:1515"\n      - "514:514/udp"\n      - "55000:55000"\n\n  elasticsearch:\n    image: wazuh/wazuh-elasticsearch:3.13.1_7.8.0\n    hostname: elasticsearch\n    restart: always\n    ports:\n      - "9200:9200"\n    environment:\n      - "ES_JAVA_OPTS=-Xms1g -Xmx1g"\n      - ELASTIC_CLUSTER=true\n      - CLUSTER_NODE_MASTER=true\n      - CLUSTER_MASTER_NODE_NAME=es01\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    mem_limit: 2g\n\n  kibana:\n    image: wazuh/wazuh-kibana:3.13.1_7.8.0\n    hostname: kibana\n    restart: always\n    depends_on:\n      - elasticsearch\n    links:\n      - elasticsearch:elasticsearch\n      - wazuh:wazuh\n\n  nginx:\n    image: wazuh/wazuh-nginx:3.13.1_7.8.0\n    hostname: nginx\n    restart: always\n    environment:\n      - NGINX_PORT=443\n      - NGINX_CREDENTIALS\n    ports:\n      - "96:80"\n      - "9696:443"\n    depends_on:\n      - kibana\n    links:\n      - kibana:kibana#\n')))}u.isMDXComponent=!0},61612:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-b57dcf7a42ddd712383aadde6d3ef4c8.jpg"}}]);