"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[87636],{3905:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>u});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),m=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},h=function(e){var t=m(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),c=m(a),u=o,d=c["".concat(s,".").concat(u)]||c[u]||p[u]||r;return a?n.createElement(d,i(i({ref:t},h),{},{components:a})):n.createElement(d,i({ref:t},h))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var m=2;m<r;m++)i[m]=a[m];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},50623:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>m});var n=a(87462),o=(a(67294),a(3905));const r={sidebar_position:7090,slug:"2019-02-11",title:"Loxone Miniserver",authors:"mpolinowski",tags:["IoT","Smarthome"]},i=void 0,l={unversionedId:"IoT-and-Machine-Learning/Home_Automation/2019-02-11--loxone-miniserver/index",id:"IoT-and-Machine-Learning/Home_Automation/2019-02-11--loxone-miniserver/index",title:"Loxone Miniserver",description:"Shenzhen, China",source:"@site/docs/IoT-and-Machine-Learning/Home_Automation/2019-02-11--loxone-miniserver/index.mdx",sourceDirName:"IoT-and-Machine-Learning/Home_Automation/2019-02-11--loxone-miniserver",slug:"/IoT-and-Machine-Learning/Home_Automation/2019-02-11--loxone-miniserver/2019-02-11",permalink:"/docs/IoT-and-Machine-Learning/Home_Automation/2019-02-11--loxone-miniserver/2019-02-11",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/IoT-and-Machine-Learning/Home_Automation/2019-02-11--loxone-miniserver/index.mdx",tags:[{label:"IoT",permalink:"/docs/tags/io-t"},{label:"Smarthome",permalink:"/docs/tags/smarthome"}],version:"current",sidebarPosition:7090,frontMatter:{sidebar_position:7090,slug:"2019-02-11",title:"Loxone Miniserver",authors:"mpolinowski",tags:["IoT","Smarthome"]},sidebar:"tutorialSidebar",previous:{title:"A Mock REST API in Node-RED and Docker",permalink:"/docs/IoT-and-Machine-Learning/Home_Automation/2020-09-15--mock-rest-api-with-nodered/2020-09-16"},next:{title:"Podman Homebridge to MQTT",permalink:"/docs/IoT-and-Machine-Learning/Home_Automation/2019-12-01--podman-hombridge-to-mqtt/2019-12-01"}},s={},m=[{value:"Homeautomation Miniserver",id:"homeautomation-miniserver",level:2},{value:"Installation of the Miniserver",id:"installation-of-the-miniserver",level:3},{value:"Smart Home App and WebUI",id:"smart-home-app-and-webui",level:3},{value:"Control INSTAR IP camera via the Loxone Miniserver",id:"control-instar-ip-camera-via-the-loxone-miniserver",level:3},{value:"Example 1: Triggering an alarm",id:"example-1-triggering-an-alarm",level:4},{value:"Example 2: Go to a saved position",id:"example-2-go-to-a-saved-position",level:4},{value:"Display your camera video on alarm",id:"display-your-camera-video-on-alarm",level:3},{value:"Integrating the alarm output relay of the camera",id:"integrating-the-alarm-output-relay-of-the-camera",level:2},{value:"Integrating the alarm input of the camera",id:"integrating-the-alarm-input-of-the-camera",level:2},{value:"Use the Loxone Miniserver as alarm server",id:"use-the-loxone-miniserver-as-alarm-server",level:2}],h={toc:m};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},h,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Shenzhen, China",src:a(1873).Z,width:"1500",height:"555"})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#homeautomation-miniserver"},"Homeautomation Miniserver"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#installation-of-the-miniserver"},"Installation of the Miniserver")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#smart-home-app-and-webui"},"Smart Home App and WebUI")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#control-instar-ip-camera-via-the-loxone-miniserver"},"Control INSTAR IP camera via the Loxone Miniserver"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#example-1-triggering-an-alarm"},"Example 1: Triggering an alarm")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#example-2-go-to-a-saved-position"},"Example 2: Go to a saved position")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#display-your-camera-video-on-alarm"},"Display your camera video on alarm")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#integrating-the-alarm-output-relay-of-the-camera"},"Integrating the alarm output relay of the camera")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#integrating-the-alarm-input-of-the-camera"},"Integrating the alarm input of the camera")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#use-the-loxone-miniserver-as-alarm-server"},"Use the Loxone Miniserver as alarm server"))),(0,o.kt)("h2",{id:"homeautomation-miniserver"},"Homeautomation Miniserver"),(0,o.kt)("p",null,"The home automation ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/produkte/hausautomation-miniserver/"},"miniserver from Loxone")," connects all smart components in your apartment or house. All strings run together to the Miniserver to enable communication between the individual components: Light, shading, heating, buttons as well as your INSTAR IP camera."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(90337).Z,width:"800",height:"572"})),(0,o.kt)("h3",{id:"installation-of-the-miniserver"},"Installation of the Miniserver"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"First, the Miniserver must be installed and connected in your distributor. The LAN cable must be ",(0,o.kt)("a",{parentName:"li",href:"https://www.loxone.com/dede/kb/inbetriebnahme-miniserver/"},"connected")," to the network router (e.g. Internet W-LAN router) and the miniserver must be connected to power. After approx. 1 minute the Miniserver should ",(0,o.kt)("a",{parentName:"li",href:"https://www.loxone.com/dede/kb/checkliste-miniserver-startet-nicht-mehr/"},"be operational"),":")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Miniserver: The left LED flashes green regularly. The right LED is off.")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To configure the Miniserver you need a PC on which the program ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/produkte/loxone-config/"},"Loxone Config")," is installed. This PC must be connected to the same network router (W-LAN or LAN) to which the Miniserver was connected.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To create a new project in the software by clicking on ",(0,o.kt)("strong",{parentName:"p"},"New Project"),", select the miniserver and enter the appropriate project data in the following input masks."))),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"By clicking on the arrow below the ",(0,o.kt)("em",{parentName:"li"},"Connect")," button in the software, the search dialog can be opened. After the ",(0,o.kt)("a",{parentName:"li",href:"https://www.loxone.com/dede/kb/miniserver-erstkonfiguration/#diagnosenetzwerk"},"Miniserver appears"),", it must be selected and enter the user data - ",(0,o.kt)("strong",{parentName:"li"},"Default: user name: ",(0,o.kt)("inlineCode",{parentName:"strong"},"admin")," and password: ",(0,o.kt)("inlineCode",{parentName:"strong"},"admin")),". By clicking on ",(0,o.kt)("em",{parentName:"li"},"Setup")," you get an overview of the configuration. After confirming this, you will come to the ",(0,o.kt)("strong",{parentName:"li"},"Network Settings")," - specify here a static IP address that is available on your local network.")),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},"As a last point of the initial configuration the just created project must be saved in the Miniserver:")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(90337).Z,width:"800",height:"572"})),(0,o.kt)("h3",{id:"smart-home-app-and-webui"},"Smart Home App and WebUI"),(0,o.kt)("p",null,"From this point it is possible to use the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/produkte/apps/"},"Smart Home App")," to connect to the Miniserver with your mobile phone, tablet, PC as long as you are in your home network. Download the apps directly from the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/support/downloads/"},"here"),", or in the respective APP Store and log in to the Miniserver with the user data that you specified in the steps before during the initial configuration."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(97384).Z,width:"800",height:"642"})),(0,o.kt)("p",null,"The web interface of the miniserver is via the local IP of the server in your network and the login you entered in the setup for the item ",(0,o.kt)("strong",{parentName:"p"},"Visualizations"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(96426).Z,width:"800",height:"686"})),(0,o.kt)("h3",{id:"control-instar-ip-camera-via-the-loxone-miniserver"},"Control INSTAR IP camera via the Loxone Miniserver"),(0,o.kt)("p",null,"In order to control our IP camera via the Loxone server, we need to create a virtual output and assign it a button in the UI and a CGI command for the camera:"),(0,o.kt)("h4",{id:"example-1-triggering-an-alarm"},"Example 1: Triggering an alarm"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(43655).Z,width:"800",height:"729"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Access your ",(0,o.kt)("strong",{parentName:"li"},"Project")," on the Loxone Miniserver and click on ",(0,o.kt)("strong",{parentName:"li"},"Virtual Outputs"),"."),(0,o.kt)("li",{parentName:"ol"},"Now a button will appear at the top of the menu bar where you can create a ",(0,o.kt)("strong",{parentName:"li"},"Virtual Output"),"."),(0,o.kt)("li",{parentName:"ol"},"Clicking on this button opens the configuration page where you can assign a camera to the output via its IP address."),(0,o.kt)("li",{parentName:"ol"},"Then click ",(0,o.kt)("strong",{parentName:"li"},"Virtual Exit Command")," to assign the output a command that you want to send to the camera when you press the button.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(55143).Z,width:"800",height:"490"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Enter a name for the function you want to use with the CGI command. In the example we take the command that triggers an alarm on the camera. ",(0,o.kt)("strong",{parentName:"li"},"Please note")," that this command only works with INSTAR Full HD cameras. However, if you have a camera from another series, you can easily exchange the command for another CGI command for your camera. The command requires the username and password of the administrator user to be appended to the back of the camera - in the example, this is ",(0,o.kt)("em",{parentName:"li"},"username = admin")," and ",(0,o.kt)("em",{parentName:"li"},"password = instar")," (if you select a CGI command here that can turn something on or off on the camera) these are to be entered accordingly with ",(0,o.kt)("strong",{parentName:"li"},"command at ON")," and at ",(0,o.kt)("strong",{parentName:"li"},"command at OFF"),", with the respective parameter.)")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/param.cgi?cmd=pushhostalarm&-usr=admin&-pwd=instar\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Then click on the exit, hold down the left mouse button and drag the object onto the work surface on the right."),(0,o.kt)("li",{parentName:"ol"},"Afterwards we can create a ",(0,o.kt)("strong",{parentName:"li"},"Virtual input")," with which we want to trigger the virtual output.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(98136).Z,width:"800",height:"601"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Virtual input")," to create an input."),(0,o.kt)("li",{parentName:"ol"},"In the opening configuration window you can give a ",(0,o.kt)("strong",{parentName:"li"},"name")," to the input, select it in the ",(0,o.kt)("strong",{parentName:"li"},"Visualization")," (WebUI) and as ",(0,o.kt)("strong",{parentName:"li"},"Input Type")," choose ",(0,o.kt)("strong",{parentName:"li"},"key")," (if you have chosen another CGI command next to the one on the camera) and turns off, you should instead choose a ",(0,o.kt)("strong",{parentName:"li"},"switch")," here)."),(0,o.kt)("li",{parentName:"ol"},"Then pull the Input onto the work area."),(0,o.kt)("li",{parentName:"ol"},"And connect the two elements."),(0,o.kt)("li",{parentName:"ol"},"Save the change by clicking on the floppy disk icon in the top left corner and transfer the program with the ",(0,o.kt)("strong",{parentName:"li"},"Save in Miniserver")," button.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(54608).Z,width:"800",height:"353"})),(0,o.kt)("p",null,"Now when we access the web interface of the miniserver again, we can see that a button has appeared there. If we select this and press it, an ",(0,o.kt)("strong",{parentName:"p"},"Audio Alarm")," is triggered on our camera and thus all programmed alarm actions are started - in the example the Alarm server was contacted."),(0,o.kt)("h4",{id:"example-2-go-to-a-saved-position"},"Example 2: Go to a saved position"),(0,o.kt)("p",null,"For the second example, we can now recycle a lot of the previous one."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(84743).Z,width:"800",height:"598"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"First click on the ",(0,o.kt)("strong",{parentName:"li"},"Virtual output")," that we created for our camera."),(0,o.kt)("li",{parentName:"ol"},"And then on the ",(0,o.kt)("strong",{parentName:"li"},"Virtual Output command")," to add another command.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(98808).Z,width:"800",height:"611"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Here you can store the stored position 1 for the ",(0,o.kt)("strong",{parentName:"li"},"command for ON")," and the stored position 2 for ",(0,o.kt)("strong",{parentName:"li"},"command for OFF"),":")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/param.cgi?cmd=preset&-act=goto&-number=0&-usr=admin&-pwd=instar\n/param.cgi?cmd=preset&-act=goto&-number=1&-usr=admin&-pwd=instar\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"And drag the configured output to the work area.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(4857).Z,width:"800",height:"670"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Now click on ",(0,o.kt)("strong",{parentName:"li"},"Virtual Inputs"),"."),(0,o.kt)("li",{parentName:"ol"},"And on ",(0,o.kt)("strong",{parentName:"li"},"Virtual Inputs"),"."),(0,o.kt)("li",{parentName:"ol"},"As display in the visualization (WebUI) we select a ",(0,o.kt)("strong",{parentName:"li"},"Switch")," here."),(0,o.kt)("li",{parentName:"ol"},"Then pull the entrance onto the work surface."),(0,o.kt)("li",{parentName:"ol"},"And connect both outputs (from the virtual input) to the previously created virtual output."),(0,o.kt)("li",{parentName:"ol"},"Save the settings."),(0,o.kt)("li",{parentName:"ol"},"And transfer the program to the miniserver.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(65797).Z,width:"800",height:"543"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Click the button in the WebUI to pan the camera between the two positions.")),(0,o.kt)("h3",{id:"display-your-camera-video-on-alarm"},"Display your camera video on alarm"),(0,o.kt)("p",null,"To display the camera image in the Loxone Miniservers WebUI, we can add a ",(0,o.kt)("strong",{parentName:"p"},"Custom Intercom")," from the list of ",(0,o.kt)("strong",{parentName:"p"},"Networks"),": "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(61573).Z,width:"800",height:"417"})),(0,o.kt)("p",null,"In the configuration of the ",(0,o.kt)("em",{parentName:"p"},"Intercoms")," enter the JPG path of your camera - this is the IP address of the camera followed by ",(0,o.kt)("inlineCode",{parentName:"p"},"/tmpfs/snap.jpg")," and the administrator login to the camera (example s. below) and then drag it to the desktop:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"http://192.168.2.116/tmpfs/snap.jpg?usr=admin&pwd=instar\n")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(42972).Z,width:"800",height:"330"})),(0,o.kt)("p",null,"For testing, we create again a ",(0,o.kt)("strong",{parentName:"p"},"Virtual input")," in the form of a ",(0,o.kt)("em",{parentName:"p"},"Button")," and connect it to our ",(0,o.kt)("em",{parentName:"p"},"Intercom"),". Save the setting and transfer the program to the Miniserver:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(14558).Z,width:"800",height:"582"})),(0,o.kt)("p",null,"We now have a virtual bell button that when pressed shows the live video of the camera:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(10185).Z,width:"800",height:"597"})),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(60242).Z,width:"800",height:"846"})),(0,o.kt)("p",null,"Now all you have to do is replace this virtual bell with Loxone physical accessories. In the following example we have connected the ",(0,o.kt)("a",{parentName:"p",href:"https://shop.loxone.com/dede/bewegungsmelder.html"},"motion detector")," and the ",(0,o.kt)("a",{parentName:"p",href:"https://shop.loxone.com/dede/loxone-touch.html"},"Touch Control Element")," with the ",(0,o.kt)("em",{parentName:"p"},"Intercom"),". If you operate the control or be detected by the motion detector, the ringer will be immediately resolved and all displays running the Loxone software will show you the live video of the embedded camera:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(70296).Z,width:"800",height:"693"})),(0,o.kt)("p",null,"The output on the right side of the ",(0,o.kt)("em",{parentName:"p"},"Intercoms")," can in turn connect other devices that are to be triggered when ringing."),(0,o.kt)("p",null,"To the output on the right side of the ",(0,o.kt)("em",{parentName:"p"},"Intercom")," you can connect further devices, which are to be triggered during the ringing. In the example we have connected the orientation light of the Touch control. The end result is:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"You press the virtual bell button in the WebUI ",(0,o.kt)("strong",{parentName:"li"},"OR")," you click on the Loxone Touch control ",(0,o.kt)("strong",{parentName:"li"},"OR")," you trigger the Loxone motion detector and the ",(0,o.kt)("em",{parentName:"li"},"Intercom module")," is activated."),(0,o.kt)("li",{parentName:"ol"},"When activated, the miniserver WebUI and the Loxone Smartphone Apps will automatically display the video image of the camera and play a ringtone."),(0,o.kt)("li",{parentName:"ol"},"As an example for another action we have connected the orientation light of the touch control with the ",(0,o.kt)("em",{parentName:"li"},"Intercom")," and see that it is activated when the ",(0,o.kt)("em",{parentName:"li"},"Intercom")," is activated (e.g. you could install a gong here).")),(0,o.kt)("hr",null),(0,o.kt)("br",null),(0,o.kt)("br",null),(0,o.kt)("h2",{id:"integrating-the-alarm-output-relay-of-the-camera"},"Integrating the alarm output relay of the camera"),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"most")," INSTAR IP cameras have an alarm output:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"For indoor cameras (such as the INSTAR IN-8015 FullHD, this is usually port 1 and 2 of the four green connectors on the rear panel of the camera."),(0,o.kt)("li",{parentName:"ol"},"For outdoor cameras, you will usually find the connection on the cable harness of the camera.")),(0,o.kt)("p",null,"We would now like to use this alarm output to report an alarm on the camera in the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/kb/inbetriebnahme-miniserver/"},"Loxone Miniserver")," and trigger a reaction there. In the following example we take the IN-8015 Full HD indoor camera and connect it to the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxwiki.eu/display/LOX/Potentialfrei+und+potentialbehaftet"},"digital input (potential free)")," of the Loxone Miniserver:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(19157).Z,width:"800",height:"450"})),(0,o.kt)("p",null,"In the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/produkte/loxone-config/"},"Loxone Config")," Software, we can now drag the ",(0,o.kt)("strong",{parentName:"p"},"first digital input")," onto the work surface and - for testing - connect it to the orientation light of the ",(0,o.kt)("a",{parentName:"p",href:"https://shop.loxone.com/dede/loxone-touch.html"},"Touch control")," we had previously used:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(41379).Z,width:"800",height:"436"})),(0,o.kt)("p",null,"If we now trigger an alarm on the camera via the ",(0,o.kt)("a",{parentName:"p",href:"#example-1-triggering-an-alarm"},"Loxone WebUI or App")," we want the camera to send a pulse via the ",(0,o.kt)("strong",{parentName:"p"},"alarm output")," to the ",(0,o.kt)("strong",{parentName:"p"},"digital input")," of the Loxone Miniserver. We can set this in the alarm actions in the WebUI of the camera:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(8793).Z,width:"800",height:"540"})),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"duration in seconds")," indicates how long the alarm output relay remains open after an alarm. The 5s set here mean that the orientation lamp lights up for ",(0,o.kt)("inlineCode",{parentName:"p"},"5s")," after an alarm and then goes out again."),(0,o.kt)("hr",null),(0,o.kt)("br",null),(0,o.kt)("br",null),(0,o.kt)("h2",{id:"integrating-the-alarm-input-of-the-camera"},"Integrating the alarm input of the camera"),(0,o.kt)("p",null,"We can now look at the opposite way and address the alarm input of the INSTAR IP camera via the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/kb/inbetriebnahme-miniserver/"},"Loxone Miniserver"),". Therefore we connect the first ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxwiki.eu/display/LOX/Potentialfrei+und+potentialbehaftet"},"digital output")," of the miniserver with the alarm input of the IN-8015 Full HD:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(28152).Z,width:"800",height:"450"})),(0,o.kt)("p",null,"In the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/produkte/loxone-config/"},"Loxone Config")," software we now have to add a ",(0,o.kt)("strong",{parentName:"p"},"button module"),". Make sure that you are on the ",(0,o.kt)("em",{parentName:"p"},"My Project")," tab (1) and then select the button under ",(0,o.kt)("strong",{parentName:"p"},"Insert button")," in the Operation category and place it on the desktop:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(86933).Z,width:"800",height:"592"})),(0,o.kt)("p",null,"Then pull the first ",(0,o.kt)("strong",{parentName:"p"},"Digital output")," onto the work surface and connect it to the output of the button:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(86894).Z,width:"800",height:"272"})),(0,o.kt)("p",null,"You can now use any actuator or sensor as an input - as well as virtual inputs that can be operated via the Loxone App or WebUI. In the example we have - as before - connected the ",(0,o.kt)("a",{parentName:"p",href:"https://shop.loxone.com/dede/bewegungsmelder.html"},"Motion detector")," and the ",(0,o.kt)("a",{parentName:"p",href:"https://shop.loxone.com/dede/loxone-touch.html"},"Touch control")," as well as our virtual bell button to the input of the button."),(0,o.kt)("p",null,"If one of these three elements is now triggered, a pulse is sent to the alarm input of the camera. We can now activate the alarm input again in the Alarm actions in the camera's WebUI:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(53237).Z,width:"800",height:"540"})),(0,o.kt)("p",null,"Note that the relay works in the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/kb/inbetriebnahme-miniserver/"},"Loxone Miniserver")," ",(0,o.kt)("strong",{parentName:"p"},"N.O.")," (",(0,o.kt)("em",{parentName:"p"},"normally open"),"). If you switch the input mode to N.C., you would receive a continuous alarm accordingly! Accept these settings and trigger one of the 3 inputs (motion detector, touch control or the virtual bell) and you will see an alarm input in the Logbook of your camera:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(15478).Z,width:"800",height:"621"})),(0,o.kt)("p",null,"The alarm input then triggers all alarm actions that you have activated in the Alarm actions in the camera's WebUI - in the example above, the Alarm server was contacted."),(0,o.kt)("hr",null),(0,o.kt)("br",null),(0,o.kt)("br",null),(0,o.kt)("h2",{id:"use-the-loxone-miniserver-as-alarm-server"},"Use the Loxone Miniserver as alarm server"),(0,o.kt)("p",null,"All INSTAR HD and Full HD cameras have an Alarm Server Function which can be used to contact an external alarm server via a web request (",(0,o.kt)("em",{parentName:"p"},"HTTP GET")," to the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxwiki.eu/display/LOX/REST+Webservice"},"REST API of the server"),") in case of an alarm on the camera."),(0,o.kt)("p",null,"As receiver for the alarm server request of the camera we can use in the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxone.com/dede/produkte/loxone-config/"},"Loxone Config")," software a ",(0,o.kt)("strong",{parentName:"p"},"Virtual input"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(73023).Z,width:"800",height:"359"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"select the ",(0,o.kt)("strong",{parentName:"li"},"Virtual inputs")," for this."),(0,o.kt)("li",{parentName:"ol"},"click on ",(0,o.kt)("strong",{parentName:"li"},"Virtual input")," to create a new one."),(0,o.kt)("li",{parentName:"ol"},"give the new input a name - this will be needed afterwards for the alarm server request (you should use a simple name, without spaces - or special characters)."),(0,o.kt)("li",{parentName:"ol"},"drag the new input onto the desktop.")),(0,o.kt)("p",null,"You can now connect the new input to anything you want to trigger by the alarm event on the camera. We will use the bell/Intercom we created in a ",(0,o.kt)("a",{parentName:"p",href:"#display-your-camera-video-on-alarm"},"previous step"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(7588).Z,width:"800",height:"371"})),(0,o.kt)("p",null,"Connect the input to the input of the ",(0,o.kt)("em",{parentName:"p"},"Intercom Module"),", save the configuration and transfer it to the Loxone Miniserver."),(0,o.kt)("p",null,"To use this input, we must now configure the Alarm Server on the camera. Therefore we have to know that the ",(0,o.kt)("strong",{parentName:"p"},"Virtual Input")," in the Loxone Miniserver can be reached via the ",(0,o.kt)("a",{parentName:"p",href:"https://www.loxwiki.eu/display/LOX/REST+Webservice"},"REST API")," under the path ",(0,o.kt)("inlineCode",{parentName:"p"},"/dev/sps/io/<Name of the Virtual Input>/"),". This path must be preceded by the IP address of the Loxone Miniserver - e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"192.168.2.58")," - and the state we want to switch the input to must be appended at the end:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"http://192.168.2.58/dev/sps/io/alarmserver/ON")," (permanently on)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"http://192.168.2.58/dev/sps/io/alarmserver/OFF")," (permanently off)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"http://192.168.2.58/dev/sps/io/alarmserver/Pulse")," (briefly on and then off again)")),(0,o.kt)("p",null,"We want the camera to send a pulse to the alarm server only for a short time and it will immediately jump back into the ",(0,o.kt)("strong",{parentName:"p"},"OFF state")," and ",(0,o.kt)("em",{parentName:"p"},"armed")," again for the next alarm. We therefore select the last of the three commands above and enter it into the Web interface of our camera:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(39077).Z,width:"800",height:"683"})),(0,o.kt)("p",null,"Please note that you have to enter the login below to connect to the miniserver via Loxone Config!"),(0,o.kt)("p",null,"Accept these settings and trigger an alarm on the camera - e.g. with the ",(0,o.kt)("a",{parentName:"p",href:"#example-1-triggering-an-alarm"},"virtual button we created before"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Loxone Homeautomation",src:a(8220).Z,width:"800",height:"807"})),(0,o.kt)("p",null,"The alarm is triggered on the camera and the alarm server is contacted. The Loxone Miniserver receives the message and activates the intercom - on all screens where the ",(0,o.kt)("a",{parentName:"p",href:"#smart-home-app-and-webui"},"Loxone WebUI or App")," is opened, the live video of the triggering camera is shown to you immediately."))}p.isMDXComponent=!0},90337:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_01-4972e9848766cd5a21965f66a33a3481.png"},97384:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_02-0cd9d3401931bb00a018dcb66222fac6.png"},96426:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_03-9e3b2c8df03eb022e55f4a451e38c7d9.png"},43655:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_04-af099c19c8a0f4798fa4eb13bb9e3a4d.png"},55143:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_05-a3b0a7733ed796a57084ccbe33833329.png"},98136:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_06-1ddbcfcce7964702e836f3f7e33a82fc.png"},54608:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_07-cca325899a58954f2717a918d9e7f95d.png"},84743:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_08-5f892198c02a952dc094c31ad9d82630.png"},98808:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_09-aa9b29db7103ee6d79a716342bc74221.png"},4857:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_10-cc1cd0714f69e8446d356c0d7ceb8432.png"},65797:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_11-13cd22153d099857a6ee23b152770f47.png"},61573:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_12-6641415661cb0953373085246c8667ac.png"},42972:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_13-673981e79c6a7dafe6dce70e3071b391.png"},14558:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_14-5ad258cf46b02eed13bd5a6662171347.png"},10185:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_15-95dadd620e95660d5059ac2379ca14be.png"},60242:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_16-a8cb4df3b2f4c7cfb2bc3f0635724bca.png"},70296:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_17-287679898e02880c78b5ad4da3fdd414.png"},19157:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_18-e3b492a4426d92f2b3a3418b283c1bd6.png"},41379:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_19-851550bd1d90f5a2b58fa7de330edd99.png"},8793:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_20-6dea0473a51daa8e6b8a1865e1cd4cc3.png"},28152:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_21-eff7c3117e52255c976f32651585ab19.png"},86933:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_22-31a850090e4db56409dbb368fb7be772.png"},86894:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_23-d45bfaebb1fc86b82d4d9e6091574ba4.png"},53237:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_24-07e12660faf4782b6851ea4338c05a8e.png"},15478:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_25-883ac14cb4624ec93a2eaf9315f96458.png"},73023:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_26-5d52bc9b75a98498456148db03bec47b.png"},7588:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_27-c35fadde2eaeddb8d0e5081999585c13.png"},39077:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_28-5fd9d2977e90f5d809f702e31c8b6a10.png"},8220:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Loxone_29-4da8f3a4d36c527636634ff76811eca7.png"},1873:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/photo-kt456d_645dhfh6dgjkhg4_d-b17d122b92f3c02ea96be5995443c013.jpg"}}]);