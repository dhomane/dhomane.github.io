"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[95904],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>u});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},p=Object.keys(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},h=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,p=e.originalType,l=e.parentName,h=o(e,["components","mdxType","originalType","parentName"]),c=s(n),u=r,d=c["".concat(l,".").concat(u)]||c[u]||m[u]||p;return n?a.createElement(d,i(i({ref:t},h),{},{components:n})):a.createElement(d,i({ref:t},h))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var p=n.length,i=new Array(p);i[0]=c;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var s=2;s<p;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},64317:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>p,metadata:()=>o,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const p={sidebar_position:9030,slug:"2019-09-15",title:"Updating a Magento Project from PHP v7.0 to v7.3",authors:"mpolinowski",tags:["LINUX","Magento"]},i=void 0,o={unversionedId:"Development/Magento/2019-09-15--updating-from-php70-to-php72/index",id:"Development/Magento/2019-09-15--updating-from-php70-to-php72/index",title:"Updating a Magento Project from PHP v7.0 to v7.3",description:"Katmandu, Nepal",source:"@site/docs/Development/Magento/2019-09-15--updating-from-php70-to-php72/index.mdx",sourceDirName:"Development/Magento/2019-09-15--updating-from-php70-to-php72",slug:"/Development/Magento/2019-09-15--updating-from-php70-to-php72/2019-09-15",permalink:"/docs/Development/Magento/2019-09-15--updating-from-php70-to-php72/2019-09-15",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Magento/2019-09-15--updating-from-php70-to-php72/index.mdx",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Magento",permalink:"/docs/tags/magento"}],version:"current",sidebarPosition:9030,frontMatter:{sidebar_position:9030,slug:"2019-09-15",title:"Updating a Magento Project from PHP v7.0 to v7.3",authors:"mpolinowski",tags:["LINUX","Magento"]},sidebar:"tutorialSidebar",previous:{title:"Working with SQL Dumps",permalink:"/docs/Development/Magento/2019-09-16--working-with-sql-dumps/2019-09-16"},next:{title:"Magento 2 Manual Theme Installation",permalink:"/docs/Development/Magento/2019-09-14--magento-and-themes/2019-09-14"}},l={},s=[{value:"Check your Environment",id:"check-your-environment",level:2},{value:"Install PHP v7.3",id:"install-php-v73",level:2},{value:"Set the Timezone",id:"set-the-timezone",level:3},{value:"Increase PHP memory limit",id:"increase-php-memory-limit",level:3},{value:"Enable opcache.save_comments",id:"enable-opcachesave_comments",level:3},{value:"Switch to your new PHP Version",id:"switch-to-your-new-php-version",level:2},{value:"Checking your Code",id:"checking-your-code",level:2},{value:"mcrypt",id:"mcrypt",level:3},{value:"Eval option for mb_ereg_replace() and mb_eregi_replace()",id:"eval-option-for-mb_ereg_replace-and-mb_eregi_replace",level:3},{value:"Unquoted strings",id:"unquoted-strings",level:3},{value:"png2wbmp() and jpeg2wbmp()",id:"png2wbmp-and-jpeg2wbmp",level:3},{value:"INTL_IDNA_VARIANT_2003 variant",id:"intl_idna_variant_2003-variant",level:3},{value:"__autoload() method",id:"__autoload-method",level:3},{value:"track_errors ini setting and $php_errormsg variable",id:"track_errors-ini-setting-and-php_errormsg-variable",level:3},{value:"create_function() function",id:"create_function-function",level:3},{value:"mbstring.func_overload ini setting",id:"mbstringfunc_overload-ini-setting",level:3},{value:"(unset) cast",id:"unset-cast",level:3},{value:"parse_str() without a second argument",id:"parse_str-without-a-second-argument",level:3},{value:"gmp_random() function",id:"gmp_random-function",level:3},{value:"each() function",id:"each-function",level:3},{value:"assert() with a string argument",id:"assert-with-a-string-argument",level:3},{value:"$errcontext argument of error handlers",id:"errcontext-argument-of-error-handlers",level:3},{value:"read_exif_data() function",id:"read_exif_data-function",level:3},{value:"Re-Deploy Magento",id:"re-deploy-magento",level:2},{value:"Purge Old PHP Version",id:"purge-old-php-version",level:2}],h={toc:s};function m(e){let{components:t,...p}=e;return(0,r.kt)("wrapper",(0,a.Z)({},h,p,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Katmandu, Nepal",src:n(23900).Z,width:"1500",height:"774"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#check-your-environment"},"Check your Environment")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#install-php-v73"},"Install PHP v7.3"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#set-the-timezone"},"Set the Timezone")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#increase-php-memory-limit"},"Increase PHP memory limit")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#enable-opcachesave_comments"},"Enable opcache.save_comments")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#switch-to-your-new-php-version"},"Switch to your new PHP Version")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#checking-your-code"},"Checking your Code"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mcrypt"},"mcrypt")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#eval-option-for-mb_ereg_replace-and-mb_eregi_replace"},"Eval option for mb_ereg_replace() and mb_eregi_replace()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#unquoted-strings"},"Unquoted strings")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#png2wbmp-and-jpeg2wbmp"},"png2wbmp() and jpeg2wbmp()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#intl_idna_variant_2003-variant"},"INTL_IDNA_VARIANT_2003 variant")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#__autoload-method"},"__autoload() method")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#track_errors-ini-setting-and-php_errormsg-variable"},"track_errors ini setting and $php_errormsg variable")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#create_function-function"},"create_function() function")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mbstringfunc_overload-ini-setting"},"mbstring.func_overload ini setting")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#unset-cast"},"(unset) cast")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#parse_str-without-a-second-argument"},"parse_str() without a second argument")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#gmp_random-function"},"gmp_random() function")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#each-function"},"each() function")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#assert-with-a-string-argument"},"assert() with a string argument")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#errcontext-argument-of-error-handlers"},"$errcontext argument of error handlers")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#read_exif_data-function"},"read_exif_data() function")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#re-deploy-magento"},"Re-Deploy Magento"))),(0,r.kt)("h2",{id:"check-your-environment"},"Check your Environment"),(0,r.kt)("p",null,"First check the version of PHP you have installed:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"php -v\nPHP 7.0.4 (cli) (built: Dec 18 2019 15:01:47) ( NTS )\nCopyright (c) 1997-2018 The PHP Group\nZend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies\n    with Zend OPcache v7.0.4, Copyright (c) 1999-2018, by Zend Technologies\n")),(0,r.kt)("p",null,"Then check what modules you are using:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"php -m\n[PHP Modules]\nbcmath\ncalendar\nCore\nctype\ncurl\ndate\ndom\nexif\nfileinfo\nfilter\nftp\ngd\ngettext\nhash\niconv\nintl\njson\nlibxml\nmbstring\nmysqli\nmysqlnd\nopenssl\npcntl\npcre\nPDO\npdo_mysql\nPhar\nposix\nreadline\nReflection\nsession\nshmop\nSimpleXML\nsoap\nsockets\nsodium\nSPL\nstandard\nsysvmsg\nsysvsem\nsysvshm\ntokenizer\nwddx\nxml\nxmlreader\nxmlwriter\nxsl\nZend OPcache\nzip\nzlib\n\n[Zend Modules]\nZend OPcache\n")),(0,r.kt)("p",null,"Note them down, as you will have to install all of them for the new version of PHP that you are going to install."),(0,r.kt)("h2",{id:"install-php-v73"},"Install PHP v7.3"),(0,r.kt)("p",null,"Run below commands to upgrade the current packages to the latest version:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt update \nsudo apt upgrade\n")),(0,r.kt)("p",null,"Now setup PPA on Debian 10. Then import packages signing key. After that configure PPA for the PHP packages on your system:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'sudo apt install ca-certificates apt-transport-https \nwget -q https://packages.sury.org/php/apt.gpg -O- | sudo apt-key add -\necho "deb https://packages.sury.org/php/ buster main" | sudo tee /etc/apt/sources.list.d/php.list\n')),(0,r.kt)("p",null,"Now run the following commands to install PHP 7.3:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt update\nsudo apt install php7.3\n")),(0,r.kt)("p",null,"Install the necessary PHP modules:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install php7.3-cli php7.3-common php7.3-curl php7.3-gd php7.3-json php7.3-mbstring php7.3-mysql php7.3-xml php7.3-bcmath php7.3-gd php7.3-intl php7.3-opcache php7.3-soap\n")),(0,r.kt)("p",null,"Now we need to configure PHP v7.3 - to find out which ",(0,r.kt)("inlineCode",{parentName:"p"},"php.ini")," file is the one that is loaded run ",(0,r.kt)("inlineCode",{parentName:"p"},"php -i"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"php -i\nphpinfo()\nPHP Version => 7.3.26-1+0~20191218.33+debian10~1.gbpb5a34b\n\nSystem => Linux Magento2 4.19.0-6-amd64 #1 SMP Debian 4.19.67-2+deb10u2 (2019-11-11) x86_64\nBuild Date => Dec 18 2019 15:01:47\nServer API => Command Line Interface\nVirtual Directory Support => disabled\nConfiguration File (php.ini) Path => /etc/php/7.3/cli\nLoaded Configuration File => /etc/php/7.3/cli/php.ini\nScan this dir for additional .ini files => /etc/php/7.3/cli/conf.d\nAdditional .ini files parsed => /etc/php/7.3/cli/conf.d/10-mysqlnd.ini,\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note: on my system there was a second configuration file in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/php/7.3/apache2/php.ini"),". In a later step I am going to install NGINX that is going to add more files in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/php/7.3/fpm/php.ini")," and  ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/php/7.3/cli/php.ini"),". The Magento documentation recommend to do all changes to all ",(0,r.kt)("inlineCode",{parentName:"p"},"php.ini")," files on your system.")),(0,r.kt)("p",null,"We can see that the loaded configuration file is ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/php/7.3/cli/php.ini"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nano /etc/php/7.3/cli/php.ini\n")),(0,r.kt)("h3",{id:"set-the-timezone"},"Set the Timezone"),(0,r.kt)("p",null,"Edit the ",(0,r.kt)("inlineCode",{parentName:"p"},"php.ini")," configuration file and update the ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/timezones.php"},"timezone")," value in ",(0,r.kt)("inlineCode",{parentName:"p"},"date.timezone")," setting tag:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'date.timezone = "Europe/Berlin"\n')),(0,r.kt)("h3",{id:"increase-php-memory-limit"},"Increase PHP memory limit"),(0,r.kt)("p",null,"Simply increase the default value to the recommended value:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Compiling code or deploying static assets: ",(0,r.kt)("inlineCode",{parentName:"li"},"756M")),(0,r.kt)("li",{parentName:"ul"},"Installing and updating Magento components from Magento Marketplace: ",(0,r.kt)("inlineCode",{parentName:"li"},"2G")),(0,r.kt)("li",{parentName:"ul"},"Testing: ",(0,r.kt)("inlineCode",{parentName:"li"},"~3-4G"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"memory_limit = 2G\n")),(0,r.kt)("h3",{id:"enable-opcachesave_comments"},"Enable opcache.save_comments"),(0,r.kt)("p",null,"Enable ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/opcache.configuration.php#ini.opcache.save_comments"},"opcache.save_comments")," and it is recommended to enable the ",(0,r.kt)("a",{parentName:"p",href:"http://php.net/manual/en/intro.opcache.php"},"PHP OpCache")," for performance reasons."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"[opcache]\n; Determines if Zend OPCache is enabled\nopcache.save_comments=1\nopcache.enable=1\n")),(0,r.kt)("h2",{id:"switch-to-your-new-php-version"},"Switch to your new PHP Version"),(0,r.kt)("p",null,"To set PHP 7.3 as your active PHP version for CLI and Apache2 disable Apache2 modules for all other installed PHP versions and configure CLI using the update-alternatives command. Run the following commands to make changes."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Apache:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo a2dismod php5.6 php7.1 php7.0   ## Shows error for modules not installed \nsudo a2enmod php7.3\nsudo service apache2 restart\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"CLI:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo update-alternatives --set php /usr/bin/php7.3\nsudo update-alternatives --set phar /usr/bin/phar7.3\nsudo update-alternatives --set phar.phar /usr/bin/phar.phar7.3\nsudo update-alternatives --set phpize /usr/bin/phpize7.3\nsudo update-alternatives --set php-config /usr/bin/php-config7.3\n")),(0,r.kt)("p",null,"Running a PHP version check again should show you that you are now using the updated version:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"php -v\nPHP 7.3.26-1+0~20191218.33+debian10~1.gbpb5a34b (cli) (built: Dec 18 2019 15:01:47) ( NTS )\nCopyright (c) 1997.3018 The PHP Group\nZend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies\n    with Zend OPcache v7.3.26-1+0~20191218.33+debian10~1.gbpb5a34b, Copyright (c) 1999-2018, by Zend Technologies\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"NGINX: ")),(0,r.kt)("p",null,"Go to your NGINX server configuration, e.g.:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nano /etc/nginx/sites-available/default\n")),(0,r.kt)("p",null,"Change the FastCGI backend to use the new PHP-FPM socket, save and exit the file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"location ~ \\.php$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/run/php/php7.3-fpm.sock;\n}\n")),(0,r.kt)("p",null,"Run the configuration test and restart the web server:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nginx -t\nsudo service nginx restart\n")),(0,r.kt)("h2",{id:"checking-your-code"},"Checking your Code"),(0,r.kt)("h3",{id:"mcrypt"},"mcrypt"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration71.deprecated.php"},"mcrypt extension has been deprecated")," in favour of OpenSSL, where it will be removed from the core and into PECL in PHP 7.3. Make sure that your code does not use something like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$initVector = mcrypt_create_iv(mcrypt_get_iv_size(SAFETY_CIPHER, SAFETY_MODE), MCRYPT_RAND);\n$encrypted = mcrypt_encrypt(SAFETY_CIPHER, $key, $password, SAFETY_MODE, $initVector);\necho base64_encode($initVector) . ENCRYPTION_DIVIDER_TOKEN . base64_encode($encrypted) . '<br/>';\necho mcrypt_decrypt(SAFETY_CIPHER, $key, $encrypted, SAFETY_MODE, $initVector) . '<br/>';\n")),(0,r.kt)("h3",{id:"eval-option-for-mb_ereg_replace-and-mb_eregi_replace"},"Eval option for mb_ereg_replace() and mb_eregi_replace()"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration71.deprecated.php"},"e pattern modifier has been deprecated")," for the ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.mb-ereg-replace.php"},"mb_ereg_replace()")," and ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.mb-eregi-replace.php"},"mb_eregi_replace()")," functions."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'mb_eregi_replace ( string $pattern , string $replace , string $string [, string $option = "msri" ] ) : string\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'mb_ereg_replace ( string $pattern , string $replacement , string $string [, string $option = "msr" ] ) : string\n')),(0,r.kt)("h3",{id:"unquoted-strings"},"Unquoted strings"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php"},"Unquoted strings")," that are non-existent global constants are taken to be strings of themselves. This behaviour will now emit an E_WARNING:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"<?php\n\nvar_dump(NONEXISTENT);\n\n/* Output:\nWarning: Use of undefined constant NONEXISTENT - assumed 'NONEXISTENT' (this will throw an Error in a future version of PHP) in %s on line %d\nstring(11) \"NONEXISTENT\"\n*/\n")),(0,r.kt)("h3",{id:"png2wbmp-and-jpeg2wbmp"},"png2wbmp() and jpeg2wbmp()"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.png2wbmp.php"},"png2wbmp()")," and ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.jpeg2wbmp.php"},"jpeg2wbmp()")," functions from the ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.png2wbmp-jpeg2wbmp"},"GD extension have now been deprecated")," and will be removed in the next major version of PHP."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"png2wbmp ( string $pngname , string $wbmpname , int $dest_height , int $dest_width , int $threshold ) : bool\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"jpeg2wbmp ( string $jpegname , string $wbmpname , int $dest_height , int $dest_width , int $threshold ) : bool\n")),(0,r.kt)("h3",{id:"intl_idna_variant_2003-variant"},"INTL_IDNA_VARIANT_2003 variant"),(0,r.kt)("p",null,"The Intl extension has deprecated the INTL_IDNA_VARIANT_2003 variant, which is currently being used as the default for ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.idn-to-ascii.php"},"idn_to_ascii()")," and ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.idn-to-utf8.php"},"idn_to_utf8()"),". PHP 7.4 will see these defaults changed to INTL_IDNA_VARIANT_UTS46, and the ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.png2wbmp-jpeg2wbmp"},"next major version of PHP will remove INTL_IDNA_VARIANT_2003 altogether"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"idn_to_ascii ( string $domain [, int $options = IDNA_DEFAULT [, int $variant = INTL_IDNA_VARIANT_UTS46 [, array &$idna_info ]]] ) : string\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"idn_to_utf8 ( string $domain [, int $options = IDNA_DEFAULT [, int $variant = INTL_IDNA_VARIANT_UTS46 [, array &$idna_info ]]] ) : string\n")),(0,r.kt)("h3",{id:"__autoload-method"},"__autoload() method"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.autoload.php"},"__autoload() method has been deprecated"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"__autoload ( string $class ) : void\n")),(0,r.kt)("h3",{id:"track_errors-ini-setting-and-php_errormsg-variable"},"track_errors ini setting and $php_errormsg variable"),(0,r.kt)("p",null,"When the track_errors ini setting is enabled, a $php_errormsg variable is created in the local scope when a non-fatal error occurs. Given that the preferred way of retrieving such error information is by using ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.error-get-last.php"},"error_get_last()"),", ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.error-get-last.php"},"this feature has been deprecated"),"."),(0,r.kt)("h3",{id:"create_function-function"},"create_function() function"),(0,r.kt)("p",null,"Given the security issues of this function, this dated function ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.create_function-function"},"has now been deprecated"),". The preferred alternative is to use anonymous functions."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"create_function ( string $args , string $code ) : string\n")),(0,r.kt)("h3",{id:"mbstringfunc_overload-ini-setting"},"mbstring.func_overload ini setting"),(0,r.kt)("p",null,"Given the interoperability problems of string-based functions being used in environments with this setting enabled, it has now been deprecated."),(0,r.kt)("h3",{id:"unset-cast"},"(unset) cast"),(0,r.kt)("p",null,"Casting any expression to this type will always result in NULL, and so this superfluous casting type has now been deprecated."),(0,r.kt)("h3",{id:"parse_str-without-a-second-argument"},"parse_str() without a second argument"),(0,r.kt)("p",null,"Without the second argument to ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.parse-str.php"},"parse_str()"),", the query string parameters would populate the local symbol table. Given the security implications of this, using parse_str() without a second argument ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.parse_str-no-second-arg"},"has now been deprecated"),". The function should always be used with two arguments, as the second argument causes the query string to be parsed into an array:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"parse_str ( string $encoded_string [, array &$result ] ) : void\n")),(0,r.kt)("h3",{id:"gmp_random-function"},"gmp_random() function"),(0,r.kt)("p",null,"This ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.gmp-random.php"},"function generates a random number")," based upon a range that is calculated by an unexposed, platform-specific limb size. Because of this, ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.gmp_random-function"},"the function has now been deprecated"),". The preferred way of generating a random number using the GMP extension is by ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.gmp-random-bits.php"},"gmp_random_bits()")," and ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.gmp-random-range.php"},"gmp_random_range()"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"gmp_random ([ int $limiter = 20 ] ) : GMP\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"gmp_random_range ( GMP $min , GMP $max ) : GMP\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"gmp_random_bits ( int $bits ) : GMP\n")),(0,r.kt)("h3",{id:"each-function"},"each() function"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.each.php"},"This function")," is far slower at iteration than a normal ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/control-structures.foreach.php"},"foreach()"),", and causes implementation issues for some language changes. It has therefore ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.each-function"},"been deprecated"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"each ( array &$array ) : array\n")),(0,r.kt)("h3",{id:"assert-with-a-string-argument"},"assert() with a string argument"),(0,r.kt)("p",null,"Using ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.assert.php"},"assert()")," with a string argument required the string to be ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.eval.php"},"eval()"),"'ed. Given the potential for remote code execution, using assert() with a string argument has now been ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.errcontext-arg-of-error-handlers"},"deprecated in favour of using boolean expressions"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"assert ( mixed $assertion [, Throwable $exception ] ) : bool\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"eval ( string $code ) : mixed\n")),(0,r.kt)("h3",{id:"errcontext-argument-of-error-handlers"},"$errcontext argument of error handlers"),(0,r.kt)("p",null,"The $errcontext argument contains all local variables of the error site. Given its rare usage, and the problems it causes with internal optimisations, ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.errcontext-arg-of-error-handlers"},"it has now been deprecated"),"."),(0,r.kt)("h3",{id:"read_exif_data-function"},"read_exif_data() function"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.read-exif-data.php"},"read_exif_data()")," alias ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/migration72.deprecated.php#migration72.deprecated.read_exif_data-function"},"has been deprecated"),". The ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.exif-read-data.php"},"exif_read_data()")," function should be used instead."),(0,r.kt)("h2",{id:"re-deploy-magento"},"Re-Deploy Magento"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"php7.3 bin/magento setup:upgrade\nphp7.3 bin/magento setup:di:compile\nphp7.3 bin/magento setup:static-content:deploy -f\nchown -R www-data:www-data .\n")),(0,r.kt)("h2",{id:"purge-old-php-version"},"Purge Old PHP Version"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"apt purge php7.2 php7.2-common php7.2-cli\n")))}m.isMDXComponent=!0},23900:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/photo-kt456d_645dhfh6dgjkhg4_d-ce3d6a58152b19d5932335a19bc20b03.jpg"}}]);