"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[23195],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),d=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=d(n),h=a,m=p["".concat(s,".").concat(h)]||p[h]||c[h]||r;return n?o.createElement(m,i(i({ref:t},u),{},{components:n})):o.createElement(m,i({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var d=2;d<r;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},91252:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var o=n(87462),a=(n(67294),n(3905));const r={sidebar_position:9070,slug:"2019-08-06",title:"MQTT Networks with Node-RED",authors:"mpolinowski",tags:["MQTT","Node-RED","Smarthome","IoT"]},i=void 0,l={unversionedId:"IoT-and-Machine-Learning/MQTT/2019-08-06--mqtt-node-red/index",id:"IoT-and-Machine-Learning/MQTT/2019-08-06--mqtt-node-red/index",title:"MQTT Networks with Node-RED",description:"Mustang, Nepal",source:"@site/docs/IoT-and-Machine-Learning/MQTT/2019-08-06--mqtt-node-red/index.mdx",sourceDirName:"IoT-and-Machine-Learning/MQTT/2019-08-06--mqtt-node-red",slug:"/IoT-and-Machine-Learning/MQTT/2019-08-06--mqtt-node-red/2019-08-06",permalink:"/docs/IoT-and-Machine-Learning/MQTT/2019-08-06--mqtt-node-red/2019-08-06",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/IoT-and-Machine-Learning/MQTT/2019-08-06--mqtt-node-red/index.mdx",tags:[{label:"MQTT",permalink:"/docs/tags/mqtt"},{label:"Node-RED",permalink:"/docs/tags/node-red"},{label:"Smarthome",permalink:"/docs/tags/smarthome"},{label:"IoT",permalink:"/docs/tags/io-t"}],version:"current",sidebarPosition:9070,frontMatter:{sidebar_position:9070,slug:"2019-08-06",title:"MQTT Networks with Node-RED",authors:"mpolinowski",tags:["MQTT","Node-RED","Smarthome","IoT"]},sidebar:"tutorialSidebar",previous:{title:"MQTT Networks with ioBroker",permalink:"/docs/IoT-and-Machine-Learning/MQTT/2019-08-07--mqtt-iobroker/2019-08-07"},next:{title:"MQTT Networks with OpenHAB 2",permalink:"/docs/IoT-and-Machine-Learning/MQTT/2019-08-05--mqtt-openhab2/2019-08-05"}},s={},d=[{value:"Node-RED Configuration",id:"node-red-configuration",level:2},{value:"Node-RED JSON Flows",id:"node-red-json-flows",level:3},{value:"Node-RED User Interface",id:"node-red-user-interface",level:2}],u={toc:d};function c(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,o.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Mustang, Nepal",src:n(71315).Z,width:"1500",height:"668"})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#node-red-configuration"},"Node-RED Configuration"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#node-red-json-flows"},"Node-RED JSON Flows")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#node-red-user-interface"},"Node-RED User Interface"))),(0,a.kt)("h2",{id:"node-red-configuration"},"Node-RED Configuration"),(0,a.kt)("p",null,"We prepared Node-RED flows for you that give you access to all camera functions through the MQTT Broker. All you need to do, is to click on the flow you want to use (",(0,a.kt)("a",{parentName:"p",href:"#node-red-json-flows"},"see below"),"), copy it and paste it into the Node-RED import dialogue:"),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Node-RED with your INSTAR IP Camera",src:n(33318).Z,width:"1000",height:"809"})),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"node-red-json-flows"},"Node-RED JSON Flows"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wiki.instar.com/Node-RED_Flows/MQTT-alarm-menu.json"},"Alarm Menu")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wiki.instar.com/Node-RED_Flows/MQTT-features-menu.json"},"Features Menu")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wiki.instar.com/Node-RED_Flows/MQTT-multimedia-menu.json"},"Multimedia Menu")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wiki.instar.com/Node-RED_Flows/MQTT-network-menu.json"},"Network Menu")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wiki.instar.com/Node-RED_Flows/MQTT-system-menu.json"},"System Menu")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wiki.instar.com/Node-RED_Flows/MQTT-task-menu.json"},"Recording Task Menu"))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Note"),": It makes sense to delete every sequence inside those flows that you are not going to use."),(0,a.kt)("p",null,"Now double-click the first MQTT Node (the first on the left) and assign your INSTAR MQTT Broker to Node-RED:"),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Node-RED with your INSTAR IP Camera",src:n(15026).Z,width:"845",height:"374"})),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Type in your camera's IP address as MQTT Server. Choose the MQTT Server Port that you have set in the MQTT Menu inside your camera's WebUI - the default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"1883"),"."),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Node-RED with your INSTAR IP Camera",src:n(27665).Z,width:"841",height:"478"})),(0,a.kt)("hr",null),(0,a.kt)("p",null,"If you want to use the TLS encryption, choose the SSL Port instead - default is ",(0,a.kt)("inlineCode",{parentName:"p"},"8883"),". Now you have to open your camera's MQTT Menu and download the Certificate (Client Key). And upload the certificate to Node-RED and save it:"),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Node-RED with your INSTAR IP Camera",src:n(4795).Z,width:"835",height:"369"})),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Now add the user login that you have set up in the MQTT Menu:"),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Node-RED with your INSTAR IP Camera",src:n(57518).Z,width:"831",height:"331"})),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Click on add to add the INSTAR MQTT Broker to Node-RED and make sure that every MQTT Node of the flow is using the broker. After clicking on ",(0,a.kt)("strong",{parentName:"p"},"Deploy")," all MQTT Nodes should show that they successfully connected:"),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Node-RED with your INSTAR IP Camera",src:n(41702).Z,width:"975",height:"253"})),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"node-red-user-interface"},"Node-RED User Interface"),(0,a.kt)("p",null,"You are currently using the Node-RED admin panel under an URL looking something like this: ",(0,a.kt)("inlineCode",{parentName:"p"},"http://<IP Address>:1880/#flow/b7397920.044be8"),". To switch to the Node-RED dashboard simply add a ",(0,a.kt)("strong",{parentName:"p"},"ui")," to the end of it like ",(0,a.kt)("inlineCode",{parentName:"p"},"http://<IP Address>:1880/ui/"),":"),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Node-RED with your INSTAR IP Camera",src:n(34479).Z,width:"982",height:"644"})),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Every flow that you have imported above will be on it's own board. Clicking on toggles and swiping sliders allows you to change the settings on your camera."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Note")," that the changes happen instantly, but some settings require a restart of your camera to become active - e.g. when changing a camera port, WDR settings, etc. As the WebUI is using the HTTP interface changes will not be reflected there unless you reload the menu."),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Node-RED with your INSTAR IP Camera",src:n(61753).Z,width:"840",height:"598"})),(0,a.kt)("hr",null))}c.isMDXComponent=!0},33318:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Node-RED_MQTT_01-fdea75556e531957cd7f5766c21f6514.png"},15026:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Node-RED_MQTT_02-aa9c3acae7ee2eb60a777f43b69590bf.png"},27665:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Node-RED_MQTT_03-e6c5fa7dc8b8dac6836c2f45c61ce011.png"},4795:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Node-RED_MQTT_04-8fab86b45306fcbc57bf5a3a7bf6c63a.png"},57518:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Node-RED_MQTT_05-6b342c360080c2f9235fcc2f643233ce.png"},41702:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Node-RED_MQTT_06-b549098059b61c395c4bb82da6a606b1.png"},34479:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Node-RED_MQTT_07-56d3ea0f9d0d331ad66cb4d36ee9574c.png"},61753:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Node-RED_MQTT_Camera_05-7a4289eea069bbdb1f4f23b4a677d0eb.gif"},71315:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/photo-kt456d_645dhfh6dgjkhg4_d-720cd5bd9216dc52b6a05e7b5c0620e2.jpg"}}]);