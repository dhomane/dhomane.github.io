"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[47380],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>h});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(r),h=a,m=c["".concat(l,".").concat(h)]||c[h]||d[h]||i;return r?n.createElement(m,s(s({ref:t},u),{},{components:r})):n.createElement(m,s({ref:t},u))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,s=new Array(i);s[0]=c;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var p=2;p<i;p++)s[p]=r[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},53606:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=r(87462),a=(r(67294),r(3905));const i={sidebar_position:7080,slug:"2021-03-15",title:"Debian Upgrade to Bullseye",authors:"mpolinowski",tags:["LINUX"]},s=void 0,o={unversionedId:"DevOps/Linux/2021-03-15-debian-upgrade-bullseye/index",id:"DevOps/Linux/2021-03-15-debian-upgrade-bullseye/index",title:"Debian Upgrade to Bullseye",description:"Hongkong, TST",source:"@site/docs/DevOps/Linux/2021-03-15-debian-upgrade-bullseye/index.md",sourceDirName:"DevOps/Linux/2021-03-15-debian-upgrade-bullseye",slug:"/DevOps/Linux/2021-03-15-debian-upgrade-bullseye/2021-03-15",permalink:"/docs/DevOps/Linux/2021-03-15-debian-upgrade-bullseye/2021-03-15",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Linux/2021-03-15-debian-upgrade-bullseye/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:7080,frontMatter:{sidebar_position:7080,slug:"2021-03-15",title:"Debian Upgrade to Bullseye",authors:"mpolinowski",tags:["LINUX"]},sidebar:"tutorialSidebar",previous:{title:"Installing Free Red Hat Enterprise Linux",permalink:"/docs/DevOps/Linux/2021-04-11-installing-free-red-hat-enterprise-linux/2021-04-11"},next:{title:"Activating Root Login on Ubuntu 20.10",permalink:"/docs/DevOps/Linux/2020-10-20--activating-root-login-ubuntu-20-10/2020-10-20"}},l={},p=[{value:"Check OS Version",id:"check-os-version",level:3},{value:"Find the right repositories",id:"find-the-right-repositories",level:3},{value:"Upgrade the repository list",id:"upgrade-the-repository-list",level:3},{value:"Test if the sources.list Configuration",id:"test-if-the-sourceslist-configuration",level:3},{value:"Upgrade the System",id:"upgrade-the-system",level:3},{value:"Check OS Version",id:"check-os-version-1",level:3},{value:"Hash Mismatch",id:"hash-mismatch",level:2}],u={toc:p};function d(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Hongkong, TST",src:r(49261).Z,width:"1500",height:"569"})),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"- [Check OS Version](#check-os-version)\n- [Find the right repositories](#find-the-right-repositories)\n- [Upgrade the repository list](#upgrade-the-repository-list)\n- [Test if the sources.list Configuration](#test-if-the-sourceslist-configuration)\n- [Upgrade the System](#upgrade-the-system)\n- [Check OS Version](#check-os-version-1)\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#hash-mismatch"},"Hash Mismatch"))),(0,a.kt)("h3",{id:"check-os-version"},"Check OS Version"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'cat /etc/os-release\n\nPRETTY_NAME="Debian GNU/Linux 10 (buster)"\n')),(0,a.kt)("h3",{id:"find-the-right-repositories"},"Find the right repositories"),(0,a.kt)("p",null,"Check ",(0,a.kt)("a",{parentName:"p",href:"https://www.debian.org/mirror/list"},"https://www.debian.org/mirror/list")," for the nearest mirror."),(0,a.kt)("h3",{id:"upgrade-the-repository-list"},"Upgrade the repository list"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"apt edit-sources\n")),(0,a.kt)("p",null,"Comment out the existing entries by prepending a pound key and add the new URLs, mainly replacing buster with bullseye in this example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cfg"},"# deb http://deb.debian.org/debian buster main contrib non-free\n# deb http://deb.debian.org/debian buster-updates main contrib non-free\n# deb http://security.debian.org/ buster/updates main contrib non-free\n\ndeb http://mirrors.linode.com/debian bullseye main\ndeb-src http://mirrors.linode.com/debian bullseye main\n\n# bullseye-security\ndeb http://mirrors.linode.com/debian-security bullseye-security/updates main\ndeb-src http://mirrors.linode.com/debian-security bullseye-security/updates main\n\n# bullseye-updates\ndeb http://mirrors.linode.com/debian bullseye-updates main\ndeb-src http://mirrors.linode.com/debian bullseye-updates main\n")),(0,a.kt)("h3",{id:"test-if-the-sourceslist-configuration"},"Test if the sources.list Configuration"),(0,a.kt)("p",null,"\u200b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"apt update\n")),(0,a.kt)("h3",{id:"upgrade-the-system"},"Upgrade the System"),(0,a.kt)("p",null,"Now, only after you performed a full system backup, upgrade your system:"),(0,a.kt)("p",null,"\u200b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"apt full-upgrade && \\\necho FINE || \\\necho FAIL\n")),(0,a.kt)("h3",{id:"check-os-version-1"},"Check OS Version"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'cat /etc/os-release\n\nPRETTY_NAME="Debian GNU/Linux 11 (bullseye)"\n')),(0,a.kt)("h2",{id:"hash-mismatch"},"Hash Mismatch"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"E: Failed to fetch http://mirrors.linode.com/debian/dists/bullseye/main/i18n/by-hash/SHA256/a10a6afaed08d5920ca1f25470447ebe309d6ec6e1dccd7984dbf80f3794e9e5  Hash Sum mismatch\n   Hashes of expected file:\n    - Filesize:6241447 [weak]\n    - SHA256:a10a6afaed08d5920ca1f25470447ebe309d6ec6e1dccd7984dbf80f3794e9e5\n    - MD5Sum:defe22d6705e06848f94f8bdc44e6b31 [weak]\n   Hashes of received file:\n    - SHA256:cd403ad869e02ce4b0362a943eb3f23f2ad8c23568369e1f0398aec3367d86a2\n    - MD5Sum:a3ee386d51ec0bc4461ddc15a60ea2d6 [weak]\n    - Filesize:6241447 [weak]\n   Last modification reported: Sat, 09 Oct 2021 09:17:24 +0000\n")),(0,a.kt)("p",null,"I started getting error messages when trying to update my system. This could be solved by:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"rm -rf /var/lib/apt/lists/* && apt update\napt upgrade\n")),(0,a.kt)("p",null,"If deleting ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/lib/apt/lists/*"),' does not work - (esp. if you\'re behind a proxy), fix "Hash Sum Mismatch" by creating a file ',(0,a.kt)("inlineCode",{parentName:"p"},"/etc/apt/apt.conf.d/99fixbadproxy"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"Acquire::http::Pipeline-Depth 0;\nAcquire::http::No-Cache true;\nAcquire::BrokenProxy    true;\n")),(0,a.kt)("p",null,"And run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"rm  /var/lib/apt/lists/*\nrm  /var/lib/apt/lists/partial/*\napt-get update\n")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://gist.github.com/trastle/5722089"},"See Github")))}d.isMDXComponent=!0},49261:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/photo-456tdsfggd_67gfh6dgdf4_d-1178db225441cd22ece67d208efab8fd.jpg"}}]);