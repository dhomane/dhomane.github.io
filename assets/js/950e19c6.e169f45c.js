"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[23129],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>u});var n=o(67294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(o),u=r,d=m["".concat(s,".").concat(u)]||m[u]||g[u]||a;return o?n.createElement(d,i(i({ref:t},p),{},{components:o})):n.createElement(d,i({ref:t},p))}));function u(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}m.displayName="MDXCreateElement"},87319:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>g,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var n=o(87462),r=(o(67294),o(3905));const a={sidebar_position:9090,slug:"2021-06-03",title:"Paho MQTT Client with Golang",authors:"mpolinowski",tags:["MQTT","Go"]},i=void 0,l={unversionedId:"Development/Go/2021-06-03--mqtt-with-golang/index",id:"Development/Go/2021-06-03--mqtt-with-golang/index",title:"Paho MQTT Client with Golang",description:"Mong Kok, Hongkong",source:"@site/docs/Development/Go/2021-06-03--mqtt-with-golang/index.md",sourceDirName:"Development/Go/2021-06-03--mqtt-with-golang",slug:"/Development/Go/2021-06-03--mqtt-with-golang/2021-06-03",permalink:"/docs/Development/Go/2021-06-03--mqtt-with-golang/2021-06-03",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Go/2021-06-03--mqtt-with-golang/index.md",tags:[{label:"MQTT",permalink:"/docs/tags/mqtt"},{label:"Go",permalink:"/docs/tags/go"}],version:"current",sidebarPosition:9090,frontMatter:{sidebar_position:9090,slug:"2021-06-03",title:"Paho MQTT Client with Golang",authors:"mpolinowski",tags:["MQTT","Go"]},sidebar:"tutorialSidebar",previous:{title:"Go Websockets",permalink:"/docs/Development/Go/2021-09-10--go-websockets/2021-09-10"},next:{title:"GoFiber Container for your Gatsby Build",permalink:"/docs/Development/Go/2021-02-21-gofiber-container-gatsby/2021-02-21"}},s={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Run",id:"run",level:2},{value:"Parameter",id:"parameter",level:3}],p={toc:c};function g(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Mong Kok, Hongkong",src:o(24070).Z,width:"1500",height:"467"})),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/mpolinowski/go-mqtt-client"},"Github Repository")),(0,r.kt)("p",null,"In this example we provide example code for TCP, Websocket, TLS, and Websockets protocols to connect to the MQTT Broker. For more documentation on the use of the go paho-mqtt client, see the ",(0,r.kt)("a",{parentName:"p",href:"https://godoc.org/github.com/eclipse/paho.mqtt.golang"},"Go Client - documentation")),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"go version\n\ngo version go1.16.6 windows/amd64\n")),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"github.com/eclipse/paho.mqtt.golang"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"v1.3.5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"github.com/gorilla/websocket"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"v1.4.2")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"golang.org/x/net"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"v0.0.0-20210805182204-aaa1db679c0d"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"go get github.com/eclipse/paho.mqtt.golang\ngo get github.com/gorilla/websocket\ngo get golang.org/x/net/proxy\n")),(0,r.kt)("h2",{id:"run"},"Run"),(0,r.kt)("p",null,"Add your broker data to ",(0,r.kt)("inlineCode",{parentName:"p"},".main.go"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'var Host     = flag.String("host", "192.168.2.111", "server hostname or IP")\nvar Port     = flag.Int("port", 8885, "server port")\nvar Action   = flag.String("action", "pubsub", "pub/sub/pubsub action")\nvar Protocol = flag.String("protocol", "ws", "mqtt/mqtts/ws/wss")\nvar Topic    = flag.String("topic", "cameras/go", "publish/subscribe topic")\nvar Username = flag.String("username", "admin", "mqtt broker username")\nvar Password = flag.String("password", "instar", "mqtt broker password")\nvar Qos      = flag.Int("qos", 1, "MQTT QOS")\nvar Tls      = flag.Bool("tls", false, "Enable TLS/SSL")\nvar CaCert   = flag.String("cacert", "./broker.ca.crt", "tls certificate")\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"In the example above I am using ",(0,r.kt)("a",{parentName:"p",href:"/docs/Development/Javascript/2021-06-02--mqtt-cheat-sheet/2021-06-02"},"this Mosquitto broker")," with active ",(0,r.kt)("a",{parentName:"p",href:"/docs/Development/Javascript/2021-06-01--mqtt-with-reactjs/2021-06-01#activating-websockets"},"Websocket interface"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"go run main.go\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Go Paho MQTT Client",src:o(71359).Z,width:"1075",height:"658"})),(0,r.kt)("h3",{id:"parameter"},"Parameter"),(0,r.kt)("p",null,"You can also override the default values by adding those parameters to the run command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"go run main.go -host \"192.168.2.111\" -port 8885 -protocol 'ws' -action 'pubsub' -topic 'cameras/go' -qos 1 -username 'admin' -password 'instar' -tls false -cacert './broker.ca.crt'\n")))}g.isMDXComponent=!0},71359:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/MQTT_01-c93cfa4ceeb169c2dcc1de78a9fd74e9.png"},24070:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-480e8525a0691c8ca9356ad3f7bede5d.jpg"}}]);