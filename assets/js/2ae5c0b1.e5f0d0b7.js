"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[14664],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>c});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=p(a),c=r,g=u["".concat(s,".").concat(c)]||u[c]||d[c]||i;return a?n.createElement(g,l(l({ref:t},m),{},{components:a})):n.createElement(g,l({ref:t},m))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},39983:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={sidebar_position:7030,slug:"2021-09-01",title:"Installing Kali LINUX on a Raspberry Pi 3",authors:"mpolinowski",tags:["Linux"]},l=void 0,o={unversionedId:"DevOps/Linux/2021-09-01--kali-linux-raspberry-pi/index",id:"DevOps/Linux/2021-09-01--kali-linux-raspberry-pi/index",title:"Installing Kali LINUX on a Raspberry Pi 3",description:"Shenzhen, China",source:"@site/docs/DevOps/Linux/2021-09-01--kali-linux-raspberry-pi/index.md",sourceDirName:"DevOps/Linux/2021-09-01--kali-linux-raspberry-pi",slug:"/DevOps/Linux/2021-09-01--kali-linux-raspberry-pi/2021-09-01",permalink:"/docs/DevOps/Linux/2021-09-01--kali-linux-raspberry-pi/2021-09-01",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Linux/2021-09-01--kali-linux-raspberry-pi/index.md",tags:[{label:"Linux",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:7030,frontMatter:{sidebar_position:7030,slug:"2021-09-01",title:"Installing Kali LINUX on a Raspberry Pi 3",authors:"mpolinowski",tags:["Linux"]},sidebar:"tutorialSidebar",previous:{title:"Installing OpenWRT on a Raspberry Pi 4",permalink:"/docs/DevOps/Linux/2021-09-02--openwrt-raspberry-pi/2021-09-02"},next:{title:"Installing Deb Packages on RHEL8",permalink:"/docs/DevOps/Linux/2021-04-14-using-deb-files-on-rhel8/2021-04-14"}},s={},p=[{value:"Downloading the Image",id:"downloading-the-image",level:2},{value:"How to get it onto your Raspberry Pi 3 B+",id:"how-to-get-it-onto-your-raspberry-pi-3-b",level:3},{value:"Login",id:"login",level:4},{value:"Change the IP Address",id:"change-the-ip-address",level:4},{value:"Change the Hostname",id:"change-the-hostname",level:4},{value:"Trying Airmon-NG",id:"trying-airmon-ng",level:2},{value:"Activating Monitoring Mode for the main WiFi Board",id:"activating-monitoring-mode-for-the-main-wifi-board",level:3},{value:"Starting the monitoring service",id:"starting-the-monitoring-service",level:3},{value:"Starting airodump-ng to display the captured packages",id:"starting-airodump-ng-to-display-the-captured-packages",level:3},{value:"Verify that it is working",id:"verify-that-it-is-working",level:3}],m={toc:p};function d(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Shenzhen, China",src:a(91899).Z,width:"1500",height:"422"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#downloading-the-image"},"Downloading the Image"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#how-to-get-it-onto-your-raspberry-pi-3-b"},"How to get it onto your Raspberry Pi 3 B+"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#login"},"Login")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#change-the-ip-address"},"Change the IP Address")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#change-the-hostname"},"Change the Hostname")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#trying-airmon-ng"},"Trying Airmon-NG"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#activating-monitoring-mode-for-the-main-wifi-board"},"Activating Monitoring Mode for the main WiFi Board")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#starting-the-monitoring-service"},"Starting the monitoring service")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#starting-airodump-ng-to-display-the-captured-packages"},"Starting airodump-ng to display the captured packages")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#verify-that-it-is-working"},"Verify that it is working"))))),(0,r.kt)("h2",{id:"downloading-the-image"},"Downloading the Image"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.kali.org/get-kali/#kali-arm"},"Kali on ARM")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Version"),(0,r.kt)("th",{parentName:"tr",align:null},"Download"),(0,r.kt)("th",{parentName:"tr",align:null},"Torrent"),(0,r.kt)("th",{parentName:"tr",align:null},"SHA256sum"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Raspberry Pi 2, 3, 4 and 400 (32-bit)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://images.kali.org/arm-images/kali-linux-2021.2-rpi4-nexmon.img.xz"},"Link")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://images.kali.org/arm-images/kali-linux-2021.2-rpi4-nexmon.img.xz.torrent"},"Torrent")),(0,r.kt)("td",{parentName:"tr",align:null},"9da12eb9899c7b9a6860ba421bb9f45ce023593b58869ff2ab8db69ce8aa2630")))),(0,r.kt)("h3",{id:"how-to-get-it-onto-your-raspberry-pi-3-b"},"How to get it onto your Raspberry Pi 3 B+"),(0,r.kt)("p",null,"On a Linux desktop and Windows desktop:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Insert your MicroSD to your PC"),(0,r.kt)("li",{parentName:"ol"},"Use BalenaEtcher software to write the img file to your MicroSD card's. ","[https://www.balena.io/etcher/]"),(0,r.kt)("li",{parentName:"ol"},"Insert the SD Card into your RasPi and wait for it to boot - it will show up as ",(0,r.kt)("inlineCode",{parentName:"li"},"kali"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," Make sure that the MicroSD (once flashed by Etcher) has an empty file called ",(0,r.kt)("inlineCode",{parentName:"p"},"ssh")," on it - this will enable the SSH remote access. I ran into the problem that the ",(0,r.kt)("inlineCode",{parentName:"p"},"root")," access did not work for me. So I had to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"kali")," user."),(0,r.kt)("h4",{id:"login"},"Login"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Default Logins:")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Username"),(0,r.kt)("th",{parentName:"tr",align:null},"Password"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"root"),(0,r.kt)("td",{parentName:"tr",align:null},"toor")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"kali"),(0,r.kt)("td",{parentName:"tr",align:null},"kali")))),(0,r.kt)("p",null,"After using the ",(0,r.kt)("inlineCode",{parentName:"p"},"kali")," login I can change the default ",(0,r.kt)("inlineCode",{parentName:"p"},"root")," login and re-login with that:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ssh kali@192.168.2.48\nkali@192.168.2.48's password: kali\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo su\npasswd root\n")),(0,r.kt)("p",null,"And allow the root login:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nano /etc/ssh/sshd_config\n")),(0,r.kt)("p",null,"by adding the following line:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"#PermitRootLogin prohibit-password\nPermitRootLogin yes\n")),(0,r.kt)("p",null,"After restarting the SSH service you will now be able to remotely login using the ",(0,r.kt)("inlineCode",{parentName:"p"},"root")," user with your personal password:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"/etc/init.d/ssh restart\n")),(0,r.kt)("h4",{id:"change-the-ip-address"},"Change the IP Address"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo nano /etc/network/interfaces\n")),(0,r.kt)("p",null,"Deactivate the ",(0,r.kt)("strong",{parentName:"p"},"DHCP")," service and add your static IP configuration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},"auto lo\niface lo inet loopback\n\nauto eth0\nallow-hotplug eth0\n# iface eth0 inet dhcp\niface eth0 inet static\n  address 192.168.2.113\n  netmask 255.255.255.0\n  gateway 192.168.2.1\n  dns-nameservers 192.168.2.1\n")),(0,r.kt)("p",null,"Restart the networking service and login again on your new IP address:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl restart networking.service\n")),(0,r.kt)("h4",{id:"change-the-hostname"},"Change the Hostname"),(0,r.kt)("p",null,"Set new hostname:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"hostnamectl set-hostname server1\n")),(0,r.kt)("p",null,"Edit the hostfile to resolve your new hostname to localhost:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nano /etc/hosts\n\n127.0.0.1       server1    localhost\n")),(0,r.kt)("p",null,"And verify that the hostname was set successfully:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"hostnamectl\n\nStatic hostname: server1\n         Icon name: computer\n        Machine ID: 068a7d772bd446b79607eb8f3fe0ac6b\n           Boot ID: db0592c1953f4c9489312c7caa3e38f4\n  Operating System: Kali GNU/Linux Rolling\n            Kernel: Linux 5.4.83-Re4son-v7+\n      Architecture: arm\n")),(0,r.kt)("h2",{id:"trying-airmon-ng"},"Trying Airmon-NG"),(0,r.kt)("p",null,"I was having some difficulties getting the Broadcom WiFi into monitoring mode. I tried several things and one of them - or a combination of them - finally enabled me to capture WiFi packages:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Trying Airmon-NG",src:a(91745).Z,width:"955",height:"706"})),(0,r.kt)("p",null,"Here is a list of steps that I took:"),(0,r.kt)("h3",{id:"activating-monitoring-mode-for-the-main-wifi-board"},"Activating Monitoring Mode for the main WiFi Board"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ifconfig wlan0 down\niwconfig wlan0 mode monitor\nifconfig wlan0 up\n")),(0,r.kt)("p",null,"The second step above failed with the following error message:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'Error for wireless request "Set Mode" (8B06) :\n    SET failed on device wlan0 ; Device or resource busy.\n')),(0,r.kt)("p",null,"The following command helps you to kill all processes that might be using ",(0,r.kt)("inlineCode",{parentName:"p"},"wlan0"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"airmon-ng check kill\n")),(0,r.kt)("p",null,"This killed the ",(0,r.kt)("inlineCode",{parentName:"p"},"wpa_supplicant")," service and I continued masking this service and rebooted the pi:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl mask wpa_supplicant.service\nreboot\n")),(0,r.kt)("h3",{id:"starting-the-monitoring-service"},"Starting the monitoring service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"airmon-ng start wlan0\n")),(0,r.kt)("p",null,"This gave me an error message:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ERROR adding monitor mode interface: command failed: Operation not supported (-95)\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.aircrack-ng.org/doku.php?id=airmon-ng"},"This is a bug")," can be solved by reloading the Broadcom driver:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"rmmod brcmfmac\nmodprobe brcmfmac\n")),(0,r.kt)("p",null,"Afterward I was able to start the service:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"airmon-ng start wlan0\n")),(0,r.kt)("p",null,"And the monitoring interface was now listed:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"airmon-ng\n\nPHY     Interface       Driver          Chipset\n\nphy1    wlan0           brcmfmac        Broadcom 43430\nphy1    wlan0mon        brcmfmac        Broadcom 43430\n")),(0,r.kt)("h3",{id:"starting-airodump-ng-to-display-the-captured-packages"},"Starting airodump-ng to display the captured packages"),(0,r.kt)("p",null,"This command lead me to the screenshot above:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"airodump-ng wlan0mon\n")),(0,r.kt)("h3",{id:"verify-that-it-is-working"},"Verify that it is working"),(0,r.kt)("p",null,"To make sure this wasn't a fluke I rebooted my Pi and ran the following commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"airmon-ng start wlan0\nairodump-ng wlan0mon\n")),(0,r.kt)("p",null,"And it worked - this time without any complaints!"))}d.isMDXComponent=!0},91745:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/kali-linux-raspberry-pi_01-01935e8c0eb776c407277eed2150cfe3.png"},91899:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-2e2594660a62178277c3551783b0c874.jpg"}}]);