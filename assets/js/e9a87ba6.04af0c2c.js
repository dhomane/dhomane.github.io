"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[27301],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=p(n),g=o,u=m["".concat(s,".").concat(g)]||m[g]||c[g]||r;return n?a.createElement(u,i(i({ref:t},d),{},{components:n})):a.createElement(u,i({ref:t},d))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},55765:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(87462),o=(n(67294),n(3905));const r={sidebar_position:1e4,slug:"2019-09-07",title:"Magento 2 Docker Development",authors:"mpolinowski",tags:["Docker","Magento"]},i=void 0,l={unversionedId:"Development/Magento/2019-09-07--magento-development-in-docker/index",id:"Development/Magento/2019-09-07--magento-development-in-docker/index",title:"Magento 2 Docker Development",description:"Siam Reap, Cambodia",source:"@site/docs/Development/Magento/2019-09-07--magento-development-in-docker/index.mdx",sourceDirName:"Development/Magento/2019-09-07--magento-development-in-docker",slug:"/Development/Magento/2019-09-07--magento-development-in-docker/2019-09-07",permalink:"/docs/Development/Magento/2019-09-07--magento-development-in-docker/2019-09-07",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Magento/2019-09-07--magento-development-in-docker/index.mdx",tags:[{label:"Docker",permalink:"/docs/tags/docker"},{label:"Magento",permalink:"/docs/tags/magento"}],version:"current",sidebarPosition:1e4,frontMatter:{sidebar_position:1e4,slug:"2019-09-07",title:"Magento 2 Docker Development",authors:"mpolinowski",tags:["Docker","Magento"]},sidebar:"tutorialSidebar",previous:{title:"Magento 2 Dev Environment with Docker Compose",permalink:"/docs/Development/Magento/2019-09-10--magento2-docker-on-ubuntu/2019-09-10"},next:{title:"Misc",permalink:"/docs/category/misc"}},s={},p=[{value:"Docker on Windows",id:"docker-on-windows",level:2},{value:"Setting up the Environment",id:"setting-up-the-environment",level:3},{value:"Installing Magento",id:"installing-magento",level:2},{value:"Webmin",id:"webmin",level:3},{value:"MySQL",id:"mysql",level:3},{value:"Magento &amp; Apache",id:"magento--apache",level:3},{value:"PHPMyAdmin",id:"phpmyadmin",level:3},{value:"Configuring Magento",id:"configuring-magento",level:2}],d={toc:p};function c(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Siam Reap, Cambodia",src:n(57044).Z,width:"1500",height:"747"})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#docker-on-windows"},"Docker on Windows"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#setting-up-the-environment"},"Setting up the Environment")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#installing-magento"},"Installing Magento"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#webmin"},"Webmin")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#mysql"},"MySQL")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#magento-amp-apache"},"Magento ","&"," Apache")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#phpmyadmin"},"PHPMyAdmin")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#configuring-magento"},"Configuring Magento"))),(0,o.kt)("p",null,"I want to try set up a Magento 2 Store in Docker on a Windows 10 PC."),(0,o.kt)("h2",{id:"docker-on-windows"},"Docker on Windows"),(0,o.kt)("p",null,"Start by ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/docker-for-windows/install/"},"installing Docker")," on your Windows PC. Note that you need:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Windows 10 64-bit: Pro, Enterprise, or Education (Build 15063 or later)."),(0,o.kt)("li",{parentName:"ul"},"Hyper-V and Containers Windows features must be enabled.")),(0,o.kt)("p",null,"After the installation sign in with your ",(0,o.kt)("a",{parentName:"p",href:"https://hub.docker.com"},"Docker Hub")," ID. Start the Docker Settings and select a drive you want to be available for your docker containers - this is the drive we need to store our source code on:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(56446).Z,width:"830",height:"568"})),(0,o.kt)("h3",{id:"setting-up-the-environment"},"Setting up the Environment"),(0,o.kt)("p",null,"Now we need to create a ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file that will help us setting up the Magento2/LAMP environment:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"mysql:\n  image: mysql:5.7\n  ports:\n    - 3306:3306\n  environment:\n    MYSQL_ROOT_PASSWORD: mypassword\n  volumes:\n    - ./src/db:/var/lib/mysql\n  container_name: mysql_5.7\nphpmyadmin:\n  image: phpmyadmin/phpmyadmin:4.8\n  ports:\n    - 8080:80\n  links:\n    - mysql\n  environment:\n    PMA_HOST: mysql\n    PMA_PORT: 3306\n  container_name: phpmyadmin_4.8\napache2:\n  image: phpcuong/magento2-apache2:3.0\n  ports:\n    - 80:80\n    - 10000:10000\n    - 443:443\n  links:\n    - mysql\n  volumes:\n    - ./src/html:/var/www/html\n  container_name: magento2.3\n")),(0,o.kt)("p",null,"Create two folders named ",(0,o.kt)("inlineCode",{parentName:"p"},"html")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"db")," and point the two volumes declared above to those directories. In my case there is a ",(0,o.kt)("inlineCode",{parentName:"p"},"src")," folder in the same directory as the compose YAML file. This folder contains both the db and html folder."),(0,o.kt)("p",null,"Those instruction will set up a MySQL database, PHPMyAdmin and a Ubuntu container with Apache2, PHP 7.1.26, Webmin, Composer and Git."),(0,o.kt)("p",null,"Now open PowerShell in the directory where you created the YAML file and run the command ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose up -d")," to set everything up:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(6643).Z,width:"975",height:"503"})),(0,o.kt)("p",null,"Once Docker finishes you can run ",(0,o.kt)("inlineCode",{parentName:"p"},"docker images")," to see the downloaded images and ",(0,o.kt)("inlineCode",{parentName:"p"},"docker ps -a")," to see that all 3 are now running in the background:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(28050).Z,width:"975",height:"296"})),(0,o.kt)("h2",{id:"installing-magento"},"Installing Magento"),(0,o.kt)("p",null,"We can now verify that the virtual environment inside the Docker container full fills the requirements for Magento 2.2.6:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Apache 2.4"),(0,o.kt)("li",{parentName:"ul"},"MySQL 5.7"),(0,o.kt)("li",{parentName:"ul"},"PHP 7.0.13 or higher")),(0,o.kt)("p",null,"To do this run the following command ",(0,o.kt)("inlineCode",{parentName:"p"},"docker exec -it magento2.3 bin/bash")," to access the Docker container that we want to use to install Magento in (",(0,o.kt)("strong",{parentName:"p"},"Note")," that you can get the container name ",(0,o.kt)("inlineCode",{parentName:"p"},"magento2.3")," from the screenshot above):"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(97377).Z,width:"973",height:"211"})),(0,o.kt)("h3",{id:"webmin"},"Webmin"),(0,o.kt)("p",null,"As mentioned above this container comes with ",(0,o.kt)("a",{parentName:"p",href:"http://www.webmin.com"},"Webmin")," pre-installed. Webmin is a web-based interface for system administration for Unix. You can setup user accounts, Apache, DNS and much more. Webmin removes the need to manually edit Unix configuration files like /etc/passwd, and lets you manage a system from the console or remotely."),(0,o.kt)("p",null,"The Webmin dashboard is exposed on Port ",(0,o.kt)("inlineCode",{parentName:"p"},"10000")," and can accessed via localhost on your Windows machine:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," https://127.0.0.1:10000\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"username: root"),(0,o.kt)("li",{parentName:"ul"},"password: root")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(68864).Z,width:"862",height:"517"})),(0,o.kt)("p",null,"You can use it to make changes to your virtual server take care of outdated packages. ",(0,o.kt)("strong",{parentName:"p"},"Note")," that changes you make here will be wiped if you rebuild the container:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(58778).Z,width:"1091",height:"359"})),(0,o.kt)("h3",{id:"mysql"},"MySQL"),(0,o.kt)("p",null,"To check your MySQL version run the same command as before to enter the container ",(0,o.kt)("inlineCode",{parentName:"p"},"docker exec -it mysql_5.7 bin/bash"),":"),(0,o.kt)("p",null,"Note that you now have to enter the ",(0,o.kt)("inlineCode",{parentName:"p"},"MYSQL_ROOT_PASSWORD")," you defined in the compose YAML file with the following command ",(0,o.kt)("inlineCode",{parentName:"p"},"mysql -u root -p")," to enter the database:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(79439).Z,width:"969",height:"321"})),(0,o.kt)("p",null,"We can now create a database for Magento called ",(0,o.kt)("inlineCode",{parentName:"p"},"magento_2_3_3")," - rename depending on the ",(0,o.kt)("a",{parentName:"p",href:"https://devdocs.magento.com/release/"},"version")," you wish to install:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"create database magento_2_3_3;\nshow databases;\n")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(5205).Z,width:"975",height:"509"})),(0,o.kt)("h3",{id:"magento--apache"},"Magento & Apache"),(0,o.kt)("p",null,"You can download the Magento Source code from the ",(0,o.kt)("a",{parentName:"p",href:"https://magento.com/tech-resources/download"},"Tech Resources")," page. Unzip all files to the ",(0,o.kt)("inlineCode",{parentName:"p"},"src/html")," folder we created earlier."),(0,o.kt)("p",null,"While we wait for those files to be unzipped we can already set up a host name for our shop, e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"magento-2-3-3.instar.com"),". To do this we can edit the Windows ",(0,o.kt)("strong",{parentName:"p"},"hosts")," file in ",(0,o.kt)("strong",{parentName:"p"},"\\Windows\\System32\\drivers\\etc","\\")," and add the following line:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"127.0.0.1 magento-2-3-3.instar.com\n")),(0,o.kt)("p",null,"So now when we type in ",(0,o.kt)("inlineCode",{parentName:"p"},"magento-2-3-3.instar.com")," to our browsers address bar the address will be resolved to ",(0,o.kt)("inlineCode",{parentName:"p"},"localhost"),"."),(0,o.kt)("p",null,"Now go back to the ",(0,o.kt)("strong",{parentName:"p"},"Webmin")," interface and point a virtual server to the Magento HTML code and assign the address that you just created your host for:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(52237).Z,width:"1089",height:"525"})),(0,o.kt)("p",null,"To activate the new configuration we need to restart Apache:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker exec -it magento2.3 bin/bash\nservice apache2 restart\n")),(0,o.kt)("p",null,"Apache is now hosting our Magento site on ",(0,o.kt)("inlineCode",{parentName:"p"},"magento-2-3-3.instar.com")," and port ",(0,o.kt)("inlineCode",{parentName:"p"},"80"),". Access it through your web browser and start the configuration wizard:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(21651).Z,width:"1091",height:"579"})),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note")," that the Magento admin panel can now be reached under ",(0,o.kt)("inlineCode",{parentName:"p"},"http://magento-2-3-3.instar.com/admin_1kji1i")," with the password that you set during the setup process :"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(1906).Z,width:"968",height:"688"})),(0,o.kt)("p",null,"To deploy the frontend run the following command from the ",(0,o.kt)("inlineCode",{parentName:"p"},"magento")," container inside the Magento source folder (path depends on how you named the folder after extracting the Magento source):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker exec -it magento2.3 bin/bash\ncd /var/www/html/Magento-CE-2.3.3\nphp bin/magento setup:static-content:deploy -f\n")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(44282).Z,width:"972",height:"510"})),(0,o.kt)("p",null,"You can find the frontend source code that is being deployed in ",(0,o.kt)("inlineCode",{parentName:"p"},"\\src\\html\\Magento-CE-2.3.3\\pub\\static\\frontend\\Magento\\blank\\en_US"),". The frontend is now available on port ",(0,o.kt)("inlineCode",{parentName:"p"},"80")," with the set URL:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(12340).Z,width:"1044",height:"312"})),(0,o.kt)("h3",{id:"phpmyadmin"},"PHPMyAdmin"),(0,o.kt)("p",null,"We can now access the PHPMyAdmin interface over port ",(0,o.kt)("inlineCode",{parentName:"p"},"8080")," with the domain name we set up ",(0,o.kt)("inlineCode",{parentName:"p"},"magento-2-3-3.instar.com"),":"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"username: ",(0,o.kt)("inlineCode",{parentName:"li"},"root")),(0,o.kt)("li",{parentName:"ul"},"password: ",(0,o.kt)("inlineCode",{parentName:"li"},"mypassword")," (as set by MYSQL_ROOT_PASSWORD)")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(90445).Z,width:"1091",height:"491"})),(0,o.kt)("p",null,"The installation process populated our database successfully:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(26643).Z,width:"1090",height:"528"})),(0,o.kt)("h2",{id:"configuring-magento"},"Configuring Magento"),(0,o.kt)("p",null,"Start by opening the Admin Dashboard through the URL and Login you set in the steps before:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Docker and Magento2 on Windows 10",src:n(65506).Z,width:"1090",height:"772"})))}c.isMDXComponent=!0},56446:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_01-b0060345cf16599ea6e44529fd415c4d.png"},6643:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_02-f8ef7a85a1860404fc0d009f5d74cd52.png"},28050:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_03-5c5af110a27b161b4909922e15b45f3a.png"},97377:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_04-3519f3e03807d22a8d8bf7dc342cae91.png"},68864:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_05-a1b3ce28dc625b60b169b9ac316b224d.png"},58778:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_06-60109053798146ae72ae9b393faf1f4b.png"},79439:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_07-f755039dad1416fb5eaf5d26fc517232.png"},5205:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_08-c621f3cedb49e197c83c288be6f8a5e4.png"},52237:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_09-049256b0f93892666214c8ac641fd5fa.png"},21651:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_10-720a8b6550ed7e16a9596cf7ce716548.png"},1906:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_11-208a316cbac303272421ee63269f4f10.png"},44282:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_12-90d6a49518a1588a592a314d236f4fe4.png"},12340:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_13-e8db9ef9fcc54cb37909b8a8bbd680c5.png"},90445:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_14-01810f2959ee3eb27b598154cf20bdb3.png"},26643:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_15-3da6cc2d4befe40f90c3d5e13a9ef347.png"},65506:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Magento2_Docker_16-840e806a21ffc41ee5bc0b16eea82174.png"},57044:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/photo-kt456d_645dhfh6dgjkhg4_d-8aa171f1c88ebb3d6fd9980af7ac4865.jpg"}}]);