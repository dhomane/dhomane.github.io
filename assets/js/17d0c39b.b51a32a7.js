"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[75937],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>u});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),l=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=l(e.components);return n.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),h=l(a),u=r,m=h["".concat(o,".").concat(u)]||h[u]||d[u]||i;return a?n.createElement(m,s(s({ref:t},p),{},{components:a})):n.createElement(m,s({ref:t},p))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=h;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:r,s[1]=c;for(var l=2;l<i;l++)s[l]=a[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},71509:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var n=a(87462),r=(a(67294),a(3905));const i={sidebar_position:5940,slug:"2022-12-29",title:"Reactive Search Starter",authors:"mpolinowski",tags:["Javascript"],description:"Use the ReactiveSearch library to build a React.js Interface for Elasticsearch and OpenSearch."},s=void 0,c={unversionedId:"Development/Javascript/2022-12-29-reactive-search-starter/index",id:"Development/Javascript/2022-12-29-reactive-search-starter/index",title:"Reactive Search Starter",description:"Use the ReactiveSearch library to build a React.js Interface for Elasticsearch and OpenSearch.",source:"@site/docs/Development/Javascript/2022-12-29-reactive-search-starter/index.md",sourceDirName:"Development/Javascript/2022-12-29-reactive-search-starter",slug:"/Development/Javascript/2022-12-29-reactive-search-starter/2022-12-29",permalink:"/docs/Development/Javascript/2022-12-29-reactive-search-starter/2022-12-29",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Javascript/2022-12-29-reactive-search-starter/index.md",tags:[{label:"Javascript",permalink:"/docs/tags/javascript"}],version:"current",sidebarPosition:5940,frontMatter:{sidebar_position:5940,slug:"2022-12-29",title:"Reactive Search Starter",authors:"mpolinowski",tags:["Javascript"],description:"Use the ReactiveSearch library to build a React.js Interface for Elasticsearch and OpenSearch."},sidebar:"tutorialSidebar",previous:{title:"Javascript",permalink:"/docs/category/javascript"},next:{title:"11ty Static Site Generator",permalink:"/docs/Development/Javascript/2022-12-11-11ty-starter/2022-12-11"}},o={},l=[{value:"Create-React-App",id:"create-react-app",level:2},{value:"Connecting to the Cluster",id:"connecting-to-the-cluster",level:3},{value:"Adding Search and Aggregation Components",id:"adding-search-and-aggregation-components",level:3},{value:"DataSearch",id:"datasearch",level:4},{value:"MultiList",id:"multilist",level:4},{value:"Adding Results Component",id:"adding-results-component",level:3},{value:"Adding Layout and Styles",id:"adding-layout-and-styles",level:3}],p={toc:l};function d(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Shenzhen, China",src:a(76421).Z,width:"2208",height:"757"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#create-react-app"},"Create-React-App"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#connecting-to-the-cluster"},"Connecting to the Cluster")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#adding-search-and-aggregation-components"},"Adding Search and Aggregation Components"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#datasearch"},"DataSearch")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#multilist"},"MultiList")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#adding-results-component"},"Adding Results Component")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#adding-layout-and-styles"},"Adding Layout and Styles"))))),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.reactivesearch.io/docs/gettingstarted/quickstart/"},"ReactiveSearch.io")," provides a supercharged Elasticsearch experience for creating the most demanding app search experiences with a no-code search relevance control plane, UI builder, out-of-the-box search analytics and low-code UI components."),(0,r.kt)("p",null,"To be able to use the library with your own installation of Elasticsearch or Opensearch you first need to define a user role for the search client. This role needs to have read access to all indexies you want to be able to run searches against:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Reactive Search Starter",src:a(22694).Z,width:"1340",height:"712"})),(0,r.kt)("p",null,"I am going to use this role on an anonymous user to be able to run searches ",(0,r.kt)("a",{parentName:"p",href:"/docs/DevOps/Elasticsearch/2022-10-12--opensearch-rest-api/2022-10-12"},"against the Elasticsearch REST API")," without needing to authenticate - ",(0,r.kt)("strong",{parentName:"p"},"Note")," that to be able to use the ",(0,r.kt)("a",{parentName:"p",href:"/docs/DevOps/Elasticsearch/2022-02-02--elasticsearch-v8-upgrade/2022-02-02"},"Anonymous User")," you need to activate it in ",(0,r.kt)("em",{parentName:"p"},"elasticsearch/config/elasticsearch.yml"),":"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Reactive Search Starter",src:a(34361).Z,width:"1344",height:"594"})),(0,r.kt)("p",null,"I can now create a file that holds the information my client needs to connect to the Elasticsearch cluster, e.g.:"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"ElasticParam.js")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export const _connectionString = 'https://my.search.com';\nexport const _index = 'my_index_2022_12_28'; \n")),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/docs/Development/Python/2022-10-07-python-docusaurus-elasticsearch/2022-10-07#mapping"},"Search Index Mapping")," I am using here has a few keys that I will be running searches against:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'"field": "title",'),(0,r.kt)("li",{parentName:"ul"},'"field": "description",'),(0,r.kt)("li",{parentName:"ul"},'"field": "tags",'),(0,r.kt)("li",{parentName:"ul"},'"field": "abstract",'),(0,r.kt)("li",{parentName:"ul"},'"field": "short",')),(0,r.kt)("h2",{id:"create-react-app"},"Create-React-App"),(0,r.kt)("p",null,"With Elasticsearch/Opensearch set up we can now start coding the search interface. For this example I am going to scaffold a basic React.js App and install the ReactiveSearch library using:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx create-react-app reactive-search-starter && cd reactive-search-starter\nnpm install @appbaseio/reactivesearch\n")),(0,r.kt)("h3",{id:"connecting-to-the-cluster"},"Connecting to the Cluster"),(0,r.kt)("p",null,"Update ",(0,r.kt)("inlineCode",{parentName:"p"},"src/App.js")," to add ReactiveBase component and import the Elasticsearch connection info created earlier:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import React from 'react'\nimport { ReactiveBase, DataSearch } from '@appbaseio/reactivesearch'\n\nimport { _connectionString, _index } from './ElasticParam'\n\nfunction App() {\n  return (\n    <ReactiveBase\n        url={_connectionString}\n        app={_index}\n        theme={{\n          colors: {\n            primaryColor: \"#bebebe\",\n            textColor: \"#7e7e7e\"\n          },\n        }}\n    >\n      PlaceHolder Text to be Replaced by later Search Components\n    </ReactiveBase>\n  );\n}\n\nexport default App\n")),(0,r.kt)("h3",{id:"adding-search-and-aggregation-components"},"Adding Search and Aggregation Components"),(0,r.kt)("p",null,"For this app, I will be using ",(0,r.kt)("strong",{parentName:"p"},"DataSearch")," and ",(0,r.kt)("strong",{parentName:"p"},"MultiList")," components for searching and filtering on the index. And ",(0,r.kt)("strong",{parentName:"p"},"ResultCard")," component for showing the search results."),(0,r.kt)("h4",{id:"datasearch"},"DataSearch"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"DataSearch")," component creates a searchbox UI component that queries on the specified fields with weights as specified by dataField prop. That's all it takes to create a functional search component."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'<DataSearch\n    componentId="searchbox"\n  placeholder="Search Assistant"\n    dataField={[\n        {\n            "field": "title",\n            "weight": 5\n        },\n        {\n            "field": "description",\n            "weight": 3\n        },\n        {\n            "field": "tags.raw",\n            "weight": 5\n        },\n        {\n            "field": "abstract",\n            "weight": 2\n        },\n        {\n            "field": "short",\n            "weight": 2\n        },\n    ]}\n/>\n')),(0,r.kt)("h4",{id:"multilist"},"MultiList"),(0,r.kt)("p",null,"Next, we have to add the ",(0,r.kt)("strong",{parentName:"p"},"MultiList")," component. This creates a multiple selection aggregation to filter the search results by."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'<MultiList\n    componentId="searchfilter"\n    dataField="tags.raw"\n    title="Filter by Tags"\n    aggregationSize={10}\n/>\n')),(0,r.kt)("p",null,"Aggregation components like MultiList fire a term type query. You can think of a term query as an exact match query. The field you are using to aggregate over needs to be of type ",(0,r.kt)("inlineCode",{parentName:"p"},"keyword"),". In ",(0,r.kt)("a",{parentName:"p",href:"/docs/Development/Python/2022-10-07-python-docusaurus-elasticsearch/2022-10-07#mapping"},"my mapping")," this is the case for ",(0,r.kt)("inlineCode",{parentName:"p"},"tags.raw"),". The aggregationSize prop is used to specify the total aggregations (think buckets) that you want returned based on the dataField value."),(0,r.kt)("h3",{id:"adding-results-component"},"Adding Results Component"),(0,r.kt)("p",null,"The results component displays the articles that we're searching for. We will use the ",(0,r.kt)("strong",{parentName:"p"},"ReactiveList")," component with the ",(0,r.kt)("strong",{parentName:"p"},"ResultCard")," preset."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'<ReactiveList\n  componentId="results"\n  dataField="_score"\n  size={35}\n  pagination={true}\n  react={{\n    and: ["searchbox", "searchfilter"]\n  }}\n  render={({ data }) => (\n    <ReactiveList.ResultCardsWrapper>\n    {data.map((item) => (\n      <ResultCard key={item._id}>\n      <ResultCard.Image src={item.imagesquare} />\n      <ResultCard.Title\n        dangerouslySetInnerHTML={{\n        __html: item.title\n        }}\n      />\n      <ResultCard.Description>\n        {item.abstract}\n      </ResultCard.Description>\n      </ResultCard>\n    ))}\n    </ReactiveList.ResultCardsWrapper>\n  )}\n/>\n')),(0,r.kt)("h3",{id:"adding-layout-and-styles"},"Adding Layout and Styles"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"ReactiveSearch")," doesn't use a layout system internally. But it is easy to add some CSS Flex:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'<ReactiveBase>\n    <div style={{ display: "flex", flexDirection: "row" }}>\n        <div style={{ display: "flex", flexDirection: "column", width: "30%", margin: "10px" }}>\n            <MultiList/>\n            <SingleRange/>\n        </div>\n        <div style={{ display: "flex", flexDirection: "column", width: "66%" }}>\n            <DataSearch/>\n            <ReactiveList/>\n        </div>\n    </div>\n</ReactiveBase>\n')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Reactive Search Starter",src:a(22432).Z,width:"1316",height:"728"})))}d.isMDXComponent=!0},22694:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/ReactiveSearch_React_App_01-f1205f00e4fcd4d2cff4a82a34850e42.png"},34361:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/ReactiveSearch_React_App_02-78fcb13ce96a3dfdf3837ba86411f45b.png"},22432:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/ReactiveSearch_React_App_03-b27a23e586c16d49f5ad8e3901e8ee8f.png"},76421:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-e38404fdf0e14587f660e537829bfab5.jpg"}}]);