"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[6741],{3905:(t,e,a)=>{a.d(e,{Zo:()=>p,kt:()=>k});var i=a(67294);function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function r(t,e){if(null==t)return{};var a,i,n=function(t,e){if(null==t)return{};var a,i,n={},o=Object.keys(t);for(i=0;i<o.length;i++)a=o[i],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)a=o[i],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var c=i.createContext({}),l=function(t){var e=i.useContext(c),a=e;return t&&(a="function"==typeof t?t(e):s(s({},e),t)),a},p=function(t){var e=l(t.components);return i.createElement(c.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},b=i.forwardRef((function(t,e){var a=t.components,n=t.mdxType,o=t.originalType,c=t.parentName,p=r(t,["components","mdxType","originalType","parentName"]),b=l(a),k=n,u=b["".concat(c,".").concat(k)]||b[k]||d[k]||o;return a?i.createElement(u,s(s({ref:e},p),{},{components:a})):i.createElement(u,s({ref:e},p))}));function k(t,e){var a=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var o=a.length,s=new Array(o);s[0]=b;var r={};for(var c in e)hasOwnProperty.call(e,c)&&(r[c]=e[c]);r.originalType=t,r.mdxType="string"==typeof t?t:n,s[1]=r;for(var l=2;l<o;l++)s[l]=a[l];return i.createElement.apply(null,s)}return i.createElement.apply(null,a)}b.displayName="MDXCreateElement"},45238:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var i=a(87462),n=(a(67294),a(3905));const o={sidebar_position:8e3,slug:"2022-01-15",title:"Zabbix v6 Slack Notifications",authors:"mpolinowski",tags:["LINUX","Slack","Zabbix"]},s=void 0,r={unversionedId:"DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index",id:"DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index",title:"Zabbix v6 Slack Notifications",description:"TST, Hong Kong",source:"@site/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index.md",sourceDirName:"DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications",slug:"/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/2022-01-15",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/2022-01-15",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Slack",permalink:"/docs/tags/slack"},{label:"Zabbix",permalink:"/docs/tags/zabbix"}],version:"current",sidebarPosition:8e3,frontMatter:{sidebar_position:8e3,slug:"2022-01-15",title:"Zabbix v6 Slack Notifications",authors:"mpolinowski",tags:["LINUX","Slack","Zabbix"]},sidebar:"tutorialSidebar",previous:{title:"Zabbix v6 SMART HDD Check",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check/2022-01-15"},next:{title:"Zabbix v6 Email Notifications",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-email-notifications/2022-01-15"}},c={},l=[{value:"Preparing Slack",id:"preparing-slack",level:3},{value:"Configure Zabbix",id:"configure-zabbix",level:3}],p={toc:l};function d(t){let{components:e,...o}=t;return(0,n.kt)("wrapper",(0,i.Z)({},p,o,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"TST, Hong Kong",src:a(17868).Z,width:"1500",height:"622"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#preparing-slack"},"Preparing Slack")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#configure-zabbix"},"Configure Zabbix"))),(0,n.kt)("h3",{id:"preparing-slack"},"Preparing Slack"),(0,n.kt)("p",null,"Start by creating a Channel for the Zabbix bot:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(67396).Z,width:"1011",height:"567"})),(0,n.kt)("p",null,"Now click to ",(0,n.kt)("a",{parentName:"p",href:"https://api.slack.com/apps?new_app=1"},"add a new app")," and click on the link in the top right that leads you to the ",(0,n.kt)("strong",{parentName:"p"},"App Directory")," that will open the Slack webpage inside your default browser. In the top right click on the ",(0,n.kt)("strong",{parentName:"p"},"Build")," tab and then on the big ",(0,n.kt)("strong",{parentName:"p"},"Start Building")," button."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(33227).Z,width:"1051",height:"506"})),(0,n.kt)("p",null,"Give your app a name and assign a workspace then click on ",(0,n.kt)("strong",{parentName:"p"},"Create App"),". In the following list select ",(0,n.kt)("strong",{parentName:"p"},"Bots"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(5990).Z,width:"916",height:"431"})),(0,n.kt)("p",null,"There we need to assign a scope to your bot token. Click on ",(0,n.kt)("strong",{parentName:"p"},"Review Scopes to Add"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(6808).Z,width:"1019",height:"909"})),(0,n.kt)("p",null,"Add the ",(0,n.kt)("inlineCode",{parentName:"p"},"chat.write")," scope and click on ",(0,n.kt)("strong",{parentName:"p"},"Install App to Workspace")," and give permission to your bot to access your workspace. You will now be given a token that you have to copy into the Zabbix interface so that Zabbix will be able to use the bot to send messages to your workspace:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(16272).Z,width:"964",height:"421"})),(0,n.kt)("h3",{id:"configure-zabbix"},"Configure Zabbix"),(0,n.kt)("p",null,"Open the Zabbix dashboard, enter the ",(0,n.kt)("strong",{parentName:"p"},"Media types")," configuration and select the ",(0,n.kt)("strong",{parentName:"p"},"Slack")," media type:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(49689).Z,width:"1149",height:"367"})),(0,n.kt)("p",null,"Copy your bot token in to the ",(0,n.kt)("inlineCode",{parentName:"p"},"bot_token")," field and set the channel we want to bot to post into - click on ",(0,n.kt)("strong",{parentName:"p"},"Update")," to save your settings. Before using the Webhook, you need to setup the global macro ",(0,n.kt)("inlineCode",{parentName:"p"},"{$ZABBIX.URL}"),", which must contain the URL to the Zabbix frontend - go to ",(0,n.kt)("strong",{parentName:"p"},"Administration")," / ",(0,n.kt)("strong",{parentName:"p"},"General")," / ",(0,n.kt)("strong",{parentName:"p"},"Macros"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(66567).Z,width:"1169",height:"339"})),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Test")," the bot (the Test will complain about some undefined variables - you can fill them with dummy data:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(18453).Z,width:"1034",height:"880"})),(0,n.kt)("p",null,"Now the test runs successfully and you should receive the test message in ",(0,n.kt)("inlineCode",{parentName:"p"},"#server_management"),":"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(98977).Z,width:"953",height:"338"})),(0,n.kt)("p",null,"Great! Now we can add the Slack notification as a ",(0,n.kt)("strong",{parentName:"p"},"Media Type")," inside our user notification settings:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(85124).Z,width:"981",height:"443"})),(0,n.kt)("p",null,"Make sure that reporting problems to Zabbix Administrators is activated and you are good to go:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Slack Notifications",src:a(92939).Z,width:"1262",height:"351"})))}d.isMDXComponent=!0},67396:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_01-33521b9ac5b36bb430b15d1987a31f34.png"},33227:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_02-d92c2c48c30ff2d87853c968a1f974ee.png"},5990:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_03-8d62ed4498e1afe805e5f15ddbb3c1ac.png"},6808:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_04-d98d58514269dccff780811eaaea628b.png"},16272:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_05-0866ef4d7130271be9c4117042ee39f7.png"},49689:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_06-7aa2abcc3dbccb97ad110901d174c6bc.png"},66567:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_06b-381fc5912b34dc5c2dd1ea2e93dc9937.png"},18453:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_07-f372bb628581910fab6e33d9dae77c37.png"},98977:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_08-a49841d02d5682bb0d930709ea760402.png"},85124:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_09-786475225232487d6e47261b527de87e.png"},92939:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/Slack_Notifications_10-dfb00129393dbaa5f4521026ee5d5a1c.png"},17868:(t,e,a)=>{a.d(e,{Z:()=>i});const i=a.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-d8b333d1f9ddf34ac7392aef86b14c83.jpg"}}]);