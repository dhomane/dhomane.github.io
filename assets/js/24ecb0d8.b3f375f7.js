"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[69638],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),l=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=l(n),m=r,h=u["".concat(i,".").concat(m)]||u[m]||d[m]||s;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=u;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var l=2;l<s;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},18997:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>p,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));const s={sidebar_position:9050,slug:"2017-07-04",title:"Random Password Generator",authors:"mpolinowski",tags:["Javascript","React"]},o=void 0,p={unversionedId:"Development/Javascript/2017-07-04--random-password-generator/index",id:"Development/Javascript/2017-07-04--random-password-generator/index",title:"Random Password Generator",description:"Tana Island, Vanuatu",source:"@site/docs/Development/Javascript/2017-07-04--random-password-generator/index.mdx",sourceDirName:"Development/Javascript/2017-07-04--random-password-generator",slug:"/Development/Javascript/2017-07-04--random-password-generator/2017-07-04",permalink:"/docs/Development/Javascript/2017-07-04--random-password-generator/2017-07-04",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Development/Javascript/2017-07-04--random-password-generator/index.mdx",tags:[{label:"Javascript",permalink:"/docs/tags/javascript"},{label:"React",permalink:"/docs/tags/react"}],version:"current",sidebarPosition:9050,frontMatter:{sidebar_position:9050,slug:"2017-07-04",title:"Random Password Generator",authors:"mpolinowski",tags:["Javascript","React"]},sidebar:"tutorialSidebar",previous:{title:"Food Caloric Table App",permalink:"/docs/Development/Javascript/2017-07-22--caloric-burn/2017-07-22"},next:{title:"Node Express Static",permalink:"/docs/Development/Javascript/2016-08-11--node-express-static-wiki/2016-08-11"}},i={},l=[{value:"Create the Express App",id:"create-the-express-app",level:2},{value:"Create the React App",id:"create-the-react-app",level:2},{value:"Concurrently",id:"concurrently",level:2},{value:"Create Static Version of our React App",id:"create-static-version-of-our-react-app",level:2}],c={toc:l};function d(e){let{components:t,...s}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Tana Island, Vanuatu",src:n(38381).Z,width:"1500",height:"823"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This is a create-react-app demo based on the article ",(0,r.kt)("a",{parentName:"p",href:"https://daveceddia.com/create-react-app-express-production/"},"Create React App with Express in Production")," by Dave Ceddia. We want to use the React App generator to create static pages from our React Pass-Gen App, routed through a Node/Express Server."),(0,r.kt)("p",{parentName:"blockquote"},"The original article went on to deploy the app to Heroku - please refer to the original article about that. What we do differently here, is adding a way to comfortably edit (hot reloading) our app in an development environment using the package ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/kimmobrunfeldt/concurrently"},"Concurrently"),". This allows us to run both, the Express and React App, inside one terminal and automatically switch to serving a static representation of our React App inside Express, once we switch to a production environment.")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/mpolinowski/random-pass-gen"},"Github")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#create-the-express-app"},"Create the Express App")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#create-the-react-app"},"Create the React App")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#concurrently"},"Concurrently")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#create-static-version-of-our-react-app"},"Create Static Version of our React App"))),(0,r.kt)("h2",{id:"create-the-express-app"},"Create the Express App"),(0,r.kt)("p",null,"Create a directory and cd in to it with your Terminal or Git Bash. You can initialize your app with npm:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm init\n")),(0,r.kt)("p",null,"Now we need to add two packages through npm: our ",(0,r.kt)("a",{parentName:"p",href:"https://expressjs.com"},"express router")," and a ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/password-generator"},"password generator"),", and we will use Express to provides a single API endpoint, ",(0,r.kt)("strong",{parentName:"p"},"/api/passwords"),". We use the ",(0,r.kt)("em",{parentName:"p"},"--save")," to add those dependencies to our package.json file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save express password-generator\n")),(0,r.kt)("p",null,"Create a file called index.js, which will be the Express app, and type this in:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const express = require('express');\nconst path = require('path');\nconst generatePassword = require('password-generator');\n\nconst app = express();\n\n// Serve static files from the React app\n// Use this to just simulate a production environment - it always! serves the static files /client/build\n// ------------------------------------------------\n// app.use(express.static(path.join(__dirname, 'client/build')));\n// ------------------------------------------------\n// this statement will use the live react app in development,\n// but will expect you to have a static version of the app in /client/build once you switch to production\n// remove if above case is uncommented!\nif (process.env.NODE_ENV === 'production') {\n  app.use(express.static('client/build'));\n}\n\n// Put all API endpoints under '/api'\napp.get('/api/passwords', (req, res) => {\n  const count = 5;\n\n  // Generate some passwords\n  const passwords = Array.from(Array(count).keys()).map(i =>\n    generatePassword(12, false)\n  )\n\n  // Return them as json\n  res.json(passwords);\n\n  console.log(`Sent ${count} passwords`);\n});\n\n// The 'catchall' handler: for any request that doesn't\n// match one above, send back React's index.html file.\napp.get('*', (req, res) => {\n  res.sendFile(path.join(__dirname+'/client/build/index.html'));\n});\n\nconst port = process.env.PORT || 5000;\napp.listen(port);\n\nconsole.log(`Password generator listening on ${port}`);\n")),(0,r.kt)("p",null,"We\u2019re also going to need a \u201cstart\u201d script in package.json, to be able to start our app with the ",(0,r.kt)("strong",{parentName:"p"},"npm start")," command. Open package.json and add a scripts section at the bottom. The full file should look something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},"{\n  'name': 'random-pass-gen',\n  'version': '1.0.0',\n  'description': 'create-react-app demo',\n  'main': 'index.js',\n  'scripts': {\n    'test': 'echo \\'Error: no test specified\\' && exit 1'\n  },\n  'author': 'Mike Polinowski',\n  'license': 'ISC',\n  'dependencies': {\n    'express': '^4.15.4',\n    'password-generator': '^2.1.0'\n  },\n  'scripts': {\n    'start': 'node index.js'\n  }\n}\n")),(0,r.kt)("p",null,"We can test our app with ",(0,r.kt)("strong",{parentName:"p"},"npm start")," and opening the following URL inside our Browser (or CURL): ",(0,r.kt)("em",{parentName:"p"},"http://localhost:5000/api/passwords"),". The start command starts our Node/Express Server on our localhost with the port defined inside index.js (5000). Calling the API endpoint /api/password gives us access to the password generator."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"React Password Generator",src:n(44324).Z,width:"1448",height:"712"})),(0,r.kt)("h2",{id:"create-the-react-app"},"Create the React App"),(0,r.kt)("p",null,"We\u2019re going to use ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/facebookincubator/create-react-app"},"Create React App")," to generate a project. We will run this React App in our dev environment inside the subfolder ",(0,r.kt)("em",{parentName:"p"},"/client"),". But we will create a static version of our app inside ",(0,r.kt)("em",{parentName:"p"},"client/build")," (as already defined inside ",(0,r.kt)("strong",{parentName:"p"},"index.js")," of our Express App) once we move to a production environment. This generation of a static version is part of the functionality offered by create-react-app."),(0,r.kt)("p",null,"If you don\u2019t have Create React App installed yet, do that first:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install -g create-react-app\n")),(0,r.kt)("p",null,"Generate the React app inside the Express app directory:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"create-react-app client\n")),(0,r.kt)("p",null,"To test the app, cd in to the ",(0,r.kt)("em",{parentName:"p"},"/client")," directory and run ",(0,r.kt)("strong",{parentName:"p"},"npm start"),". This will run the create-react-app starter app with some boilerplate code on port 3000:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"React Password Generator",src:n(46017).Z,width:"832",height:"915"})),(0,r.kt)("p",null,"Create React App will proxy API requests from the React app to the Express app if we add a \u201cproxy\u201d key in package.json like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},"'proxy': 'http://localhost:5000'\n")),(0,r.kt)("p",null,"This goes in client/package.json, not in the Express app\u2019s package.json!"),(0,r.kt)("p",null,"Now we want to replace the boilerplate app with our own - the code is located inside ",(0,r.kt)("em",{parentName:"p"},"/client/src/app.js"),". We will replace it with the following code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React, { Component } from 'react';\nimport './App.css';\n\nclass App extends Component {\n  // Initialize state\n  state = { passwords: [] }\n\n  // Fetch passwords after first mount\n  componentDidMount() {\n    this.getPasswords();\n  }\n\n  getPasswords = () => {\n    // Get the passwords and store them in state\n    fetch('/api/passwords')\n      .then(res => res.json())\n      .then(passwords => this.setState({ passwords }));\n  }\n\n  render() {\n    const { passwords } = this.state;\n\n    return (\n      <div className='App'>\n        {/* Render the passwords if we have them */}\n        {passwords.length ? (\n          <div>\n            <h1>5 Passwords.</h1>\n            <ul className='passwords'>\n              {/*\n                Generally it's bad to use 'index' as a key.\n                It's ok for this example because there will always\n                be the same number of passwords, and they never\n                change positions in the array.\n              */}\n              {passwords.map((password, index) =>\n                <li key={index}>\n                  {password}\n                </li>\n              )}\n            </ul>\n            <button\n              className='more'\n              onClick={this.getPasswords}>\n              Get More\n            </button>\n          </div>\n        ) : (\n          // Render a helpful message otherwise\n          <div>\n            <h1>No passwords :(</h1>\n            <button\n              className='more'\n              onClick={this.getPasswords}>\n              Try Again?\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n")),(0,r.kt)("p",null,"And while we are add it, just add some styling in ",(0,r.kt)("em",{parentName:"p"},"/client/src/app.css")," to make our app look pretty:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-css"},".App {\n  text-align: center;\n  font-family: 'Courier New', monospace;\n  width: 100%;\n}\n\nh1 {\n  font-weight: normal;\n  font-size: 42px;\n}\n\n.passwords {\n  list-style: none;\n  padding: 0;\n  font-size: 32px;\n  margin-bottom: 2em;\n}\n\n.more {\n  font-size: 32px;\n  font-family: 'Courier New', monospace;\n  border: 2px solid #000;\n  background-color: #fff;\n  padding: 10px 25px;\n}\n.more:hover {\n  background-color: #FDD836;\n}\n.more:active {\n  background-color: #FFEFA9;\n}\n")),(0,r.kt)("p",null,"When you restart your app now (inside the client director), you will see our Password Generator in all it's glory on ",(0,r.kt)("em",{parentName:"p"},"localhost:3000"),"."),(0,r.kt)("h2",{id:"concurrently"},"Concurrently"),(0,r.kt)("p",null,"Our React app (on Port 3000) is already proxying to our Express App (on Port 5000). But we would have to use two terminals to run both apps at once - which is something you can try now, if you like. Our React app is already up. Now open a second terminal inside the top-level directory and ",(0,r.kt)("strong",{parentName:"p"},"npm start")," the express app. When you open your browser on Port 5000, you will see our app!"),(0,r.kt)("p",null,"This setup is nice, because it allows you to edit your app and have it hot-reloading inside your browser!"),(0,r.kt)("p",null,"But we want to have this dev-environment run with a single command. As well as have our app decide whether to serve directly from the React App or look for a static build instead, based on the NODE_ENV (Production or Development). This is where ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/kimmobrunfeldt/concurrently"},"Concurrently")," comes to the rescue. We already explained how this works ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mpolinowski/caloric-burn#concurrently"},"here")," - so we don't have to go into too much details."),(0,r.kt)("p",null,"We first have to install the package on the top-level directory:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev concurrently\n")),(0,r.kt)("p",null,"Then add npm start scripts to the top-level package.json file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},"'scripts': {\n  'start-dev': 'concurrently \\'npm run server\\' \\'npm run client\\'',\n  'server': 'node index.js',\n  'client': 'node start-client.js',\n  'start': 'node index.js'\n},\n")),(0,r.kt)("p",null,"And add the ",(0,r.kt)("strong",{parentName:"p"},"start-client.js")," file to start our React app from the top-level:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const args = [ 'start' ];\nconst opts = { stdio: 'inherit', cwd: 'client', shell: true };\nrequire('child_process').spawn('npm', args, opts);\n")),(0,r.kt)("p",null,"Now run ",(0,r.kt)("strong",{parentName:"p"},"npm start")," in the top level and you will see that both the Express App and React App will be started:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ npm start\n\n> random-pass-gen@1.0.0 start E:\\random-pass-gen\n> concurrently 'npm run server' 'npm run client'\n...\nPassword generator listening on 5000\n...\nStarting the development server...\nYou can now view client in the browser.\nhttp://localhost:3000/\n")),(0,r.kt)("h2",{id:"create-static-version-of-our-react-app"},"Create Static Version of our React App"),(0,r.kt)("p",null,"Make sure that you are inside the ",(0,r.kt)("em",{parentName:"p"},"/client")," directory and execute:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run build\n")),(0,r.kt)("p",null,"which is a command that was defined by create-react-app (",(0,r.kt)("strong",{parentName:"p"},"react-scripts"),") inside ",(0,r.kt)("em",{parentName:"p"},"/client/package.json"),". It will create a optimized static version of our app inside ",(0,r.kt)("em",{parentName:"p"},"/client/build"),". This is the folder that we already told our Express App (see index.js in the top-level directory) would contain our static content. To test if the static content is served correctly by our Express App, just set your NODE_ENV to production - or just comment out the following inside ",(0,r.kt)("em",{parentName:"p"},"/index.js"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"if (process.env.NODE_ENV === 'production') {\n  app.use(express.static('client/build'));\n}\n")),(0,r.kt)("p",null,"and use this statement instead:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"app.use(express.static(path.join(__dirname, 'client/build')));\n")),(0,r.kt)("p",null,"So by opening our Express App on port 5000 we will have our Express App serving our React App as static content from the /build folder:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run server\n")),(0,r.kt)("p",null,"You can access it from your browser:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"}," http://localhost:3000\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"React Password Generator",src:n(90509).Z,width:"491",height:"561"})))}d.isMDXComponent=!0},46017:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/boilerplate-page-dd1e44ef988c7acaaa70b4bd0a7d1e0e.png"},44324:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/password-generator-working-dac6805a683fae013e56ddea8da09fae.png"},90509:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/password-generator-f61290158c813bb21a2a16f809468aab.gif"},38381:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/photo-34445476982_dccd0eb8e7_o-2364c72590cac313a3c2e1d562a10bda.png"}}]);