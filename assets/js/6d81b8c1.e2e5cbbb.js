"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[52784],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>b});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=c(a),b=r,u=m["".concat(l,".").concat(b)]||m[b]||p[b]||i;return a?n.createElement(u,s(s({ref:t},d),{},{components:a})):n.createElement(u,s({ref:t},d))}));function b(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var c=2;c<i;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},50678:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const i={sidebar_position:7090,slug:"2022-01-15",title:"Zabbix v6 SMART HDD Check",authors:"mpolinowski",tags:["LINUX","Zabbix"]},s=void 0,o={unversionedId:"DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check/index",id:"DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check/index",title:"Zabbix v6 SMART HDD Check",description:"TST, Hong Kong",source:"@site/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check/index.md",sourceDirName:"DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check",slug:"/DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check/2022-01-15",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check/2022-01-15",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-smart-hdd-check/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Zabbix",permalink:"/docs/tags/zabbix"}],version:"current",sidebarPosition:7090,frontMatter:{sidebar_position:7090,slug:"2022-01-15",title:"Zabbix v6 SMART HDD Check",authors:"mpolinowski",tags:["LINUX","Zabbix"]},sidebar:"tutorialSidebar",previous:{title:"Zabbix v6 Creating triggers for Baseline monitoring and Anomaly detection",permalink:"/docs/DevOps/Zabbix/2022-01-16--zabbix-v6-baseline-monitoring/2022-01-16"},next:{title:"Zabbix v6 Slack Notifications",permalink:"/docs/DevOps/Zabbix/2022-01-15--zabbix-v6-slack-notifications/2022-01-15"}},l={},c=[{value:"Install Smartmontools",id:"install-smartmontools",level:2},{value:"Using Smartctl",id:"using-smartctl",level:3},{value:"Add SMART Zabbix Plugin",id:"add-smart-zabbix-plugin",level:2}],d={toc:c};function p(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"TST, Hong Kong",src:a(84816).Z,width:"1500",height:"622"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#install-smartmontools"},"Install Smartmontools"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#using-smartctl"},"Using Smartctl")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#add-smart-zabbix-plugin"},"Add SMART Zabbix Plugin"))),(0,r.kt)("p",null,"S.M.A.R.T. (Self-Monitoring, Analysis and Reporting Technology; often written as SMART) is a monitoring system included in computer hard disk drives (HDDs), solid-state drives (SSDs), and eMMC drives"),(0,r.kt)("h2",{id:"install-smartmontools"},"Install Smartmontools"),(0,r.kt)("p",null,"The smartmontools package comes with two utilities, smartctl which you can use to check your hard drives on the command line, and smartd, a daemon that checks your hard disks at a specified interval and logs warnings/errors to the syslog and can also send warnings and errors to a specified email address (usually the admin of the system)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"apt install smartmontools\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"smartctl -v\n\nsmartctl 7.2 2020-12-30 r5155 [x86_64-linux-5.10.0-11-amd64] (local build)\nCopyright (C) 2002-20, Bruce Allen, Christian Franke, www.smartmontools.org\n")),(0,r.kt)("h3",{id:"using-smartctl"},"Using Smartctl"),(0,r.kt)("p",null,"Find partition:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"df -h\n\nFilesystem      Size  Used Avail Use% Mounted on\nudev            3.8G     0  3.8G   0% /dev\ntmpfs           777M  996K  776M   1% /run\n/dev/sda1        75G   43G   30G  59% /\ntmpfs           3.8G     0  3.8G   0% /dev/shm\ntmpfs           5.0M     0  5.0M   0% /run/lock\n/dev/sda15      121M  130K  120M   1% /boot/efi\n")),(0,r.kt)("p",null,"In the case of my test server below we have a virtual machine - that, obviously, does not have access to the underlying HDD hardware ",(0,r.kt)("inlineCode",{parentName:"p"},"/dev/sda1"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"smartctl -a /dev/sda1\n\n=== START OF INFORMATION SECTION ===\nVendor:               QEMU\nProduct:              QEMU HARDDISK\nRevision:             2.5+\nCompliance:           SPC-3\nUser Capacity:        81,923,145,728 bytes [81.9 GB]\nLogical block size:   512 bytes\nLU is thin provisioned, LBPRZ=0\nDevice type:          disk\nLocal Time is:        Sun Jan 30 05:14:03 2022 CET\nSMART support is:     Unavailable - device lacks SMART capability.\n\n=== START OF READ SMART DATA SECTION ===\nCurrent Drive Temperature:     0 C\nDrive Trip Temperature:        0 C\n")),(0,r.kt)("p",null,"When you see that the ",(0,r.kt)("inlineCode",{parentName:"p"},"SMART support is:")," ",(0,r.kt)("strong",{parentName:"p"},"disabled")," run the following command to enable it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"smartctl -s on -a /dev/sda1\n")),(0,r.kt)("h2",{id:"add-smart-zabbix-plugin"},"Add SMART Zabbix Plugin"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://www.zabbix.com/integrations/smart"},"template for monitoring S.M.A.R.T. attributes")," of physical disk that works without any external scripts. It collects metrics by Zabbix agent 2 version 5.0 and later with Smartmontools version 7.1 and later. Disk discovery LLD rule finds all HDD, SSD, NVMe disks with S.M.A.R.T. enabled. Attribute discovery LLD rule finds all Vendor Specific Attributes for each disk."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"SMART Zabbix Plugin",src:a(46158).Z,width:"834",height:"372"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"SMART Zabbix Plugin",src:a(17010).Z,width:"893",height:"440"})))}p.isMDXComponent=!0},46158:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Zabbix_SMART_Monitor_01-b4fcc9c4374182630743a1b3f14a8f6a.jpg"},17010:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Zabbix_SMART_Monitor_02-493d45df941c9b99e7880c40769a2587.jpg"},84816:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-d8b333d1f9ddf34ac7392aef86b14c83.jpg"}}]);