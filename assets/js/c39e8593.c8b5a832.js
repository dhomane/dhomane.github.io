"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[62292],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),o=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=o(e.components);return a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),h=o(n),m=r,d=h["".concat(i,".").concat(m)]||h[m]||u[m]||s;return n?a.createElement(d,l(l({ref:t},p),{},{components:n})):a.createElement(d,l({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,l=new Array(s);l[0]=h;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c.mdxType="string"==typeof e?e:r,l[1]=c;for(var o=2;o<s;o++)l[o]=n[o];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},85225:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>o});var a=n(87462),r=(n(67294),n(3905));const s={sidebar_position:9090,slug:"2017-12-05",title:"React Search Interface",authors:"mpolinowski",tags:["Javascript","React","Databases","Elasticsearch"]},l=void 0,c={unversionedId:"DevOps/Elasticsearch/2017-12-05--elasticsearch-react-example/index",id:"DevOps/Elasticsearch/2017-12-05--elasticsearch-react-example/index",title:"React Search Interface",description:"Tanna Island, Vanuatu",source:"@site/docs/DevOps/Elasticsearch/2017-12-05--elasticsearch-react-example/index.mdx",sourceDirName:"DevOps/Elasticsearch/2017-12-05--elasticsearch-react-example",slug:"/DevOps/Elasticsearch/2017-12-05--elasticsearch-react-example/2017-12-05",permalink:"/docs/DevOps/Elasticsearch/2017-12-05--elasticsearch-react-example/2017-12-05",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Elasticsearch/2017-12-05--elasticsearch-react-example/index.mdx",tags:[{label:"Javascript",permalink:"/docs/tags/javascript"},{label:"React",permalink:"/docs/tags/react"},{label:"Databases",permalink:"/docs/tags/databases"},{label:"Elasticsearch",permalink:"/docs/tags/elasticsearch"}],version:"current",sidebarPosition:9090,frontMatter:{sidebar_position:9090,slug:"2017-12-05",title:"React Search Interface",authors:"mpolinowski",tags:["Javascript","React","Databases","Elasticsearch"]},sidebar:"tutorialSidebar",previous:{title:"Elasticsearch and Kibana",permalink:"/docs/DevOps/Elasticsearch/2017-12-26--elasticsearch-kibana/2017-12-16"},next:{title:"Search Engine Setup and Configuration",permalink:"/docs/DevOps/Elasticsearch/2017-10-03--search-engine-setup-and-configuration/2017-10-03"}},i={},o=[{value:"elasticsearch-react-example",id:"elasticsearch-react-example",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"To run the example:",id:"to-run-the-example",level:2},{value:"Original createClass Syntax",id:"original-createclass-syntax",level:2},{value:"Update to a Elasticsearch 5.x index",id:"update-to-a-elasticsearch-5x-index",level:2},{value:"ES6 Class Syntax",id:"es6-class-syntax",level:2}],p={toc:o};function u(e){let{components:t,...s}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Tanna Island, Vanuatu",src:n(51964).Z,width:"1932",height:"660"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#elasticsearch-react-example"},"elasticsearch-react-example")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#prerequisites"},"Prerequisites")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#to-run-the-example"},"To run the example:")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#original-createclass-syntax"},"Original createClass Syntax")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#update-to-a-elasticsearch-5x-index"},"Update to a Elasticsearch 5.x index")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#es6-class-syntax"},"ES6 Class Syntax"))),(0,r.kt)("h2",{id:"elasticsearch-react-example"},"elasticsearch-react-example"),(0,r.kt)("p",null,"An example project showing how to use ElasticSearch with React - based on ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/scotchfield/elasticsearch-react-example"},"elasticsearch-react-example")," by ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/scotchfield"},"scotchfield")),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"To run this example, you will need to configure Elasticsearch to accept requests from the browser using ",(0,r.kt)("a",{parentName:"p",href:"http://en.wikipedia.org/wiki/Cross-origin_resource_sharing"},"CORS"),". To enable CORS, add the following to Elasticsearch's config file. Usually, this file is located near the elasticsearch executable at ",(0,r.kt)("inlineCode",{parentName:"p"},"config/elasticsearch.yml"),". ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/spalger/elasticsearch-angular-example"},"source")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"http.cors:\n  enabled: true\n  allow-origin: /https?:\\/\\/localhost(:[0-9]+)?/\n")),(0,r.kt)("h2",{id:"to-run-the-example"},"To run the example:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Clone this repo locally (or just download and unzip it)"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/mpolinowski/elasticsearch-react-example.git\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Move into the project"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd elasticsearch-react-example\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Run npm install"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Run webpack (or webpack-dev-server) to build the index.js source file."))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"original-createclass-syntax"},"Original createClass Syntax"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import React from 'react'\nimport { render } from 'react-dom'\nimport elasticsearch from 'elasticsearch'\n\nlet client = new elasticsearch.Client({\n  host: 'localhost:9200',\n  log: 'trace'\n})\n\nconst App = React.createClass({\n  getInitialState() {\n    return {\n      results: []\n    }\n  },\n  handleChange(event) {\n    const search_query = event.target.value\n\n    client.search({\n      q: search_query\n    }).then(function (body) {\n      this.setState({ results: body.hits.hits })\n    }.bind(this), function (error) {\n      console.trace(error.message);\n    });\n  },\n  render() {\n    return (\n      <div className='container'>\n        <input type='text' onChange={this.handleChange} />\n        <SearchResults results={this.state.results} />\n      </div>\n    )\n  }\n})\n\nconst SearchResults = React.createClass({\n  propTypes: {\n    results: React.PropTypes.array\n  },\n  getDefaultProps() {\n    return { results: [] }\n  },\n  render() {\n    return (\n      <div className='search_results'>\n        <hr />\n        <ul>\n          {this.props.results.map((result) => {\n            return <li key={result._id}>{result._source.name}</li>\n          })}\n        </ul>\n      </div>\n    )\n  }\n})\n\n\nrender(<App />, document.getElementById('main'))\n")),(0,r.kt)("h2",{id:"update-to-a-elasticsearch-5x-index"},"Update to a Elasticsearch 5.x index"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import React from 'react'\nimport { render } from 'react-dom'\nimport elasticsearch from 'elasticsearch'\n\nconst connectionString = 'localhost:9200';\nconst _index = 'wiki2_de_2017_09_09';\nconst _type = 'article';\n\nconst App = React.createClass({\n  getInitialState() {\n    return {\n      results: []\n    }\n  },\n  handleChange(event) {\n    const search_query = event.target.value\n\n    client.search({\n      index: _index,\n      type: _type,\n      q: search_query,\n      body: {\n        query: {\n          multi_match: {\n            query: search_query,\n            fields: ['title^100', 'tags^100', 'abstract^20', 'description^10', 'chapter^5', 'title2^10', 'description2^10'],\n            fuzziness: 1,\n          },\n        },\n      },\n    }).then(function (body) {\n      this.setState({ results: body.hits.hits })\n    }.bind(this), function (error) {\n      console.trace(error.message);\n    });\n  },\n\n  render() {\n    return (\n      <div className='container'>\n        <input type='text' onChange={this.handleChange} />\n        <SearchResults results={this.state.results} />\n      </div>\n    )\n  }\n})\n\nconst SearchResults = React.createClass({\n  propTypes: {\n    results: React.PropTypes.array\n  },\n  getDefaultProps() {\n    return { results: [] }\n  },\n  render() {\n    return (\n      <div className='search_results'>\n        <hr />\n        <ul>\n          {props.results.map((result) => {\n            return\n            <li key={result._id}>\n              <h3>{result._source.title}</h3><br />\n              <a href={`${result._source.link}`}><img src={result._source.image} alt={result._source.abstract} /><br /></a>\n              <p>{result._source.abstract}</p>\n            </li>\n          })}\n        </ul>\n      </div>\n    )\n  }\n})\n\n\nrender(<App />, document.getElementById('main'))\n")),(0,r.kt)("h2",{id:"es6-class-syntax"},"ES6 Class Syntax"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport elasticsearch from 'elasticsearch';\n\nconst connectionString = 'localhost:9200';\nconst _index = 'wiki2_de_2017_09_09';\nconst _type = 'article';\n\nlet client = new elasticsearch.Client({\n  host: connectionString,\n  log: 'trace'\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { results: [] };\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(event) {\n    const search_query = event.target.value;\n\n    client.search({\n      index: _index,\n      type: _type,\n      body: {\n        query: {\n          multi_match: {\n            query: search_query,\n            fields: ['title^100', 'tags^100', 'abstract^20', 'description^10', 'chapter^5', 'title2^10', 'description2^10'],\n            fuzziness: 1,\n          },\n        },\n      },\n    }).then(function (body) {\n      this.setState({ results: body.hits.hits });\n    }.bind(this),\n      function (error) {\n        console.trace(error.message);\n      }\n    );\n  }\n\n  render() {\n    return (\n      <div className='container'>\n        <input type='text' onChange={this.handleChange} />\n        <SearchResults results={this.state.results} />\n      </div>\n    );\n  }\n}\n\nconst SearchResults = ({ results }) => (\n  <div className='search_results'>\n    <hr />\n\n    <table>\n      <thead>\n        <tr>\n          <th>Title</th>\n        </tr>\n      </thead>\n      <tbody>\n        {results.map((result, i) =>\n          <ResultRow key={i}\n            title={result._source.title2} />\n        )}\n      </tbody>\n    </table>\n  </div>\n)\n\nconst ResultRow = ({ title }) => (\n  <tr>\n    <td>\n      {title}\n    </td>\n  </tr>\n)\n\n\n\nrender(<App />, document.getElementById('main'));\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.newmediacampaigns.com/blog/refactoring-react-components-to-es6-classes"},"https://www.newmediacampaigns.com/blog/refactoring-react-components-to-es6-classes")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://babeljs.io/blog/2015/06/07/react-on-es6-plus"},"https://babeljs.io/blog/2015/06/07/react-on-es6-plus")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://medium.com/dailyjs/we-jumped-the-gun-moving-react-components-to-es2015-class-syntax-2b2bb6f35cb3"},"https://medium.com/dailyjs/we-jumped-the-gun-moving-react-components-to-es2015-class-syntax-2b2bb6f35cb3")))}u.isMDXComponent=!0},51964:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/photo-34445485832_9f5f2a9aea_o-2763bd992e050a1540d61800bbed780e.png"}}]);