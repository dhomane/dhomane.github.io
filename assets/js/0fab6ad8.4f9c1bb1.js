"use strict";(self.webpackChunkmikes_dev_notebook=self.webpackChunkmikes_dev_notebook||[]).push([[83275],{3905:(e,n,a)=>{a.d(n,{Zo:()=>d,kt:()=>g});var t=a(67294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=t.createContext({}),p=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},d=function(e){var n=p(e.components);return t.createElement(l.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(a),g=r,h=m["".concat(l,".").concat(g)]||m[g]||c[g]||i;return a?t.createElement(h,o(o({ref:n},d),{},{components:a})):t.createElement(h,o({ref:n},d))}));function g(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}m.displayName="MDXCreateElement"},72797:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var t=a(87462),r=(a(67294),a(3905));const i={sidebar_position:7040,slug:"2020-12-03",title:"OpenHAB 3 INSTAR Camera Binding",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT"]},o=void 0,s={unversionedId:"IoT-and-Machine-Learning/Home_Automation/2020-12-03--openhab3-camera-binding/index",id:"IoT-and-Machine-Learning/Home_Automation/2020-12-03--openhab3-camera-binding/index",title:"OpenHAB 3 INSTAR Camera Binding",description:"Shenzhen, China",source:"@site/docs/IoT-and-Machine-Learning/Home_Automation/2020-12-03--openhab3-camera-binding/index.md",sourceDirName:"IoT-and-Machine-Learning/Home_Automation/2020-12-03--openhab3-camera-binding",slug:"/IoT-and-Machine-Learning/Home_Automation/2020-12-03--openhab3-camera-binding/2020-12-03",permalink:"/docs/IoT-and-Machine-Learning/Home_Automation/2020-12-03--openhab3-camera-binding/2020-12-03",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/IoT-and-Machine-Learning/Home_Automation/2020-12-03--openhab3-camera-binding/index.md",tags:[{label:"LINUX",permalink:"/docs/tags/linux"},{label:"Smarthome",permalink:"/docs/tags/smarthome"},{label:"IoT",permalink:"/docs/tags/io-t"}],version:"current",sidebarPosition:7040,frontMatter:{sidebar_position:7040,slug:"2020-12-03",title:"OpenHAB 3 INSTAR Camera Binding",authors:"mpolinowski",tags:["LINUX","Smarthome","IoT"]},sidebar:"tutorialSidebar",previous:{title:"Home Assistant - Python Scripts as Service",permalink:"/docs/IoT-and-Machine-Learning/Home_Automation/2022-07-12-home-assistant-mqtt-python/2022-07-12"},next:{title:"OpenHAB 3 MQTT Binding",permalink:"/docs/IoT-and-Machine-Learning/Home_Automation/2020-12-02--openhab3-mqtt-binding/2020-12-02"}},l={},p=[{value:"Add a Camera Thing",id:"add-a-camera-thing",level:2},{value:"Installing FFMPEG",id:"installing-ffmpeg",level:3},{value:"Add an Snapshot Channel",id:"add-an-snapshot-channel",level:2},{value:"Camera Control",id:"camera-control",level:2}],d={toc:p};function c(e){let{components:n,...i}=e;return(0,r.kt)("wrapper",(0,t.Z)({},d,i,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Shenzhen, China",src:a(1059).Z,width:"1500",height:"676"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#add-a-camera-thing"},"Add a Camera Thing"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#installing-ffmpeg"},"Installing FFMPEG")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#add-an-snapshot-channel"},"Add an Snapshot Channel")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#camera-control"},"Camera Control"))),(0,r.kt)("h2",{id:"add-a-camera-thing"},"Add a Camera Thing"),(0,r.kt)("p",null,"After installing the camera binding we can continue with adding our camera. Go to ",(0,r.kt)("strong",{parentName:"p"},"Things")," and select the camera binding (install it if it is missing by clicking on ",(0,r.kt)("strong",{parentName:"p"},"Install More Bindings"),"):"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(23247).Z,width:"1037",height:"316"})),(0,r.kt)("p",null,"Select the INSTAR preset for your camera:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(79262).Z,width:"783",height:"379"})),(0,r.kt)("p",null,"Now configure the ",(0,r.kt)("strong",{parentName:"p"},"Thing")," with your camera IP, ONVIF server port (",(0,r.kt)("em",{parentName:"p"},"default 8080")," - make sure to deactivate authentication in your camera's webUI) and your camera admin login:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(70176).Z,width:"757",height:"911"})),(0,r.kt)("h3",{id:"installing-ffmpeg"},"Installing FFMPEG"),(0,r.kt)("p",null,"The camera binding is using FFMPEG to provide video streams and snapshots from your camera. Make sure that FFMPEG is installed on your system by running ",(0,r.kt)("inlineCode",{parentName:"p"},"ffmpeg -version"),". Also verify the installation path - default ",(0,r.kt)("inlineCode",{parentName:"p"},"/usr/bin/ffmpeg"),":"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(9341).Z,width:"765",height:"271"})),(0,r.kt)("p",null,"In my case I am using the Alpine Linux Docker image of OpenHab which does not come with FFMPEG. I will install it by entering the ",(0,r.kt)("inlineCode",{parentName:"p"},"openhab")," container (I tagged my container ",(0,r.kt)("inlineCode",{parentName:"p"},"openhab")," - if you did not supply a tag when running the container, replace the ",(0,r.kt)("inlineCode",{parentName:"p"},"openhab")," tag with your container ID) and run the installation command: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker exec -ti openhab /bin/ash\napk add ffmpeg\nffmpeg -version\n")),(0,r.kt)("p",null,"Remember that when you remove this container and recreate it - e.g. after updating the container image - you have to re-install ffmpeg!"),(0,r.kt)("h2",{id:"add-an-snapshot-channel"},"Add an Snapshot Channel"),(0,r.kt)("p",null,"Click save and re-enter the camera ",(0,r.kt)("strong",{parentName:"p"},"Thing")," you created. Now we can continue by adding Channels and link them to ",(0,r.kt)("strong",{parentName:"p"},"Items")," on our OpenHab dashboard:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(58481).Z,width:"756",height:"527"})),(0,r.kt)("p",null,"I choose the ",(0,r.kt)("strong",{parentName:"p"},"Image")," channel and assign it to the ",(0,r.kt)("strong",{parentName:"p"},"Semantic Property")," ",(0,r.kt)("inlineCode",{parentName:"p"},"Presence"),":"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(89643).Z,width:"781",height:"981"})),(0,r.kt)("p",null,"Click save and additionally add a ",(0,r.kt)("strong",{parentName:"p"},"Poll Image")," channel and add it to the same dashboard ",(0,r.kt)("strong",{parentName:"p"},"Item"),". It allows us to start the image polling service."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(61266).Z,width:"1003",height:"520"})),(0,r.kt)("p",null,"On the properties tab on my dashboard I am now able to see the ",(0,r.kt)("strong",{parentName:"p"},"Presence Property"),". Clicking on the ",(0,r.kt)("strong",{parentName:"p"},"Image Item")," allows me to access a snapshot from my camera:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(3112).Z,width:"841",height:"482"})),(0,r.kt)("h2",{id:"camera-control"},"Camera Control"),(0,r.kt)("p",null,"You can continue adding camera channels to take control over your camera from the OpenHab dashboard - e.g. the Pan&Tilt control:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(61835).Z,width:"916",height:"669"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"OpenHAB 3 INSTAR Camera Binding",src:a(64340).Z,width:"886",height:"229"})))}c.isMDXComponent=!0},23247:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_20-2a7aa41f5b1868b6921c53253d24da0a.png"},79262:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_21-4e18beea78fee9964decb041521b9008.png"},70176:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_22-1451d0cb714eb576ada29bee5910de07.png"},9341:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_23-8dd32b4bc7e6443b387dbe5d63ac7392.png"},58481:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_24-b1a4e2894d966f111d116245f57b75cf.png"},89643:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_25-2eef0b1b4a53e7de8a5347b13198ede4.png"},61266:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_26-2a662367b2b465336cefe19a6c01eb3b.png"},3112:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_27-a38f393fef54901012eb219f170a72ea.png"},61835:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_28-da1d23b924182b4f453333efdf1ab949.png"},64340:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/OpenHAB3_Docker_29-2540bf0d599f334e7eb8ff1f78a6064d.png"},1059:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d-e12a28f9c35f9ae6e3540843545ced7e.jpg"}}]);