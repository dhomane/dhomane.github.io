<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-DevOps/Kubernetes/2019-01-15--creating-a-kubernetes-cluster/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Creating a Kubernetes Cluster | Mike Polinowski</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-01-15--creating-a-kubernetes-cluster/2019-01-15"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Creating a Kubernetes Cluster | Mike Polinowski"><meta data-rh="true" name="description" content="Shanghai, China"><meta data-rh="true" property="og:description" content="Shanghai, China"><link data-rh="true" rel="icon" href="/img/icons/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-01-15--creating-a-kubernetes-cluster/2019-01-15"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-01-15--creating-a-kubernetes-cluster/2019-01-15" hreflang="en"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-01-15--creating-a-kubernetes-cluster/2019-01-15" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mike Polinowski RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mike Polinowski Atom Feed">




<link rel="icon" href="/img/angular_momentum.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37,194,160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/angular_momentum.png">
<link rel="mask-icon" href="/img/angular_momentum.png" color="rgb(33,33,33)">
<meta name="msapplication-TileImage" content="/img/angular_momentum.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P74BDWF0C6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P74BDWF0C6",{})</script><link rel="stylesheet" href="/assets/css/styles.714c4925.css">
<link rel="preload" href="/assets/js/runtime~main.23698315.js" as="script">
<link rel="preload" href="/assets/js/main.2d20e69f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Mike Polinowski</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/tags">Tags</a><a class="navbar__item navbar__link" href="/Search">Search</a><a href="https://mpolinowski.github.io/Personal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/development">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/devops">DevOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/hashicorp">Hashicorp</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hashicorp&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/zabbix">Zabbix</a><button aria-label="Toggle the collapsible sidebar category &#x27;Zabbix&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-provisioning">Server Provisioning</a><button aria-label="Toggle the collapsible sidebar category &#x27;Server Provisioning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/gitops">GitOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;GitOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/kubernetes">Kubernetes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2022-11-19--k3s-air-gapped-kubernetes/2022-11-19">Kubernetes Beyond the Edge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-03-05--first-openshift3-cluster/2019-03-05">Setting up an OKD Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-03-02--installing-openshift-3-on-centos-7/2019-03-02">Red Hat OpenShift 3 Container Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-02-01--kubernetes-traefik-ingress/2019-02-01">Kubernetes Traefik Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-27--kubernetes-the-chinese-way/2019-01-27">Kubernetes the Chinese Way</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/2019-01-22">Kubernetes NGINX Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-21--kubernetes-nginx-https-service/2019-01-21">Kubernetes NGINX https Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-21--kubernetes-bare-metal-ingress/2019-01-21">Kubernetes Bare Metal Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-19--kubernetes-cluster-logging/2019-01-19">Kubernetes Cluster Monitoring &amp; Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-17--kubernetes-and-microservices/2019-01-17">Kubernetes and Microservices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-15--creating-a-kubernetes-cluster/2019-01-15">Creating a Kubernetes Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-02--managing-containers-in-kubernetes/2019-01-02">Managing Containers in Kubernetes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/nginx">NGINX</a><button aria-label="Toggle the collapsible sidebar category &#x27;NGINX&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/elasticsearch">Elasticsearch</a><button aria-label="Toggle the collapsible sidebar category &#x27;Elasticsearch&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/ansible">Ansible</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ansible&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-security">Server Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Server Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/linux">Linux</a><button aria-label="Toggle the collapsible sidebar category &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/windows">Windows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Windows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/tomcat">Tomcat</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tomcat&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/salt">Salt</a><button aria-label="Toggle the collapsible sidebar category &#x27;Salt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/internet-of-things--machine-learning">Internet-of-Things &amp; Machine Learning</a><button aria-label="Toggle the collapsible sidebar category &#x27;Internet-of-Things &amp; Machine Learning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/devops"><span itemprop="name">DevOps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/kubernetes"><span itemprop="name">Kubernetes</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Creating a Kubernetes Cluster</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Creating a Kubernetes Cluster</h1></header><p><img loading="lazy" alt="Shanghai, China" src="/assets/images/photo-34219553960_350f18edbb_o-a48aab60811618b152fabbfe36665578.png" width="2832" height="1278" class="img_ev3q"></p><p>In this hands-on lab from <a href="https://linuxacademy.com/cp" target="_blank" rel="noopener noreferrer">Linux Academy</a>, we will install and configure a Kubernetes cluster consisting of 1 master and 2 nodes for the pods. Once the installation and configuration are complete, we will have a 3-node Kubernetes cluster that uses Flannel as the network overlay.</p><ul><li><a href="#instructions">Instructions</a><ul><li><a href="#objectives">Objectives</a></li></ul></li><li><a href="#install-docker-and-kubernetes">Install Docker and Kubernetes</a><ul><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#install-docker-ce">Install Docker CE</a></li><li><a href="#install-kubernetes">Install Kubernetes</a></li><li><a href="#start-docker-and-kublet">Start Docker and Kublet</a></li></ul></li><li><a href="#cluster-initialization">Cluster Initialization</a><ul><li><a href="#installing-a-pod-network-add-on">Installing a Pod Network Add-on</a></li><li><a href="#check-the-cluster-state">Check the cluster state.</a></li></ul></li><li><a href="#create-and-scale-a-deployment-using-kubectl">Create and scale a deployment using kubectl</a><ul><li><a href="#kubernetes-stuck-on-containercreating">Kubernetes stuck on ContainerCreating</a></li><li><a href="#scaling">Scaling</a></li></ul></li><li><a href="#pod-deployment">Pod Deployment</a></li><li><a href="#kubernetes-services">Kubernetes Services</a></li><li><a href="#updating-the-pod">Updating the Pod</a></li><li><a href="#adding-a-queue-server">Adding a Queue Server</a></li><li><a href="#replication-not-recommended">Replication (not recommended)</a><ul><li><a href="#replicasets">ReplicaSets</a></li></ul></li><li><a href="#deployment-recommended">Deployment (recommended)</a><ul><li><a href="#rolling-update-and-rollback">Rolling Update and Rollback</a></li></ul></li><li><a href="#networking-and-service-discovery">Networking and Service Discovery</a><ul><li><a href="#creating-a-database-pod">Creating a Database Pod</a></li></ul></li><li><a href="#kubernetes--compose--kompose">Kubernetes + Compose = Kompose</a><ul><li><a href="#use-kompose">Use Kompose</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instructions">Instructions<a class="hash-link" href="#instructions" title="Direct link to heading">​</a></h2><p>In this learning activity, we will create a Kubernetes cluster. The commands we will use for this process can be found in the task list by clicking on the orange question mark buttons.</p><p>Once you have completed the lab, leave your cluster in its final state. Do not delete the deployment:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="objectives">Objectives<a class="hash-link" href="#objectives" title="Direct link to heading">​</a></h3><ul><li>Install Docker and Kubernetes on all servers.</li><li>Create and scale a deployment using kubectl.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-docker-and-kubernetes">Install Docker and Kubernetes<a class="hash-link" href="#install-docker-and-kubernetes" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h3><ol><li>You first need to login as your root user or elevate your users privileges via sudo on your master and two minion servers:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">su</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>This next step is not recommended in production (<a href="https://docs.docker.com/engine/security/seccomp/" target="_blank" rel="noopener noreferrer">How do you create a SE Linux policy?</a>) - but we are going to disable SE Linux on all 3 servers:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">setenforce 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sed -i --follow-symlinks &#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27; /etc/sysconfig/selinux</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Now we need to enable the <code>br_netfilter</code> module on all servers to allow our cluster to communicate:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">modprobe br_netfilter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;1&#x27;</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> /proc/sys/net/bridge/bridge-nf-call-iptables</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="797" height="95" class="img_ev3q"></p><hr><ol start="4"><li>Make sure that swap has been turned off:</li></ol><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_02-c4ea0ac77cac016ab2edd9ba23f2e33c.png" width="799" height="164" class="img_ev3q"></p><hr><blockquote><p>To turn off swap on centos type <code>swapoff -a</code> and check that the swap was removed with <code>free -h</code>. Edit the <code>/etc/fstab</code> file, search for the swap line and comment the entire line by adding a <code>#</code> in front of the line:</p></blockquote><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_02a-25799c3e674badd42bc13d496fff73f9.png" width="800" height="343" class="img_ev3q"></p><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_02b-39537420ddad7183288465651ed1b0c3.png" width="798" height="218" class="img_ev3q"></p><hr><blockquote><p>Now delete the remaining swap file - check the location <code>blkid</code> and remove it <code>rm /dev/mapper/centos-swap</code>:</p></blockquote><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_02c-be2b5859334707781a3cb4128a44f26e.png" width="804" height="186" class="img_ev3q"></p><hr><ol><li>Add a FirewallD Service</li></ol><p>Configure FirewallD for Kubernetes to work correctly. First download the k8s-master.xml and k8s-worker.xml files to <code>cd /etc/firewalld/services</code> on your master and minion server:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-master.xml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-worker.xml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">firewall-cmd --reload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>On Master Node</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">firewall-cmd --add-service</span><span class="token operator">=</span><span class="token plain">k8s-master --zone</span><span class="token operator">=</span><span class="token plain">public --permanent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>On Minion Nodes</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">firewall-cmd --add-service</span><span class="token operator">=</span><span class="token plain">k8s-worker --zone</span><span class="token operator">=</span><span class="token plain">public --permanent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>TODO</strong>: I have to add <code>firewall-cmd --add-service=dns --zone=public --permanent</code> ?</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-docker-ce">Install Docker CE<a class="hash-link" href="#install-docker-ce" title="Direct link to heading">​</a></h3><ol><li>Ensure that all Docker dependencies are installed:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y yum-utils device-mapper-persistent-data lvm2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_03-49b24068eca8c5ae189eab2dc97bb86e.png" width="794" height="167" class="img_ev3q"></p><hr><ol start="2"><li>Now we can add the Docker repository and install it:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y docker-ce</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_04-ebe41d866c3973f7a941c73c243e6e75.png" width="799" height="853" class="img_ev3q"></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-kubernetes">Install Kubernetes<a class="hash-link" href="#install-kubernetes" title="Direct link to heading">​</a></h3><p>First we need to add the Kubernetes repository all servers:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">&gt;</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/yum.repos.d/kubernetes.repo  </span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">[kubernetes]  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">name=Kubernetes  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">enabled=1  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">gpgcheck=0  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">repo_gpgcheck=0  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_05-bc4b80dca7b0c868a939d84d13a76d0b.png" width="799" height="160" class="img_ev3q"></p><hr><p>Now we can install Kubernetes on all servers via yum:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y kubelet kubeadm kubectl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_06-ea03219806d65ec3b014982c0ff40dc3.png" width="795" height="867" class="img_ev3q"></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-docker-and-kublet">Start Docker and Kublet<a class="hash-link" href="#start-docker-and-kublet" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> kubelet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl start </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl start kubelet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_07-3c02840f3c43fb0daf788874e0a42fff.png" width="801" height="139" class="img_ev3q"></p><hr><p>To check in what Group Docker is running, run <code>docker info | grep -i cgroup</code>:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="799" height="49" class="img_ev3q"></p><hr><p>In this case it is <code>cgroupfs</code> - we can now make sure that Kubernetes is added to this group:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/cgroup-driver=systemd/cgroup-driver=cgroupfs/g&#x27;</span><span class="token plain"> /etc/systemd/system/kubelet.service.d/10-kubeadm.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl daemon-reload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl restart kubelet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-initialization">Cluster Initialization<a class="hash-link" href="#cluster-initialization" title="Direct link to heading">​</a></h2><p>So far we did the basic setup for all our servers - now we will initialize our cluster from the <strong>MASTER SERVER</strong> using the IP range for Flannel. Kubeadm is a tool built to provide <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/" target="_blank" rel="noopener noreferrer">kubeadm init</a> and <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-join/" target="_blank" rel="noopener noreferrer">kubeadm join</a> as best-practice <em>fast paths</em> for creating Kubernetes clusters. The <strong>init command</strong> executes the following phases:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubeadm init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your Kubernetes master has initialized successfully! You can now join any number of machines by running the following on each node as root:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_09-d3ae6cecae08b0827ce9c27d72ba0b8d.png" width="802" height="247" class="img_ev3q"></p><hr><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubeadm </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> X.X.X.X:6443 --token XXXXXXXXXXXXXXX --discovery-token-ca-cert-hash sha256:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Copy the <code>kubeadmin join</code> command that is in the output and past it into your minion server terminals:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_10-ae96230b0228f8f252e951d5aac343df.png" width="801" height="405" class="img_ev3q"></p><hr><blockquote><p>To start over and reset the <strong>init</strong> and <strong>join</strong> process by running the <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-reset/" target="_blank" rel="noopener noreferrer">kubeadm reset</a> command on your master and all minion servers + clean up iptables <code>iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X</code></p></blockquote><p>To start using your cluster, you need to run the following as a regular user:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> -p </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.kube</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> -i /etc/kubernetes/admin.conf </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">chown</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">id</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -u</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">id</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -g</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.kube/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-a-pod-network-add-on">Installing a Pod Network Add-on<a class="hash-link" href="#installing-a-pod-network-add-on" title="Direct link to heading">​</a></h3><p>You must install a pod network add-on so that your pods can communicate with each other. The network must be deployed before any applications. Also, CoreDNS will not start up before a network is installed. kubeadm only supports <a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network" target="_blank" rel="noopener noreferrer">Container Network Interface (CNI)</a> based networks (and does not support kubenet).</p><p>There are several CNI&#x27;s listed for Kubernetes - but we will be using the solution from <a href="https://www.weave.works/docs/net/latest/kube-addon/" target="_blank" rel="noopener noreferrer">Weave Net</a>. First Set <strong>/proc/sys/net/bridge/bridge-nf-call-iptables</strong> to <strong>1</strong> by running <code>sysctl net.bridge.bridge-nf-call-iptables=1</code> to pass bridged IPv4 traffic to iptables’ chains. This is a requirement for some CNI plugins to work, for more information please see here.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sysctl -w net.bridge.bridge-nf-call-iptables=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sysctl -w net.bridge.bridge-nf-call-ip6tables=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">reboot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Weave Net works on amd64, arm, arm64 and ppc64le without any extra action required. Weave Net sets hairpin mode by default. This allows Pods to access themselves via their Service IP address if they don’t know their PodIP:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://cloud.weave.works/k8s/net?k8s-version=</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">kubectl version </span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> base64 </span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">tr</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic"> -d </span><span class="token string variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;\n&#x27;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_11-7f43cbd3a6a5999b08b1fa045ea71692.png" width="807" height="356" class="img_ev3q"></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-the-cluster-state">Check the cluster state.<a class="hash-link" href="#check-the-cluster-state" title="Direct link to heading">​</a></h3><p>A quick <code>kubectl get nodes</code> should confirm that all our nodes are now connected to the container network (see screenshot above)!</p><p>Once a pod network has been installed, you can confirm that it is working by checking that the CoreDNS pod is Running in the output of <code>kubectl get pods --all-namespaces</code>. And once the CoreDNS pod is up and running, you can continue by joining your nodes.</p><p>Platforms like Kubernetes assume that each container (pod) has a unique, routable IP inside the cluster. The advantage of this model is that it removes the port mapping complexities that come from sharing a single host IP.</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_12-a8d68e1ab3bcfc0d96bd66eb9506c014.png" width="812" height="201" class="img_ev3q"></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-and-scale-a-deployment-using-kubectl">Create and scale a deployment using kubectl<a class="hash-link" href="#create-and-scale-a-deployment-using-kubectl" title="Direct link to heading">​</a></h2><p><a href="https://kubernetes.io/docs/reference/kubectl/overview/" target="_blank" rel="noopener noreferrer">Kubectl</a> is a command line interface for running commands against Kubernetes clusters. We can run a NGINX container with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl create deployment nginx --image</span><span class="token operator">=</span><span class="token plain">nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can verify that the <strong>Pod</strong> was created by Kubernetes:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="801" height="88" class="img_ev3q"></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling">Scaling<a class="hash-link" href="#scaling" title="Direct link to heading">​</a></h3><p>To scale up our web server contingent to <strong>4</strong>, we can use the following <code>kubectl</code> command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl scale deployment nginx --replicas</span><span class="token operator">=</span><span class="token number">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_16-eb8f14f39a94ce977e5d589a4732656f.png" width="808" height="133" class="img_ev3q"></p><hr><p>To get rid of those pods you can scale it back down to 0 replicas and to delete Nginx completely delete the deployment (not the pods - those would be respawned automatically):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl scale deployment nginx --replicas</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl delete deployment nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="801" height="99" class="img_ev3q"></p><hr><p>If you try to delete the pods by name <code>kubectl delete pod nginx-5c7588df-lf2pb</code>, or try to delete all: <code>kubectl delete pods --all</code>, Kubernetes will respawn new pods to meet your deployment scale requirement.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pod-deployment">Pod Deployment<a class="hash-link" href="#pod-deployment" title="Direct link to heading">​</a></h2><p>Let&#x27;s deploy an simple Angular app inside a <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#pod-v1-core" target="_blank" rel="noopener noreferrer">Kubernetes Pod</a> - we will use the 0 release of <a href="https://hub.docker.com/r/richardchesterwood/k8s-fleetman-webapp-angular/tags" target="_blank" rel="noopener noreferrer">this Docker image</a> to get started with. To do this we will have to create a Pod Config file for it called <code>webapp-angular.yaml</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">webapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">angular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="797" height="153" class="img_ev3q"></p><hr><p>We can now use <strong>kubectl</strong> to read our configuration file and generate the webapp Pod:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f webapp-angular.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_19-6d89a82f558afcf38391ae97211fd214.png" width="803" height="132" class="img_ev3q"></p><hr><p>You can inspect the pod with:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl describe pod webapp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_20-7428d7f80bd5d3642653f4b4cd036d26.png" width="801" height="776" class="img_ev3q"></p><hr><p>Just like in Docker, we can use <strong>kubectl</strong> to run commands against our containers - e.g. to access the shell inside your container, contact the webserver (that should be serving our Angular app) and printing out index page:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl -it </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exec</span><span class="token plain"> webapp </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/ </span><span class="token comment" style="color:rgb(98, 114, 164)"># wget http://localhost:80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/ </span><span class="token comment" style="color:rgb(98, 114, 164)"># cat index.html</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_21-1b68ade9649683ae59355e7b5af978d0.png" width="799" height="314" class="img_ev3q"></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-services">Kubernetes Services<a class="hash-link" href="#kubernetes-services" title="Direct link to heading">​</a></h2><p>We now have a Pod that is serving our Angular frontend. To be able to access this Pod from <em>the outside</em> we need to add a <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#service-v1-core" target="_blank" rel="noopener noreferrer">Kubernetes service</a>. Let&#x27;s create a file <code>webapp-service.yaml</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Unique key of the Service instance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Accept traffic sent to port 80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># The nodePort is available from outside of the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># cluster when is set to NodePort. It&#x27;s value has</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># to be &gt; 30000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">nodePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">30080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Define which pods are going to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># be represented by this service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># The service makes an network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># endpoint for our app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Setting the Service type to ClusterIP makes the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># service only available from inside the cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># To expose a port use NodePort instead</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NodePort</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_22-f160ebe36c803646856bad6ac48354bb.png" width="799" height="389" class="img_ev3q"></p><hr><p>We now have to add the <strong>Selector</strong> <code>webapp</code> in form of a label in <code>webapp-angular.yaml</code> to our frontend pod to connect it to our service:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">webapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">angular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The service can be added to our cluster by the following commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f webapp-angular.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f webapp-service.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="799" height="79" class="img_ev3q"></p><hr><p>By applying our changes, we have updated our pod and created our service.</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_24-2bb678ac98813e63426c07ac2b30d794.png" width="804" height="110" class="img_ev3q"></p><hr><p>The webapp is now accessible on your Cluster IP with the Port <strong>30080</strong>!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="updating-the-pod">Updating the Pod<a class="hash-link" href="#updating-the-pod" title="Direct link to heading">​</a></h2><p>To Update a Pod in Production with 0 downtime we can use labels. We can define a second pod inside the same file <code>webapp-angular.yaml</code>. Right now we are going to use release versions to define our pods. Later we might change this to a <strong>production</strong> and a <strong>development</strong> version - both of which can then be run inside the same cluster and be served by different services:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">release</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">webapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">angular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">release</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token number">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">release</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0-5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">webapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">angular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token number">5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Make sure to surround release version with quotation marks to convert it into a string - <strong>&quot;0&quot;</strong>. Otherwise you end up with the error message <code>for: &quot;webapp-angular.yaml&quot;: cannot convert int64 to string</code>.</p><p>Now we have to modify our service <code>webapp-service.yaml</code>: to not only check for the app name label, but also for the release version - we want to only connect to the current version 0. Once the version 0.5 is deployed we then can update the service to connect us to the updated Pod instead - allowing us to deploy the update with 0 downtime:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Unique key of the Service instance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Accept traffic sent to port 80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># The nodePort is available from outside of the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># cluster when is set to NodePort. It&#x27;s value has</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># to be &gt; 30000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">nodePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">30080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Define which pods are going to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># be represented by this service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># The service makes an network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># endpoint for our app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">release</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Setting the Service type to ClusterIP makes the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># service only available from inside the cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># To expose a port use NodePort instead</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NodePort</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now update both our Pod and Service - as well add the new Pod with our updated Angular app:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f webapp-angular.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f webapp-service.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get pods --show-labels</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_25-4a4d07c0ccdc19e5e0d821a48786f5bc.png" width="798" height="117" class="img_ev3q"></p><hr><p>Now that both pods are running we can edit our service <code>webapp-service.yaml</code> and change the <code>selector</code> to <code>release: &quot;0-5&quot;</code>. Apply the change with <code>kubectl apply -f webapp-service.yaml</code> and verify that the service is now switched to the new release with <code>kubectl describe service fleetman-webapp</code>:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_26-055eacce4ead9b52881601a1e99f2053.png" width="803" height="302" class="img_ev3q"></p><hr><p>Type in the IP of your <strong>Kybernetes Cluster</strong> (<em>WAN IP of your master server</em>) and add the port <strong>30080</strong> to access the updated web interface with your browser:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_26a-cb6e08fed226877412440fbb9b982c69.png" width="812" height="357" class="img_ev3q"></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-queue-server">Adding a Queue Server<a class="hash-link" href="#adding-a-queue-server" title="Direct link to heading">​</a></h2><p>Our finished WebApp is going to need a message broker to work. We are going to us the <a href="https://hub.docker.com/r/richardchesterwood/k8s-fleetman-queue/tags" target="_blank" rel="noopener noreferrer">given Docker Image</a> in the <strong>release1</strong> version to add <a href="http://activemq.apache.org" target="_blank" rel="noopener noreferrer">Apache ActiveMQ</a> as a queue service for our app. ActiveMQ, or in generall all Message Oriented Middleware (MOM) implementations are designed for the purpose of sending messages between two applications, or two components inside one application.</p><p>To add this service in a Pod, we need to create a configuration file for it - this can either be a new file called <code>webapp-queue.yaml</code>, or we can simply add it to the end of our existing <code>webapp-angular.yaml</code> configuration file to keep everything neat and tidy (this also means that we can simplify the filename to <code>pods.yaml</code> -&gt; <code>mv webapp-angular.yaml pods.yaml</code>):</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">queue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_27-06c65f34e4dea078d4f10dd69fdc455b.png" width="803" height="544" class="img_ev3q"></p><hr><p>Use <strong>kubectl</strong> to read our configuration file and generate the Queue Pod:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f pods.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_28-adac3c606829a95b4a5e4755667857a3.png" width="804" height="161" class="img_ev3q"></p><hr><p>To be able to access the Pod, we need to add it to our service configuration <code>webapp-service.yaml</code> which we can rename to <code>services.yaml</code> -&gt; <code>mv webapp-service.yaml services.yaml</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Unique key of the Service instance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Accept traffic sent to port 8161 (default login is admin/admin)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8161</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8161</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># The nodePort is available from outside of the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># cluster when is set to NodePort. It&#x27;s value has</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># to be &gt; 30000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">nodePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">30010</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Define which pods are going to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># be represented by this service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># The service makes an network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># endpoint for our app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Setting the Service type to ClusterIP makes the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># service only available from inside the cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># To expose a port use NodePort instead</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NodePort</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_29-4e0ab00efffc66af854e899d527d8b7d.png" width="802" height="780" class="img_ev3q"></p><hr><p>We can now apply all changes with:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_30-6a00b1e2aef7fcd5027f8d6f3c6c5840.png" width="804" height="343" class="img_ev3q"></p><hr><p>You can inspect the pod, in case that something doesn&#x27;t look right. All events will be logged at the end of the console output:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl describe pod queue</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_31-a930b220ce168f880a9f20fd3fd9b626.png" width="804" height="159" class="img_ev3q"></p><hr><p>Type in the IP of your <strong>Kybernetes Cluster</strong> (<em>WAN IP of your master server</em>) and add the port <strong>30010</strong> to access the updated web interface with your browser:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_31a-c69da73b0d9502439143a33749e18a1b.png" width="812" height="349" class="img_ev3q"></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="replication-not-recommended">Replication (not recommended)<a class="hash-link" href="#replication-not-recommended" title="Direct link to heading">​</a></h2><p>So far we spawned all our Pods manually using the <code>kubectl apply</code> command. This way it is us who is responsible for the complete life-cycle of the pod. That means that you can delete (gracefully shutdown) or force shutdown those Pods with the <code>kubectl delete</code> command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl delete pod webapp-release-0-5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl delete pod webapp-release-0-5 --force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Pod will just disappear - check with <code>kubectl get all</code> - and not be restarted. The same would happen if your app crashes and that is a situation where we want Kubernetes to recover Pods to keep our App running.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="replicasets">ReplicaSets<a class="hash-link" href="#replicasets" title="Direct link to heading">​</a></h3><p>The <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#replicaset-v1-apps" target="_blank" rel="noopener noreferrer">ReplicaSet</a> is basically just a wrapper around our Pod configuration that defines the number of instances of our Pod we want to be running at all times - if one crashes, it will automatically be replaced by a new version of the same pod.</p><p>Let&#x27;s re-write our Pod definition to a <strong>ReplicaSet</strong> - below is the original <code>pods.yaml</code> file (the webapp with release0 was removed):</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">release</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0-5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">webapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">angular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token number">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">queue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <strong>ReplicaSet</strong> just adds a few lines to the top of our Pod configuration:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ReplicaSet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Unique key of the ReplicaSet instance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># the ReplicaSet manages all Pods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># where the lable = app: webapp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># only 1 Pod should exist atm - if it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># crashes, a new pod will be spawned.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Here starts the Pod Definition from b4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># name: webapp / now we ReplicaSet name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">webapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">angular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release0.5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">queue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_32-a7af0d41be81cf475bff336e96d32c54.png" width="802" height="471" class="img_ev3q"></p><hr><p>Before applying our new <strong>ReplicaSet</strong> let&#x27;s first delete all pods we created earlier <code>kubectl delete pods --all</code> and then start the new Pods with <code>kubectl apply -f pods.yaml</code>. You can verify that everything worked with <code>kubectl get all</code> and <code>kubectl describe replicaset webapp</code>:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_33-494b6d949302b0155f3139aed1198b19.png" width="802" height="652" class="img_ev3q"></p><hr><p>We earlier added a release selector to the <code>services.yaml</code> that now needs to be removed as we are no longer using it as a label for our Pod - afterwards run <code>kubectl apply -f services.yaml</code>:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_34-6f2e62d4343cea6f3011d0037018b274.png" width="804" height="405" class="img_ev3q"></p><hr><p>If you now delete the Pod manually - simulating a crash - a new pod will be automatically spawned by Kubernetes to replace the Pod you just lost:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_35-c947cff8740bbb8d6e5c2c215922e0f8.png" width="800" height="162" class="img_ev3q"></p><hr><p>In the case above, your web service would have experienced a few seconds of downtime while waiting for the new pod to spin up. To prevent this issue we can go back to <code>pods.yaml</code> and set the number of <strong>replicas</strong> to <strong>2</strong>. Now if the first pod crashes, the second one will replace it right away:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="798" height="91" class="img_ev3q"></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-recommended">Deployment (recommended)<a class="hash-link" href="#deployment-recommended" title="Direct link to heading">​</a></h2><p>Unlike <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#replicaset-v1-apps" target="_blank" rel="noopener noreferrer">ReplicaSets</a> <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#deployment-v1-apps" target="_blank" rel="noopener noreferrer">Deployments</a> enable <strong>rolling updates</strong> with 0 downtime as well as <strong>roll-backs</strong> to older versions of your app!</p><p>Let&#x27;s start with deleting our ReplicaSet <code>kubectl delete replicaset webapp</code> - this is going to remove both the set and all pods that have been spawned from it:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_37-9fe1f0505e567675eba0bd17002b3ce4.png" width="800" height="143" class="img_ev3q"></p><hr><p>To now change our <strong>ReplicaSet</strong> into a <strong>Deployment</strong> we only have to change <code>type: Deploymet</code> inside our <code>pods.yaml</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Unique key of the Deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># the Deployment manages all Pods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># where the lable = app: webapp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># only 1 Pod should exist atm - if it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># crashes, a new pod will be spawned.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Here starts the Pod Definition from b4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># name: webapp / now we Deployment name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">webapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">angular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> richardchesterwood/k8s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">queue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">release1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We also changed the version of our app back to <code>release0</code> so we can later test out the update procedure. Then apply the cahnges you made with <code>kubectl apply -f pods.yaml</code>:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_38-dc6636119d7e57a3dfe286e886f00627.png" width="801" height="302" class="img_ev3q"></p><hr><p>As you can see, the <strong>Deployment</strong> was created and set up a <strong>ReplicaSet</strong> for us that spawned two <strong>Pods</strong>:</p><ul><li>deployment.apps/webapp   2/2</li><li>replicaset.apps/webapp-5fb4b78949   2</li><li>pod/webapp-5fb4b78949-77ddd   1/1</li><li>pod/webapp-5fb4b78949-kf7rr   1/1</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rolling-update-and-rollback">Rolling Update and Rollback<a class="hash-link" href="#rolling-update-and-rollback" title="Direct link to heading">​</a></h3><p>Now to update our app back to <code>release0-5</code> edit <code>pods.yaml</code> and set the image to back to the 0.5 release. Afterwards run <code>kubectl apply -f pods.yaml</code>. This will start up a new <strong>ReplicaSet</strong> with the updated pods, but keep the old set alive until the update is ready - resulting in a 0-downtime, rolling update of our app:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_39-b12faa78389d30e1168e4b113f1e4101.png" width="796" height="297" class="img_ev3q"></p><hr><p>As seen above, the new ReplicaSet was successfully deployed - but the old one was <strong>not deleted</strong>. In case that something goes wrong during the update and the new pods never spin up, the old ones will not go down - keeping your app alive. This also allows you to always come back to the old version, if something goes wrong after the update. You can follow the rollout process with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl rollout status deployment webapp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To roll back to a working version of your app - after a desasterous update - check the <strong>Rollout History</strong> and run the rollback command to go back to a previous version or specify the revision you need:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl rollout history deployment webapp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl rollout undo deployment webapp --to-revision=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="803" height="102" class="img_ev3q"></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="networking-and-service-discovery">Networking and Service Discovery<a class="hash-link" href="#networking-and-service-discovery" title="Direct link to heading">​</a></h2><p>We will now create a simple Pod to use as a test environment. Create a file named busybox.yaml with the following contents:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> busybox</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">1.28</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">imagePullPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">restartPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Always</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then create a pod using this file and verify its status:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl create -f busybox.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pod/busybox created</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get pods busybox</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME      READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">busybox   </span><span class="token number">1</span><span class="token plain">/1       Running   </span><span class="token number">0</span><span class="token plain">          12s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once that pod is running, you can <code>exec nslookup</code> in that environment. If you see something like the following, DNS is working correctly:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exec</span><span class="token plain"> -ti busybox -- </span><span class="token function" style="color:rgb(80, 250, 123)">nslookup</span><span class="token plain"> kubernetes.default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server:    </span><span class="token number">10.96</span><span class="token plain">.0.10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Address </span><span class="token number">1</span><span class="token plain">: </span><span class="token number">10.96</span><span class="token plain">.0.10 kube-dns.kube-system.svc.cluster.local</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Name:      kubernetes.default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Address </span><span class="token number">1</span><span class="token plain">: </span><span class="token number">10.96</span><span class="token plain">.0.1 kubernetes.default.svc.cluster.local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>nslookup</code> successfully contacted the internal <strong>CoreDNS server</strong> on <code>10.96.0.10</code> that Kubernetes provides and resolved the corresponding IP address for <strong>kubernetes.default</strong>. If the address resolution fails, try to to bring down <strong>FirewallD</strong> and test which port is being blocked - don&#x27;t forget to bring it back up afterwards:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl stop firewalld </span><span class="token operator">&amp;&amp;</span><span class="token plain"> systemctl disable firewalld</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl start firewalld </span><span class="token operator">&amp;&amp;</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> firewalld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>What to do if shutting down FirewallD &quot;solves&quot; your Problem?</strong></p><p>There are several threads on Github talking about this issue - <a href="https://github.com/kubernetes/kubeadm/issues/504" target="_blank" rel="noopener noreferrer">this one</a> solved the issue for me:</p><ul><li><strong>Problem</strong>: <code>nslookup</code> does not resolve any domains when FirewallD is active:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@in-centos-master ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># kubectl exec -ti webapp-cf477f847-9wqft sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/ </span><span class="token comment" style="color:rgb(98, 114, 164)"># nslookup database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nslookup: can</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;t resolve &#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;: Name does not resolve</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">nslookup: can&#x27;</span><span class="token plain">t resolve </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;database&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> Try again</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/ </span><span class="token comment" style="color:rgb(98, 114, 164)"># nslookup google.com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nslookup: can</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;t resolve &#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;: Name does not resolve</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">nslookup: can&#x27;</span><span class="token plain">t resolve </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;google.com&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> Try again</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/ </span><span class="token comment" style="color:rgb(98, 114, 164)"># exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> terminated with </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span><span class="token plain"> code </span><span class="token number">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Solution</strong>: Configure <code>iptables</code> as follows by <a href="https://github.com/kubernetes/kubeadm/issues/504#issuecomment-404737675" target="_blank" rel="noopener noreferrer">copying this</a> to all nodes in cluster:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl stop kubelet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl stop </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> -rf /var/lib/cni/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> -rf /etc/cni/net.d</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> -rf /run/flannel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables -t nat -F</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables -t mangle -F</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables -F</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables -X</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables -P INPUT ACCEPT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables -P FORWARD ACCEPT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables -P OUTPUT ACCEPT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ip6tables -t nat -F</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ip6tables -t mangle -F</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ip6tables -F</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ip6tables -X</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ip6tables -P INPUT ACCEPT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ip6tables -P FORWARD ACCEPT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ip6tables -P OUTPUT ACCEPT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables -L -v -n </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">iptables -L -v -n -t nat</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">conntrack -L </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ipset list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lsmod</span><span class="token operator">|</span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> br_netfilter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">modprobe br_netfilter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl start </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl start kubelet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>nslookup</code> should now work:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/ </span><span class="token comment" style="color:rgb(98, 114, 164)"># nslookup database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nslookup: can</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;t resolve &#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">&#x27;: Name does not resolve</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Name:      database</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Address </span><span class="token number">1</span><span class="token plain">: </span><span class="token number">10.105</span><span class="token plain">.73.87 database.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/ </span><span class="token comment" style="color:rgb(98, 114, 164)"># </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or check the <a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/" target="_blank" rel="noopener noreferrer">DNS Debugging</a> section in the Kubernetes documentation.</p><p>To be able to connect applications in different pods - e.g. having a backend container accessing a database in a different pod - Kubernetes has it&#x27;s own <strong>DNS Service</strong> and we can assign pods to <strong>Namespaces</strong> to group them together. When we create a pod without specifying a namespace, it will be assigned the <code>namespace: default</code>. The command <code>kubectl get all</code> shows us all pods that are inside this specific space. We can run <code>kubectl get namespaces</code> to see all available spaces that have been assigned by the DNS service:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_41-93b57f46dbb1d20ffa32673b4081a825.png" width="791" height="357" class="img_ev3q"></p><hr><p>If we want to see Pods running in the <strong>kube-system</strong> namespace we can use the <code>kubectl get pods -n kube-system</code> command.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-database-pod">Creating a Database Pod<a class="hash-link" href="#creating-a-database-pod" title="Direct link to heading">​</a></h3><p>We now have a Web Application and a message broker in place. Next we want to a add a MariaDB database and we do so with the following configuration file <code>networking-tests.yaml</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># Use secret in real life</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> MYSQL_ROOT_PASSWORD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> MYSQL_DATABASE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> fleetman</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> database</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3306</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterIP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can apply this configuration to our cluster with <code>kubectl apply -f networking-tests.yaml</code> and verify that it is running with <code>kubectl get all</code>:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_42-0f3104e9869854fc996c4fda73dfff7a.png" width="796" height="344" class="img_ev3q"></p><hr><p>We now want to see if we can connect to the database from our webapp container. To do so we need to execute the shell command inside the container and check the DNS configuration file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl exec -it webapp-cf477f847-9wqft sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/ # cat /etc/resolv.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="809" height="93" class="img_ev3q"></p><hr><p>In this case the CoreDNS server is registered under <code>nameserver 10.96.0.10</code> - that means that every time we need to resolve a domain name, like we did earlier with <code>kubernetes.default</code>, this DNS server is contacted to resolve the underlying IP address for us. We can verify this by typing:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get services -n kube-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="data:image/png;base64,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" width="810" height="63" class="img_ev3q"></p><hr><p>That means that if we want to connect to our database server from another pod in our cluster (<strong>Service Discovery</strong>), all we need to do is to connect to the domain name <code>database</code> that is provided by the database service. This is very important since the assigned IP address can change all the time!</p><p>Going back into the webapp container we can run a <code>nslookup</code> to see if the DNS service is working correctly:</p><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_45-fe84cfb14426db5fd0dc99ddbc5aaa13.png" width="807" height="189" class="img_ev3q"></p><hr><p>As you see, we can not only resolve internal cluster IPs but also internet domains - the CoreDNS service is using <code>8.8.8.8</code> and <code>8.8.4.4</code> as _<em>Upstream DNS Servers</em> <a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-custom-nameservers/#configure-stub-domain-and-upstream-dns-servers" target="_blank" rel="noopener noreferrer">by default</a>.</p><p>You can also see that the FQDN (<strong>Fully Qualified Domain Name</strong>) of our database is actually <code>database.default.svc.cluster.local</code>. The reason why we can simply use <code>databse</code> to get an result, is that the <code>/etc/resolv.conf</code> file specifies that if a domain name is not found appened one of the standard strings to it and try again:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">search default.svc.cluster.local svc.cluster.local cluster.local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Just using <code>database</code> as domain works fine because the pod is inside the <strong>default namespace</strong>. As soon as you start using different namespaces for different type of services, you <strong>have to use the FQDN</strong> instead - or at least appened the used namespace to it, e.g. <code>database.mynondefaultnamespace</code> (the DNS service will then add <code>svc.cluster.local</code> to find the FQDN for you).</p><p>To check if the webapp container can access the MariaDB database, we can install the <strong>mySQL client</strong> on the <em>Alpine image</em> that serves our webapp:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">apk update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apk </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> mysql-client</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To connect to our database we just have to type <code>mysql</code> followed by the host address <code>-h database</code> and the login credentials we set inside the configuration file earlier:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql -h database -uroot -ppassword fleetman</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MySQL </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">&gt;</span><span class="token plain"> CREATE TABLE testtable </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">test varchar </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">255</span><span class="token punctuation" style="color:rgb(248, 248, 242)">))</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MySQL </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">fleetman</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">&gt;</span><span class="token plain"> SHOW TABLES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_46-917d98ca41020a3f2bc1435794117ee3.png" width="808" height="539" class="img_ev3q"></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes--compose--kompose">Kubernetes + Compose = Kompose<a class="hash-link" href="#kubernetes--compose--kompose" title="Direct link to heading">​</a></h2><p><a href="http://kompose.io" target="_blank" rel="noopener noreferrer">Kompose</a> is a conversion tool for Docker Compose to container orchestrators such as Kubernetes (or OpenShift).</p><ul><li>Simplify your development process with Docker Compose and then deploy your containers to a production cluster</li><li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/translate-compose-kubernetes/" target="_blank" rel="noopener noreferrer">Convert</a> your <em>docker-compose.yaml</em> with one simple command <code>kompose convert</code></li><li>Immediately bring up your cluster with <code>kompose up</code></li><li>Bring it back down with <code>kompose down</code></li></ul><p>Kompose is in EPEL CentOS repository. If you don’t have EPEL repository already installed and enabled you can do it by running <code>yum install epel-release</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum -y </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> kompose</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-kompose">Use Kompose<a class="hash-link" href="#use-kompose" title="Direct link to heading">​</a></h3><p>In just a few steps, we’ll take you from Docker Compose to Kubernetes. All you need is an existing <code>docker-compose.yml</code> file:</p><ol><li>Go to the directory containing your <em>docker-compose.yml</em> file. Run the <code>kompose up</code> command to deploy to Kubernetes directly.</li><li>Or convert the <em>docker-compose.yml</em> file to files that you can use with <code>kubectl</code>, run <code>kompose convert</code>:</li></ol><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_47-30d631e572017fa65ece93bd122dcf06.png" width="807" height="399" class="img_ev3q"></p><hr><p>And then <code>kubectl create -f &lt;output files&gt;</code> - e.g. :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl create -f api-service.yaml,elasticsearch-service.yaml,frontend-service.yaml,wiki-service.yaml,api-deployment.yaml,api-claim0-persistentvolumeclaim.yaml,elasticsearch-deployment.yaml,esdata-en-persistentvolumeclaim.yaml,frontend-deployment.yaml,frontend-claim0-persistentvolumeclaim.yaml,wiki-deployment.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><img loading="lazy" alt="Creating a Kubernetes Cluster" src="/assets/images/kubernetes_cluster_48-9c76968693dd61bd22006cfea8085518.png" width="799" height="232" class="img_ev3q"></p><hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/linux">LINUX</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/docker">Docker</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/kubernetes">Kubernetes</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Kubernetes/2019-01-15--creating-a-kubernetes-cluster/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/DevOps/Kubernetes/2019-01-17--kubernetes-and-microservices/2019-01-17"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kubernetes and Microservices</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/DevOps/Kubernetes/2019-01-02--managing-containers-in-kubernetes/2019-01-02"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Managing Containers in Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#instructions" class="table-of-contents__link toc-highlight">Instructions</a><ul><li><a href="#objectives" class="table-of-contents__link toc-highlight">Objectives</a></li></ul></li><li><a href="#install-docker-and-kubernetes" class="table-of-contents__link toc-highlight">Install Docker and Kubernetes</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#install-docker-ce" class="table-of-contents__link toc-highlight">Install Docker CE</a></li><li><a href="#install-kubernetes" class="table-of-contents__link toc-highlight">Install Kubernetes</a></li><li><a href="#start-docker-and-kublet" class="table-of-contents__link toc-highlight">Start Docker and Kublet</a></li></ul></li><li><a href="#cluster-initialization" class="table-of-contents__link toc-highlight">Cluster Initialization</a><ul><li><a href="#installing-a-pod-network-add-on" class="table-of-contents__link toc-highlight">Installing a Pod Network Add-on</a></li><li><a href="#check-the-cluster-state" class="table-of-contents__link toc-highlight">Check the cluster state.</a></li></ul></li><li><a href="#create-and-scale-a-deployment-using-kubectl" class="table-of-contents__link toc-highlight">Create and scale a deployment using kubectl</a><ul><li><a href="#scaling" class="table-of-contents__link toc-highlight">Scaling</a></li></ul></li><li><a href="#pod-deployment" class="table-of-contents__link toc-highlight">Pod Deployment</a></li><li><a href="#kubernetes-services" class="table-of-contents__link toc-highlight">Kubernetes Services</a></li><li><a href="#updating-the-pod" class="table-of-contents__link toc-highlight">Updating the Pod</a></li><li><a href="#adding-a-queue-server" class="table-of-contents__link toc-highlight">Adding a Queue Server</a></li><li><a href="#replication-not-recommended" class="table-of-contents__link toc-highlight">Replication (not recommended)</a><ul><li><a href="#replicasets" class="table-of-contents__link toc-highlight">ReplicaSets</a></li></ul></li><li><a href="#deployment-recommended" class="table-of-contents__link toc-highlight">Deployment (recommended)</a><ul><li><a href="#rolling-update-and-rollback" class="table-of-contents__link toc-highlight">Rolling Update and Rollback</a></li></ul></li><li><a href="#networking-and-service-discovery" class="table-of-contents__link toc-highlight">Networking and Service Discovery</a><ul><li><a href="#creating-a-database-pod" class="table-of-contents__link toc-highlight">Creating a Database Pod</a></li></ul></li><li><a href="#kubernetes--compose--kompose" class="table-of-contents__link toc-highlight">Kubernetes + Compose = Kompose</a><ul><li><a href="#use-kompose" class="table-of-contents__link toc-highlight">Use Kompose</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Research</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Notebook</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tags">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/Curriculum-Vitae">CV</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/mike-polinowski-6396ba121/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/MikePolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flickr.com/people/149680084@N06/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flickr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Mike Polinowski, INSTAR Deutschland GmbH, Shenzhen - China.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.23698315.js"></script>
<script src="/assets/js/main.2d20e69f.js"></script>
</body>
</html>