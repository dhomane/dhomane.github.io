<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Kubernetes NGINX Ingress | Mike Polinowski</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/2019-01-22"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Kubernetes NGINX Ingress | Mike Polinowski"><meta data-rh="true" name="description" content="Malekula, Vanuatu"><meta data-rh="true" property="og:description" content="Malekula, Vanuatu"><link data-rh="true" rel="icon" href="/img/icons/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/2019-01-22"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/2019-01-22" hreflang="en"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/2019-01-22" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mike Polinowski RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mike Polinowski Atom Feed">




<link rel="icon" href="/img/angular_momentum.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37,194,160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/angular_momentum.png">
<link rel="mask-icon" href="/img/angular_momentum.png" color="rgb(33,33,33)">
<meta name="msapplication-TileImage" content="/img/angular_momentum.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P74BDWF0C6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P74BDWF0C6",{})</script><link rel="stylesheet" href="/assets/css/styles.714c4925.css">
<link rel="preload" href="/assets/js/runtime~main.23698315.js" as="script">
<link rel="preload" href="/assets/js/main.2d20e69f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Mike Polinowski</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/tags">Tags</a><a class="navbar__item navbar__link" href="/Search">Search</a><a href="https://mpolinowski.github.io/Personal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/development">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/devops">DevOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/hashicorp">Hashicorp</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hashicorp&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/zabbix">Zabbix</a><button aria-label="Toggle the collapsible sidebar category &#x27;Zabbix&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-provisioning">Server Provisioning</a><button aria-label="Toggle the collapsible sidebar category &#x27;Server Provisioning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/gitops">GitOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;GitOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/kubernetes">Kubernetes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2022-11-19--k3s-air-gapped-kubernetes/2022-11-19">Kubernetes Beyond the Edge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-03-05--first-openshift3-cluster/2019-03-05">Setting up an OKD Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-03-02--installing-openshift-3-on-centos-7/2019-03-02">Red Hat OpenShift 3 Container Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-02-01--kubernetes-traefik-ingress/2019-02-01">Kubernetes Traefik Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-27--kubernetes-the-chinese-way/2019-01-27">Kubernetes the Chinese Way</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/2019-01-22">Kubernetes NGINX Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-21--kubernetes-nginx-https-service/2019-01-21">Kubernetes NGINX https Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-21--kubernetes-bare-metal-ingress/2019-01-21">Kubernetes Bare Metal Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-19--kubernetes-cluster-logging/2019-01-19">Kubernetes Cluster Monitoring &amp; Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-17--kubernetes-and-microservices/2019-01-17">Kubernetes and Microservices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-15--creating-a-kubernetes-cluster/2019-01-15">Creating a Kubernetes Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/Kubernetes/2019-01-02--managing-containers-in-kubernetes/2019-01-02">Managing Containers in Kubernetes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/nginx">NGINX</a><button aria-label="Toggle the collapsible sidebar category &#x27;NGINX&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/elasticsearch">Elasticsearch</a><button aria-label="Toggle the collapsible sidebar category &#x27;Elasticsearch&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/ansible">Ansible</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ansible&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-security">Server Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Server Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/linux">Linux</a><button aria-label="Toggle the collapsible sidebar category &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/windows">Windows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Windows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/tomcat">Tomcat</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tomcat&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/salt">Salt</a><button aria-label="Toggle the collapsible sidebar category &#x27;Salt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/internet-of-things--machine-learning">Internet-of-Things &amp; Machine Learning</a><button aria-label="Toggle the collapsible sidebar category &#x27;Internet-of-Things &amp; Machine Learning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/devops"><span itemprop="name">DevOps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/kubernetes"><span itemprop="name">Kubernetes</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Kubernetes NGINX Ingress</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Kubernetes NGINX Ingress</h1></header><p><img loading="lazy" alt="Malekula, Vanuatu" src="/assets/images/photo-34607488365_9f40aafb01_o-aa3dc06f1415ec75707a4350b8063789.jpg" width="1908" height="823" class="img_ev3q"></p><ul><li><a href="#how-to-use-nginx-ingress-controller">How to Use Nginx Ingress Controller</a><ul><li><a href="#creating-the-resources-for-nginx-ingress">Creating the resources for Nginx Ingress</a></li><li><a href="#creating-the-load-balancing-service">Creating the Load Balancing Service</a></li><li><a href="#create-two-web-apps-to-respond-to-the-incoming-traffic">Create two Web Apps to Respond to the incoming Traffic</a></li><li><a href="#creating-the-ingress">Creating the Ingress</a></li></ul></li><li><a href="#testing-the-ingress">Testing the Ingress</a></li><li><a href="#adding-a-nodejs--expressjs-web-app">Adding a Node.js / Express.js Web App</a><ul><li><a href="#preparing-the-nginx-ingress">Preparing the NGINX Ingress</a></li><li><a href="#it-could-be-so-easy-but">It could be so easy, but...</a></li></ul></li><li><a href="#adding-tls">Adding TLS</a></li></ul><p>An <a href="https://kubernetes.github.io/ingress-nginx/deploy/#generic-deployment" target="_blank" rel="noopener noreferrer">Ingress</a> is an application that allows you to access your Kubernetes services from outside the Kubernetes cluster. This lets you consolidate your routing rules into a single resource, e.g.:</p><ul><li>mydomain.com/api/web/ leads to an api service for your web application</li><li>mydomain.com/api/mobile/ leads to an api-v2 service for the mobile access</li></ul><p>The <strong>Ingress</strong> enables you make your services available <strong>without</strong> having to use <a href="https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/" target="_blank" rel="noopener noreferrer">LoadBalancers</a> (only available on Cloud solutions like AWS, GCE, Azure...) or exposing each service on the Node (<a href="https://kubernetes.io/docs/concepts/services-networking/service/#nodeport" target="_blank" rel="noopener noreferrer">NodePort</a>). Making this the ideal solution for an on-premise hosting of an Kubernetes Cluster.</p><p>Popular Ingress Controllers include:</p><ul><li><a href="https://github.com/kubernetes/ingress-nginx/blob/master/README.md" target="_blank" rel="noopener noreferrer">Nginx</a></li><li><a href="https://github.com/heptio/contour" target="_blank" rel="noopener noreferrer">Contour</a> </li><li><a href="https://www.haproxy.com/blog/haproxy_ingress_controller_for_kubernetes/" target="_blank" rel="noopener noreferrer">HAProxy</a> </li><li><a href="https://github.com/containous/traefik" target="_blank" rel="noopener noreferrer">Traefik</a></li></ul><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/kubernetes-ingress_01-e14725bb947cbcdf1697b77afc28ae31.png" width="800" height="533" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-nginx-ingress-controller">How to Use Nginx Ingress Controller<a class="hash-link" href="#how-to-use-nginx-ingress-controller" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-resources-for-nginx-ingress">Creating the resources for Nginx Ingress<a class="hash-link" href="#creating-the-resources-for-nginx-ingress" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/mandatory.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or create the <strong>mandatory.yaml</strong> file locally and create the prerequisites with <code>kubectl apply -f mandatory.yaml</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Namespace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">configuration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">services</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> udp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">services</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">serviceaccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">clusterrole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> configmaps</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> endpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> secrets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> watch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> services</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> watch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;extensions&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> ingresses</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> watch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> events</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> create</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> patch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;extensions&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> ingresses/status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Role</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">role</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> configmaps</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> secrets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> namespaces</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> configmaps</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resourceNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># Defaults to &quot;&lt;election-id&gt;-&lt;ingress-class&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># Here: &quot;&lt;ingress-controller-leader&gt;-&lt;nginx&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># This has to be adapted if you change either parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># when launching the nginx-ingress-controller.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ingress-controller-leader-nginx&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> configmaps</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> create</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> endpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> RoleBinding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">role</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nisa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">binding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">roleRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">apiGroup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Role</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">role</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">subjects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">serviceaccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRoleBinding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">clusterrole</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nisa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">binding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">roleRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">apiGroup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">clusterrole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">subjects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">serviceaccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controller</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">prometheus.io/port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;10254&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">prometheus.io/scrape</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">serviceAccountName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">serviceaccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controller</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> quay.io/kubernetes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controller/nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controller</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">0.23.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> /nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controller</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">configmap=$(POD_NAMESPACE)/nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">configuration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">configmap=$(POD_NAMESPACE)/tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">services</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">udp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">configmap=$(POD_NAMESPACE)/udp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">services</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">publish</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service=$(POD_NAMESPACE)/ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">prefix=nginx.ingress.kubernetes.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">securityContext</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">allowPrivilegeEscalation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">capabilities</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">drop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> ALL</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> NET_BIND_SERVICE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)"># www-data -&gt; 33</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">runAsUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">33</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> POD_NAME</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">valueFrom</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">fieldRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">fieldPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metadata.name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> POD_NAMESPACE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">valueFrom</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">fieldRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">fieldPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metadata.namespace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /healthz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10254</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">scheme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HTTP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">successThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">timeoutSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">readinessProbe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /healthz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10254</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">scheme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HTTP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">successThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">timeoutSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/kubernetes-ingress_02-1d91e4247a657bde5d2d5fa064c8fa03.png" width="794" height="217" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-load-balancing-service">Creating the Load Balancing Service<a class="hash-link" href="#creating-the-load-balancing-service" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/provider/baremetal/service-nodeport.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or again, create the <strong>nodeport-ingress-service.yaml</strong> file locally and create the Ingress service with <code>kubectl apply -f nodeport-ingress-service.yaml</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NodePort</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">externalIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> &lt;add the IP address of your Kubernetes Master here</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>I am using the Kubernetes cluster on an on-premise cloud service that does not provide a LoadBalancer. The <a href="https://kubernetes.github.io/ingress-nginx/deploy/baremetal/" target="_blank" rel="noopener noreferrer">Bare-Metal</a> solution is something I am working towards, but did implement yet. So this is an old-school DIY cluster and for some reasons the <a href="https://kubernetes.github.io/ingress-nginx/deploy/#docker-for-mac" target="_blank" rel="noopener noreferrer">official documentation</a> lead me to a situation where I did not get an IP address on my Ingress service. <a href="https://qiita.com/soumi/items/c6358e5e859004c2961c" target="_blank" rel="noopener noreferrer">The solution</a> that I found was to add my external IP (this is the WAN IP of my Kubernetes Master - e.g. <code>externalIPs: 172.56.4.112</code> - if you install another server in-front of your cluster on the local area network, you should also be able to use the LAN address of your Master here instead - avoiding exposing your cluster directly to the internet) to the service configuration above. Afterwards I was able to access the apps behind this service through this IP address - see below.</p></blockquote><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="data:image/png;base64,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" width="804" height="52" class="img_ev3q"></p><p>This has set up the Nginx Ingress Controller - you can check that it is running with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get pods --namespace ingress-nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="data:image/png;base64,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" width="810" height="63" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-two-web-apps-to-respond-to-the-incoming-traffic">Create two Web Apps to Respond to the incoming Traffic<a class="hash-link" href="#create-two-web-apps-to-respond-to-the-incoming-traffic" title="Direct link to heading">​</a></h3><p>Now, we can create Ingress resources in our Kubernetes cluster and route external requests to our services. For this we need two services that represent the Ingress routes for our requests. To test this, we can use two web applications that just echo a string, when they receive an HTTP GET command:</p><p><strong>web-echo.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> hashicorp/http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">echo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-text=I am the Web API&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5678</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>mobile-echo.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mobile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mobile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mobile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> hashicorp/http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">echo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-text=I am the Mobile API&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mobile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mobile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5678</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create those two YAML files and create those apps in Kubernetes:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f web-echo.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f mobile-echo.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/kubernetes-ingress_05-2dc66917e60434be1a73eacd22f0d763.png" width="810" height="135" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-ingress">Creating the Ingress<a class="hash-link" href="#creating-the-ingress" title="Direct link to heading">​</a></h3><p>Now we need to declare an Ingress to route requests to <code>/web</code> to the first service, and requests to <code>/mobile</code> to second:</p><p><strong>nginx-ingress.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">ingress.kubernetes.io/rewrite-target</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /web</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5678</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /mobile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mobile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5678</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create the Ingress using the Kubernetes command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl create -f nginx-ingress.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="data:image/png;base64,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" width="813" height="62" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-the-ingress">Testing the Ingress<a class="hash-link" href="#testing-the-ingress" title="Direct link to heading">​</a></h2><p>You should now be able to see that the service was created with <code>kubectl get svc --namespace=ingress-nginx</code> and access your two apps via the WAN IP of your Kubernetes Master (see remark above about the <code>externalIP</code>):</p><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/kubernetes-ingress_07-6fbd95858d1bdd6a47fa734054d6f559.png" width="806" height="347" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-nodejs--expressjs-web-app">Adding a Node.js / Express.js Web App<a class="hash-link" href="#adding-a-nodejs--expressjs-web-app" title="Direct link to heading">​</a></h2><p>We <a href="https://mpolinowski.github.io/express-generator-dockerrized/" target="_blank" rel="noopener noreferrer">earlier created</a> a <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js</a> Web App that uses <a href="https://expressjs.com/en/starter/static-files.html" target="_blank" rel="noopener noreferrer">Express.js</a> to host web content and wrapped it into an Docker container. I want to try to add this docker image and use the web app behind the NGINX Ingress.</p><p>For this app we used the <a href="https://expressjs.com/en/starter/generator.html" target="_blank" rel="noopener noreferrer">Express Generator</a> to scaffold a simple website that consist of 2 pages - one hosted on the app root <code>/</code>, the other one under <code>/users</code> - <a href="https://github.com/mpolinowski/docker-node-express" target="_blank" rel="noopener noreferrer">Github Repository</a>. This was set up inside the <strong>app.js</strong> file the following way:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> indexRouter </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;./routes/index&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> usersRouter </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;./routes/users&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token spread operator">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">use</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> indexRouter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">use</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/users&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> usersRouter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are importing a router that is responsible for a specific route. The router itself - e.g. in case of the <code>/users</code> route just replies with a string once sends a GET:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> express </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;express&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> router </span><span class="token operator">=</span><span class="token plain"> express</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access maybe-class-name" style="color:rgb(80, 250, 123)">Router</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/* GET users listing. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">router</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> res</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> next</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  res</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;User Login&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> router</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="preparing-the-nginx-ingress">Preparing the NGINX Ingress<a class="hash-link" href="#preparing-the-nginx-ingress" title="Direct link to heading">​</a></h3><p>We can now add the app to our Ingress configuration as follows:</p><p><strong>nginx-ingress.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">ingress.kubernetes.io/rewrite-target</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /web</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5678</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /mobile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mobile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5678</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We just added a third route to the Ingress on <code>/test</code> and assigned the service port that our Express app is running on - the port for the app is defined in <code>.\bin\www</code> :</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> port </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">normalizePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">PORT</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;3000&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Great now we could push the app to Docker Hub - e.g. to <strong>mpolinowski/docker-node-express</strong> - and create the following Pod and Service configuration for it:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mpolinowski/docker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">express</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And run it and access our app on the Master servers WAN IP with the URL <code>/test</code> ....</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="it-could-be-so-easy-but">It could be so easy, but...<a class="hash-link" href="#it-could-be-so-easy-but" title="Direct link to heading">​</a></h3><p>You will get a 404 from NGINX - the Ingress is working (good!), but there is nothing hosting on that URL. What went wrong here is the <strong>Path Prefix</strong> is messing with our app routing. <code>/test</code> should lead us to the root of our web app - at least that is what I expected (this is how the router in Express.js works). But Ingress just recognizes that <code>/test</code> belongs to our web app and then routes <code>/test</code> to it. Since we only have the <code>/</code> and <code>/users</code> route defined, this leads us to a 404 from NGINX.</p><p>To fix this, we have to go back to the <strong>app.js</strong> of our web app and add the <strong>Path Prefix</strong> to every route:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">use</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/test&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> indexRouter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">use</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/test/users&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> usersRouter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now rebuilding the Docker image, re-uploading it to Docker Hub and restarting the image in Kubernetes gives us the result we needed:</p><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="data:image/png;base64,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" width="802" height="196" class="img_ev3q"></p><p>We added the NGINX Ingress to our Kubernetes cluster and used NGINX to proxy three web apps that can now be reached over the internet under the routes <code>&lt;Cluster WAN IP&gt;\web</code>, <code>&lt;Cluster WAN IP&gt;\mobile</code>, <code>&lt;Cluster WAN IP&gt;\test</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-tls">Adding TLS<a class="hash-link" href="#adding-tls" title="Direct link to heading">​</a></h2><p>You can create a certificate for your domain using <a href="https://certbot.eff.org" target="_blank" rel="noopener noreferrer">Certbot</a>. This will create two files that we need to add as a <strong>secret</strong> to Kubernetes - <code>privkey.pem</code> and <code>fullchain.pem</code>. Both files can be found under <em>/etc/letsencrypt/live/my.domain.com</em> and be added with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl create secret tls my-secret --key ./privkey.pem --cert ./fullchain.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And change the Ingress configuration to use the certificate:</p><p><strong>nginx-ingress.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">ingress.kubernetes.io/rewrite-target</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">tls</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /web</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5678</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /mobile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mobile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5678</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/linux">LINUX</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/docker">Docker</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/kubernetes">Kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/nginx">NGINX</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/DevOps/Kubernetes/2019-01-27--kubernetes-the-chinese-way/2019-01-27"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kubernetes the Chinese Way</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/DevOps/Kubernetes/2019-01-21--kubernetes-nginx-https-service/2019-01-21"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kubernetes NGINX https Service</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-use-nginx-ingress-controller" class="table-of-contents__link toc-highlight">How to Use Nginx Ingress Controller</a><ul><li><a href="#creating-the-resources-for-nginx-ingress" class="table-of-contents__link toc-highlight">Creating the resources for Nginx Ingress</a></li><li><a href="#creating-the-load-balancing-service" class="table-of-contents__link toc-highlight">Creating the Load Balancing Service</a></li><li><a href="#create-two-web-apps-to-respond-to-the-incoming-traffic" class="table-of-contents__link toc-highlight">Create two Web Apps to Respond to the incoming Traffic</a></li><li><a href="#creating-the-ingress" class="table-of-contents__link toc-highlight">Creating the Ingress</a></li></ul></li><li><a href="#testing-the-ingress" class="table-of-contents__link toc-highlight">Testing the Ingress</a></li><li><a href="#adding-a-nodejs--expressjs-web-app" class="table-of-contents__link toc-highlight">Adding a Node.js / Express.js Web App</a><ul><li><a href="#preparing-the-nginx-ingress" class="table-of-contents__link toc-highlight">Preparing the NGINX Ingress</a></li><li><a href="#it-could-be-so-easy-but" class="table-of-contents__link toc-highlight">It could be so easy, but...</a></li></ul></li><li><a href="#adding-tls" class="table-of-contents__link toc-highlight">Adding TLS</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Research</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Notebook</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tags">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/Curriculum-Vitae">CV</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/mike-polinowski-6396ba121/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/MikePolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flickr.com/people/149680084@N06/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flickr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Mike Polinowski, INSTAR Deutschland GmbH, Shenzhen - China.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.23698315.js"></script>
<script src="/assets/js/main.2d20e69f.js"></script>
</body>
</html>